[
    {
        "id": "0545859087596164",
        "type": "tab",
        "label": "Dashboard Animation",
        "disabled": false,
        "info": ""
    },
    {
        "id": "75ae1ffb.e2bc9",
        "type": "tab",
        "label": "Input Stop",
        "disabled": false,
        "info": ""
    },
    {
        "id": "4e3a4843.11c9d8",
        "type": "tab",
        "label": "Defect",
        "disabled": false,
        "info": ""
    },
    {
        "id": "e1d21b64.41dc98",
        "type": "tab",
        "label": "Trouble Record",
        "disabled": false,
        "info": ""
    },
    {
        "id": "eda02a4d.b557f8",
        "type": "tab",
        "label": "OEE Record date",
        "disabled": false,
        "info": ""
    },
    {
        "id": "4d5988fc.947f48",
        "type": "tab",
        "label": "Daily OEE",
        "disabled": false,
        "info": ""
    },
    {
        "id": "2a5af2be.e3d51e",
        "type": "tab",
        "label": "About",
        "disabled": false,
        "info": ""
    },
    {
        "id": "f5921a74d5c81ea4",
        "type": "tab",
        "label": "Check IP",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "5cc5a5f1.2fb52c",
        "type": "ui_group",
        "name": "Select Machine",
        "tab": "c7bb13e5.534e4",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "60a0e463.7cc3dc",
        "type": "ui_group",
        "name": "Machine Information",
        "tab": "c7bb13e5.534e4",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "3b6b43cc.f3e76c",
        "type": "ui_group",
        "name": "Availability",
        "tab": "c7bb13e5.534e4",
        "order": 5,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "d39353cd.91093",
        "type": "postgresDB",
        "name": "postgres@127.0.0.1:5432/OEE",
        "host": "192.168.1.200",
        "hostFieldType": "str",
        "port": "5432",
        "portFieldType": "num",
        "database": "SEAMER",
        "databaseFieldType": "str",
        "ssl": "false",
        "sslFieldType": "bool",
        "max": "10",
        "maxFieldType": "num",
        "min": "1",
        "minFieldType": "num",
        "idle": "1000",
        "idleFieldType": "num",
        "connectionTimeout": "10000",
        "connectionTimeoutFieldType": "num",
        "user": "postgres",
        "userFieldType": "str",
        "password": "Adr12345",
        "passwordFieldType": "str"
    },
    {
        "id": "e50eb3d3.527a9",
        "type": "ui_group",
        "name": "Performance",
        "tab": "c7bb13e5.534e4",
        "order": 6,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "af38459f.688558",
        "type": "ui_group",
        "name": "Quality",
        "tab": "c7bb13e5.534e4",
        "order": 7,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "ee767c85.93df2",
        "type": "ui_group",
        "name": "OEE",
        "tab": "c7bb13e5.534e4",
        "order": 4,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "c7bb13e5.534e4",
        "type": "ui_tab",
        "name": "Dashboard Animation",
        "icon": "assessment",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "df781c0f.fe2f7",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#4d4c4c",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#4d4c4c",
                    "edited": true
                },
                "page-titlebar-backgroundColor": {
                    "value": "#4d4c4c",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#737272",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#4d4c4c",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "2fa4a902.2321c6",
        "type": "ui_group",
        "name": "Machine Animation",
        "tab": "c7bb13e5.534e4",
        "order": 3,
        "disp": false,
        "width": "12",
        "collapse": false
    },
    {
        "id": "79176d34.bb5014",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "789d8a34.6ee6c4",
        "order": 1,
        "width": 1,
        "height": 1
    },
    {
        "id": "a8e1d3d.1f6b53",
        "type": "ui_group",
        "name": "Select Machine",
        "tab": "5698c2a4.97844c",
        "order": 1,
        "disp": true,
        "width": "7",
        "collapse": false
    },
    {
        "id": "4e3da262.ed00bc",
        "type": "ui_group",
        "name": "Machine Information",
        "tab": "5698c2a4.97844c",
        "order": 2,
        "disp": true,
        "width": "7",
        "collapse": false
    },
    {
        "id": "a40acfc1.ce9ad",
        "type": "ui_group",
        "name": "OEE",
        "tab": "5698c2a4.97844c",
        "order": 3,
        "disp": false,
        "width": "7",
        "collapse": false
    },
    {
        "id": "9744a8fb.501c28",
        "type": "ui_group",
        "name": "Input / Change Type Product",
        "tab": "5698c2a4.97844c",
        "order": 4,
        "disp": true,
        "width": "7",
        "collapse": false
    },
    {
        "id": "902b6747.3a0888",
        "type": "ui_group",
        "name": "Input Stop Category",
        "tab": "5698c2a4.97844c",
        "order": 5,
        "disp": true,
        "width": "14",
        "collapse": false
    },
    {
        "id": "5698c2a4.97844c",
        "type": "ui_tab",
        "name": "Input Type & Stop Category",
        "icon": "settings_overscan",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "f9837f30.f9df3",
        "type": "ui_group",
        "name": "Input Defect",
        "tab": "2c600fea.a7133",
        "order": 1,
        "disp": true,
        "width": "7",
        "collapse": false
    },
    {
        "id": "a09e942e.af52d8",
        "type": "ui_group",
        "name": "Data Defect",
        "tab": "2c600fea.a7133",
        "order": 2,
        "disp": true,
        "width": "16",
        "collapse": false
    },
    {
        "id": "3a1532c6.d7d5be",
        "type": "ui_group",
        "name": "Defect Category",
        "tab": "2c600fea.a7133",
        "order": 3,
        "disp": false,
        "width": "7",
        "collapse": false
    },
    {
        "id": "e29ce8f0.4b69b8",
        "type": "ui_group",
        "name": "Edit Data Defect",
        "tab": "2c600fea.a7133",
        "order": 4,
        "disp": true,
        "width": "7",
        "collapse": false
    },
    {
        "id": "2c600fea.a7133",
        "type": "ui_tab",
        "name": "Input Defect",
        "icon": "insert_drive_file",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "a90f88f7.5e52f8",
        "type": "ui_group",
        "name": "Machine Selection",
        "tab": "2fc4b931.7502c6",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "d795153e.b9b0b8",
        "type": "ui_group",
        "name": "Data Stop",
        "tab": "2fc4b931.7502c6",
        "order": 2,
        "disp": true,
        "width": "18",
        "collapse": false
    },
    {
        "id": "852d7ff7.ea8d",
        "type": "ui_group",
        "name": "Graph",
        "tab": "2fc4b931.7502c6",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "32bbfec0.d4bee2",
        "type": "ui_group",
        "name": "Problem Corrective Action",
        "tab": "2fc4b931.7502c6",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "2fc4b931.7502c6",
        "type": "ui_tab",
        "name": "Trouble Record",
        "icon": "report",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "4916da5c.154dc4",
        "type": "ui_group",
        "name": "Machine Selection",
        "tab": "957d776d.8be028",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "f0dba0a8.e92a4",
        "type": "ui_group",
        "name": "OEE Record",
        "tab": "957d776d.8be028",
        "order": 2,
        "disp": true,
        "width": "18",
        "collapse": false
    },
    {
        "id": "d33668d6.236788",
        "type": "ui_group",
        "name": "OEE",
        "tab": "957d776d.8be028",
        "order": 3,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "957d776d.8be028",
        "type": "ui_tab",
        "name": "OEE Record Date",
        "icon": "alarm",
        "order": 6,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "dbd48bda.239868",
        "type": "ui_group",
        "name": "Machine Selection",
        "tab": "d083acef.2c885",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "409997ac.e92658",
        "type": "ui_group",
        "name": "Daily OEE Record",
        "tab": "d083acef.2c885",
        "order": 2,
        "disp": true,
        "width": "18",
        "collapse": false
    },
    {
        "id": "ab753a60.c56208",
        "type": "ui_group",
        "name": "OEE",
        "tab": "d083acef.2c885",
        "order": 3,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "763d4f3c.2cf1",
        "type": "ui_group",
        "name": "Stop Category",
        "tab": "d083acef.2c885",
        "order": 4,
        "disp": false,
        "width": "18",
        "collapse": false
    },
    {
        "id": "d1c03619.3e9bb8",
        "type": "ui_group",
        "name": "Output",
        "tab": "d083acef.2c885",
        "order": 5,
        "disp": false,
        "width": "24",
        "collapse": false
    },
    {
        "id": "d083acef.2c885",
        "type": "ui_tab",
        "name": "Daily OEE",
        "icon": "date_range",
        "order": 7,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "c79d7bd9.5faa78",
        "type": "ui_group",
        "name": "About",
        "tab": "d5412efa.cef11",
        "order": 1,
        "disp": false,
        "width": "20",
        "collapse": false
    },
    {
        "id": "d5412efa.cef11",
        "type": "ui_tab",
        "name": "About",
        "icon": "help_outline",
        "order": 8,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "e551.dfecfaaf2",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "409997ac.e92658",
        "order": 2,
        "width": "12",
        "height": 1
    },
    {
        "id": "5d6ddc9.2d23e24",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "409997ac.e92658",
        "order": 5,
        "width": "6",
        "height": 1
    },
    {
        "id": "430c1901.c385d8",
        "type": "ui_tab",
        "name": "Dashboard",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "9d846731.439688",
        "type": "ui_group",
        "name": "List Grafana Dashboard ",
        "tab": "430c1901.c385d8",
        "order": 1,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "5158d059.2168",
        "type": "ui_group",
        "name": "Select Machine",
        "tab": "430c1901.c385d8",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "cd8e1633.f07948",
        "type": "ui_group",
        "name": "Machine Information",
        "tab": "430c1901.c385d8",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "69eb4cb8.0a5614",
        "type": "ui_group",
        "name": "OEE",
        "tab": "430c1901.c385d8",
        "order": 4,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "cf28554c.5ffd28",
        "type": "ui_group",
        "name": "Availability",
        "tab": "430c1901.c385d8",
        "order": 5,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "f635476e.03fe58",
        "type": "ui_group",
        "name": "Performance",
        "tab": "430c1901.c385d8",
        "order": 6,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "cadede39.d22df",
        "type": "ui_group",
        "name": "Quality",
        "tab": "430c1901.c385d8",
        "order": 7,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "492d35a0a8d12236",
        "type": "ui_group",
        "name": "List Grafana Dashboard ",
        "tab": "c7bb13e5.534e4",
        "order": 1,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "fc7adc36fb9f5f70",
        "type": "comment",
        "z": "0545859087596164",
        "name": "Ini untuk menampilkan list machine untuk menampilkan dashboard",
        "info": "",
        "x": 320,
        "y": 280,
        "wires": []
    },
    {
        "id": "6ce6c73939f6bce6",
        "type": "inject",
        "z": "0545859087596164",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 230,
        "y": 480,
        "wires": [
            [
                "779476809eac0bfe",
                "84dee176e357e1f5"
            ]
        ]
    },
    {
        "id": "8ebe41d0d19c58c5",
        "type": "ui_dropdown",
        "z": "0545859087596164",
        "name": "",
        "label": "Machine Name",
        "tooltip": "",
        "place": "Select option",
        "group": "5cc5a5f1.2fb52c",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "",
                "value": "MACHINING-01",
                "type": "str"
            },
            {
                "label": "",
                "value": "MACHINING-02",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "x": 480,
        "y": 480,
        "wires": [
            [
                "779476809eac0bfe"
            ]
        ]
    },
    {
        "id": "84ec31d4db7c4ac2",
        "type": "ui_button",
        "z": "0545859087596164",
        "name": "",
        "group": "5cc5a5f1.2fb52c",
        "order": 2,
        "width": "6",
        "height": "2",
        "passthru": false,
        "label": "Show Real-Time OEE",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "machine_name",
        "payloadType": "flow",
        "topic": "topic",
        "topicType": "msg",
        "x": 920,
        "y": 560,
        "wires": [
            [
                "d199c61b979010a1",
                "6c0443c7abc758de",
                "3d9f566e095d6e9d",
                "b8d1948432105380"
            ]
        ]
    },
    {
        "id": "779476809eac0bfe",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machine_name",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 580,
        "wires": [
            [
                "e6c5d28a36795a82"
            ]
        ]
    },
    {
        "id": "43332dd2034262e1",
        "type": "debug",
        "z": "0545859087596164",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1190,
        "y": 540,
        "wires": []
    },
    {
        "id": "6c0443c7abc758de",
        "type": "ui_text",
        "z": "0545859087596164",
        "group": "60a0e463.7cc3dc",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Machine Name:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1200,
        "y": 500,
        "wires": []
    },
    {
        "id": "e6c5d28a36795a82",
        "type": "switch",
        "z": "0545859087596164",
        "name": "is text empty?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 500,
        "y": 580,
        "wires": [
            [
                "1c8d66fac9a0a76e"
            ],
            [
                "684371423e9e99a4"
            ]
        ]
    },
    {
        "id": "684371423e9e99a4",
        "type": "change",
        "z": "0545859087596164",
        "name": "enabled true",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 690,
        "y": 580,
        "wires": [
            [
                "84ec31d4db7c4ac2"
            ]
        ]
    },
    {
        "id": "1c8d66fac9a0a76e",
        "type": "change",
        "z": "0545859087596164",
        "name": "enabled false",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 690,
        "y": 540,
        "wires": [
            [
                "84ec31d4db7c4ac2"
            ]
        ]
    },
    {
        "id": "d199c61b979010a1",
        "type": "function",
        "z": "0545859087596164",
        "name": "set False",
        "func": "msg.payload = false;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 580,
        "wires": [
            [
                "e9a81c6c2f0c6c69"
            ]
        ]
    },
    {
        "id": "e9a81c6c2f0c6c69",
        "type": "link out",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "e586768ae4931e6c"
        ],
        "x": 1315,
        "y": 580,
        "wires": []
    },
    {
        "id": "e586768ae4931e6c",
        "type": "link in",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "e9a81c6c2f0c6c69"
        ],
        "x": 275,
        "y": 440,
        "wires": [
            [
                "8ebe41d0d19c58c5",
                "e6c5d28a36795a82"
            ]
        ]
    },
    {
        "id": "723b0c083b2cca5e",
        "type": "inject",
        "z": "0545859087596164",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 940,
        "y": 460,
        "wires": [
            [
                "6c0443c7abc758de"
            ]
        ]
    },
    {
        "id": "87e5c6800bdb0265",
        "type": "comment",
        "z": "0545859087596164",
        "name": "Menampilkan Status",
        "info": "",
        "x": 227,
        "y": 642.000020980835,
        "wires": []
    },
    {
        "id": "3d9f566e095d6e9d",
        "type": "link out",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "8a40ff2058ddf5c2",
            "2a017c5b.e0c284",
            "6127b723.ca98f8",
            "2664b5d1.5cd2da",
            "2cdb039b.dd696c"
        ],
        "x": 1145,
        "y": 640,
        "wires": []
    },
    {
        "id": "79fadb4f665af361",
        "type": "link in",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "28c0e8f2c9f6c549"
        ],
        "x": 155,
        "y": 2580,
        "wires": [
            [
                "38e013717f812760"
            ]
        ]
    },
    {
        "id": "d9f228a725effee8",
        "type": "ui_gauge",
        "z": "0545859087596164",
        "name": "",
        "group": "3b6b43cc.f3e76c",
        "order": 1,
        "width": "6",
        "height": "5",
        "gtype": "gage",
        "title": "Availability (%)",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#00b500"
        ],
        "seg1": "70",
        "seg2": "80",
        "x": 657.9999542236328,
        "y": 2577.0000190734863,
        "wires": []
    },
    {
        "id": "b405171e6fbc46a1",
        "type": "inject",
        "z": "0545859087596164",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payload": "machine_no_dashboard_animation",
        "payloadType": "global",
        "x": 290,
        "y": 1220,
        "wires": [
            [
                "0ddb0f37743760ea"
            ]
        ]
    },
    {
        "id": "120e519f50bde3ac",
        "type": "postgrestor",
        "z": "0545859087596164",
        "name": "",
        "query": "SELECT id_machine,machine_no,status_start, status_stop FROM machine_master where machine_name='{{msg.payload}}';",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 330,
        "y": 800,
        "wires": [
            [
                "b84873f27b731cc3",
                "6827141c6b5fdb2e",
                "5ef7f3b5344eddcf",
                "1eaa37f592133146",
                "dd28b090188d5bf1"
            ]
        ]
    },
    {
        "id": "8a40ff2058ddf5c2",
        "type": "link in",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "3d9f566e095d6e9d"
        ],
        "x": 155,
        "y": 800,
        "wires": [
            [
                "120e519f50bde3ac"
            ]
        ]
    },
    {
        "id": "e1637616f724c4c6",
        "type": "ui_text",
        "z": "0545859087596164",
        "group": "60a0e463.7cc3dc",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Status: ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1070,
        "y": 1340,
        "wires": []
    },
    {
        "id": "f5b77027cd5dd820",
        "type": "ui_text",
        "z": "0545859087596164",
        "group": "60a0e463.7cc3dc",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Running Type: ",
        "format": "{{msg.payload.rows[0]['type']}}",
        "layout": "row-spread",
        "x": 600,
        "y": 1340,
        "wires": []
    },
    {
        "id": "8a58d92b9103fa59",
        "type": "ui_text",
        "z": "0545859087596164",
        "group": "60a0e463.7cc3dc",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Loading Time: ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 800,
        "y": 1920,
        "wires": []
    },
    {
        "id": "40220f4903a1d40c",
        "type": "ui_text",
        "z": "0545859087596164",
        "group": "60a0e463.7cc3dc",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Stop Time Category: ",
        "format": "{{msg.payload.rows[0]['category']}}",
        "layout": "row-spread",
        "x": 560,
        "y": 1840,
        "wires": []
    },
    {
        "id": "ed7960f28e930aae",
        "type": "comment",
        "z": "0545859087596164",
        "name": "Menampilkan OEE",
        "info": "",
        "x": 204.99991607666016,
        "y": 2439.999921798706,
        "wires": []
    },
    {
        "id": "b84873f27b731cc3",
        "type": "ui_text",
        "z": "0545859087596164",
        "group": "5cc5a5f1.2fb52c",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "ID Machine: ",
        "format": "{{msg.payload.rows[0]['id_machine']}}",
        "layout": "row-spread",
        "x": 590,
        "y": 820,
        "wires": []
    },
    {
        "id": "6827141c6b5fdb2e",
        "type": "ui_text",
        "z": "0545859087596164",
        "group": "5cc5a5f1.2fb52c",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Machine No: ",
        "format": "{{msg.payload.rows[0]['machine_no']}}",
        "layout": "row-spread",
        "x": 590,
        "y": 860,
        "wires": []
    },
    {
        "id": "5ef7f3b5344eddcf",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "id_machine_dashboard_animation",
                "pt": "global",
                "to": "payload.rows[0]['id_machine']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "7eab32c5b6e36e60",
        "type": "inject",
        "z": "0545859087596164",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 460,
        "y": 740,
        "wires": [
            [
                "b84873f27b731cc3",
                "6827141c6b5fdb2e"
            ]
        ]
    },
    {
        "id": "0ddb0f37743760ea",
        "type": "link out",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "13b054916a6a34a2",
            "80893b3f.f87128"
        ],
        "x": 627.9999542236328,
        "y": 1221.9998302459717,
        "wires": []
    },
    {
        "id": "fc521f0182d61475",
        "type": "comment",
        "z": "0545859087596164",
        "name": "Refresh tiap 1 detik",
        "info": "",
        "x": 190,
        "y": 1180,
        "wires": []
    },
    {
        "id": "48f9357595c0ba2c",
        "type": "postgrestor",
        "z": "0545859087596164",
        "name": "",
        "query": "SELECT a.status_start, a.status_stop, b.type,b.ct,b.qty_perct,a.machine_name FROM machine_master a inner join\nlist_ct b on a.id_type=b.id_type where machine_no='{{msg.payload}}';",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 322.9999542236328,
        "y": 1281.9998302459717,
        "wires": [
            [
                "dd28b090188d5bf1",
                "f5b77027cd5dd820",
                "d83d746cb2c60cc9",
                "7ca9dec4a24aea37"
            ]
        ]
    },
    {
        "id": "13b054916a6a34a2",
        "type": "link in",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "0ddb0f37743760ea"
        ],
        "x": 147.9999542236328,
        "y": 1281.9998302459717,
        "wires": [
            [
                "48f9357595c0ba2c"
            ]
        ]
    },
    {
        "id": "1eaa37f592133146",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machine_no_dashboard_animation",
                "pt": "global",
                "to": "payload.rows[0]['machine_no']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "495898a42d4b9ddf",
        "type": "inject",
        "z": "0545859087596164",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "id_machine_dashboard_animation",
        "payloadType": "global",
        "x": 220,
        "y": 1700,
        "wires": [
            [
                "275f5b0a5a3b90c6"
            ]
        ]
    },
    {
        "id": "28c0e8f2c9f6c549",
        "type": "link out",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "9ac7379f796a2af0",
            "cc28c6f13d541268",
            "d99c5d5fc8459f98",
            "33c98c32074b5fc3",
            "9b3f66ba065ee0bf",
            "79fadb4f665af361",
            "d200d2f8a1148a91",
            "543ca79908afc73d",
            "db4bdc5111bd9102",
            "c13b754745601b47"
        ],
        "x": 835,
        "y": 1700,
        "wires": []
    },
    {
        "id": "e2537902ecdee282",
        "type": "comment",
        "z": "0545859087596164",
        "name": "Refresh tiap 5 detik",
        "info": "",
        "x": 208.00005340576172,
        "y": 1656.0001759529114,
        "wires": []
    },
    {
        "id": "dd28b090188d5bf1",
        "type": "switch",
        "z": "0545859087596164",
        "name": "Jika start ON",
        "property": "payload.rows[0]['status_start']",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 542.9999542236328,
        "y": 1281.9998302459717,
        "wires": [
            [
                "2ca34fd0ccf71f51"
            ],
            [
                "296afee006d0e694"
            ]
        ]
    },
    {
        "id": "296afee006d0e694",
        "type": "change",
        "z": "0545859087596164",
        "name": "OFF",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "OFF",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 1340,
        "wires": [
            [
                "e1637616f724c4c6",
                "cf2da7acf9bdb2cc"
            ]
        ]
    },
    {
        "id": "2ca34fd0ccf71f51",
        "type": "switch",
        "z": "0545859087596164",
        "name": "Jika Trouble",
        "property": "payload.rows[0]['status_stop']",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 742.9999542236328,
        "y": 1261.9998302459717,
        "wires": [
            [
                "a8c44595c76d0efe"
            ],
            [
                "986220341181f882"
            ]
        ]
    },
    {
        "id": "a8c44595c76d0efe",
        "type": "change",
        "z": "0545859087596164",
        "name": "STOP",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "STOP",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 882.9999542236328,
        "y": 1201.9998302459717,
        "wires": [
            [
                "e1637616f724c4c6",
                "cf2da7acf9bdb2cc"
            ]
        ]
    },
    {
        "id": "986220341181f882",
        "type": "change",
        "z": "0545859087596164",
        "name": "ON",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "ON",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 882.9999542236328,
        "y": 1281.9998302459717,
        "wires": [
            [
                "e1637616f724c4c6",
                "cf2da7acf9bdb2cc"
            ]
        ]
    },
    {
        "id": "c24f51e0472ea172",
        "type": "inject",
        "z": "0545859087596164",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 880,
        "y": 1140,
        "wires": [
            [
                "e1637616f724c4c6",
                "f5b77027cd5dd820",
                "3bc99f0fdba5a232"
            ]
        ]
    },
    {
        "id": "9ac7379f796a2af0",
        "type": "link in",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "28c0e8f2c9f6c549"
        ],
        "x": 141.00001525878906,
        "y": 1846.9999980926514,
        "wires": [
            [
                "e3871bd564a493c1"
            ]
        ]
    },
    {
        "id": "e3871bd564a493c1",
        "type": "postgrestor",
        "z": "0545859087596164",
        "name": "category stop time",
        "query": "SELECT category FROM trans_stop where finish is null and id_machine={{msg.payload}};",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 336.00001525878906,
        "y": 1846.9999980926514,
        "wires": [
            [
                "40220f4903a1d40c"
            ]
        ]
    },
    {
        "id": "3ee78d4525b4e4c3",
        "type": "inject",
        "z": "0545859087596164",
        "name": "Init global id_machine",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 240,
        "y": 680,
        "wires": [
            [
                "096cac4b425cdffc",
                "aba643364e048370"
            ]
        ]
    },
    {
        "id": "096cac4b425cdffc",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "id_machine_dashboard_animation",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "aba643364e048370",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machine_no_dashboard_animation",
                "pt": "global",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "0633f6ace1d00b83",
        "type": "function",
        "z": "0545859087596164",
        "name": "ambil global jam",
        "func": "var time = new Date();\nvar displaytime = time.toLocaleTimeString();\nvar hour = time.getHours();\nglobal.set('jam',hour);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 538,
        "y": 1020.0000066757202,
        "wires": [
            [
                "7822a9cadfc77c7b"
            ]
        ]
    },
    {
        "id": "837c2434e975c1c8",
        "type": "comment",
        "z": "0545859087596164",
        "name": "Untuk mengambil tgl1 dan tgl2",
        "info": "",
        "x": 580,
        "y": 980,
        "wires": []
    },
    {
        "id": "7822a9cadfc77c7b",
        "type": "switch",
        "z": "0545859087596164",
        "name": "Menentukan tanggal",
        "property": "jam",
        "propertyType": "global",
        "rules": [
            {
                "t": "lte",
                "v": "6",
                "vt": "num"
            },
            {
                "t": "gte",
                "v": "7",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 758,
        "y": 1020.0000066757202,
        "wires": [
            [
                "45841de3fc972783"
            ],
            [
                "ba346953aff0bb65"
            ]
        ]
    },
    {
        "id": "6464c19204844dbf",
        "type": "moment",
        "z": "0545859087596164",
        "name": "today",
        "topic": "",
        "input": "today",
        "inputType": "global",
        "inTz": "Asia/Jakarta",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "today",
        "outputType": "global",
        "outTz": "Asia/Jakarta",
        "x": 648,
        "y": 1080.0000066757202,
        "wires": [
            []
        ]
    },
    {
        "id": "b74550631e7beab3",
        "type": "moment",
        "z": "0545859087596164",
        "name": "yesterday",
        "topic": "",
        "input": "today",
        "inputType": "global",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "days",
        "adjDir": "subtract",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "yesterday",
        "outputType": "global",
        "outTz": "Asia/Jakarta",
        "x": 658,
        "y": 1120.0000066757202,
        "wires": [
            []
        ]
    },
    {
        "id": "913403500ad7a05e",
        "type": "moment",
        "z": "0545859087596164",
        "name": "tomorrow",
        "topic": "",
        "input": "today",
        "inputType": "global",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "tomorrow",
        "outputType": "global",
        "outTz": "Asia/Jakarta",
        "x": 658,
        "y": 1160.0000066757202,
        "wires": [
            []
        ]
    },
    {
        "id": "45841de3fc972783",
        "type": "change",
        "z": "0545859087596164",
        "name": "Kurang dari jam 6",
        "rules": [
            {
                "t": "set",
                "p": "tgl1_dashboard_animation",
                "pt": "global",
                "to": "yesterday",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "tgl2_dashboard_animation",
                "pt": "global",
                "to": "today",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 990,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "ba346953aff0bb65",
        "type": "change",
        "z": "0545859087596164",
        "name": "lebih dari jam 6",
        "rules": [
            {
                "t": "set",
                "p": "tgl1_dashboard_animation",
                "pt": "global",
                "to": "today",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "tgl2_dashboard_animation",
                "pt": "global",
                "to": "tomorrow",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "cc28c6f13d541268",
        "type": "link in",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "28c0e8f2c9f6c549"
        ],
        "x": 138.00003814697266,
        "y": 1917.0000972747803,
        "wires": [
            [
                "a8040a39e25dbcfe"
            ]
        ]
    },
    {
        "id": "a8040a39e25dbcfe",
        "type": "postgrestor",
        "z": "0545859087596164",
        "name": "loading time",
        "query": "SELECT COALESCE(SUM(extract(epoch from coalesce(finish, NOW())-start)),0) as detik FROM trans_operation \nwhere id_machine={{msg.payload}} and start between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}';",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 323.00006103515625,
        "y": 1925.0001678466797,
        "wires": [
            [
                "14b80efeb2a20aa9",
                "9d3cd6b90cc234d3"
            ]
        ]
    },
    {
        "id": "7476d99f2a0a3d2c",
        "type": "inject",
        "z": "0545859087596164",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 363.00003814697266,
        "y": 1757.0000972747803,
        "wires": [
            [
                "40220f4903a1d40c",
                "8a58d92b9103fa59"
            ]
        ]
    },
    {
        "id": "275f5b0a5a3b90c6",
        "type": "change",
        "z": "0545859087596164",
        "name": "Ubah tanggal di payload",
        "rules": [
            {
                "t": "set",
                "p": "tgl1",
                "pt": "msg",
                "to": "tgl1_dashboard_animation",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "tgl2",
                "pt": "msg",
                "to": "tgl2_dashboard_animation",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "jam",
                "pt": "msg",
                "to": "jam_awal_kerja",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 1700,
        "wires": [
            [
                "84787d6964a58ef9"
            ]
        ]
    },
    {
        "id": "9d3cd6b90cc234d3",
        "type": "function",
        "z": "0545859087596164",
        "name": "ubah format time",
        "func": "// Time HH:MM:SS from number\n\n// Hours\nvar detik = msg.payload.rows[0]['detik'];\nvar Hours = (detik/3600);\nHours = Math.floor(Hours);\n\n// Minutes\nvar Minutes = (detik-(Hours*3600))/60;\nMinutes = Math.floor(Minutes);\n\n// Seconds\nSeconds = Math.round(detik-(Hours*3600)-(Minutes*60));\n\n// Concatenate\nvar Time = ('0' +Hours).slice(-2)+':'+('0' +Minutes).slice(-2)+':'+('0' +Seconds).slice(-2);\n\nmsg.payload = Time;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 558.0000648498535,
        "y": 1926.0000925064087,
        "wires": [
            [
                "8a58d92b9103fa59"
            ]
        ]
    },
    {
        "id": "14b80efeb2a20aa9",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "loading_time_dashboard_animation",
                "pt": "global",
                "to": "payload.rows[0]['detik']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 643.0000381469727,
        "y": 1977.0000972747803,
        "wires": [
            []
        ]
    },
    {
        "id": "8569fd1eb2a104de",
        "type": "comment",
        "z": "0545859087596164",
        "name": "Mengambil data time",
        "info": "",
        "x": 218.00006484985352,
        "y": 1806.0000925064087,
        "wires": []
    },
    {
        "id": "d99c5d5fc8459f98",
        "type": "link in",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "28c0e8f2c9f6c549"
        ],
        "x": 138.00003814697266,
        "y": 2017.0000972747803,
        "wires": [
            [
                "7673be64dfa3e569"
            ]
        ]
    },
    {
        "id": "7673be64dfa3e569",
        "type": "postgrestor",
        "z": "0545859087596164",
        "name": "stop time",
        "query": "SELECT COALESCE(SUM(extract(epoch from coalesce(finish, NOW())-start)),0) as detik FROM trans_stop \nwhere id_machine={{msg.payload}} and start between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}';",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 303.00003814697266,
        "y": 2017.0000972747803,
        "wires": [
            [
                "c3b251fcdc7d8863"
            ]
        ]
    },
    {
        "id": "c3b251fcdc7d8863",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "stop_time_dashboard_animation",
                "pt": "global",
                "to": "payload.rows[0]['detik']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 633.0000381469727,
        "y": 2017.0000972747803,
        "wires": [
            []
        ]
    },
    {
        "id": "33c98c32074b5fc3",
        "type": "link in",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "28c0e8f2c9f6c549"
        ],
        "x": 138.00003814697266,
        "y": 2057.0000972747803,
        "wires": [
            [
                "4ec8dee6c5424146"
            ]
        ]
    },
    {
        "id": "4ec8dee6c5424146",
        "type": "postgrestor",
        "z": "0545859087596164",
        "name": "output time",
        "query": "select COALESCE(sum((ct/qty_perct)*qty),0) as detik\nfrom trans_output  where id_machine={{msg.payload}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 313.00003814697266,
        "y": 2057.0000972747803,
        "wires": [
            [
                "7b698622d5da7b89"
            ]
        ]
    },
    {
        "id": "7b698622d5da7b89",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "output_time_dashboard_animation",
                "pt": "global",
                "to": "payload.rows[0]['detik']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 633.0000381469727,
        "y": 2057.0000972747803,
        "wires": [
            []
        ]
    },
    {
        "id": "9b3f66ba065ee0bf",
        "type": "link in",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "28c0e8f2c9f6c549"
        ],
        "x": 138.00003814697266,
        "y": 2097.0000972747803,
        "wires": [
            [
                "8d6599c81cb5fe07"
            ]
        ]
    },
    {
        "id": "8d6599c81cb5fe07",
        "type": "postgrestor",
        "z": "0545859087596164",
        "name": "quality_loss",
        "query": "select COALESCE(sum((ct/qty_perct)*qty),0) as detik\nfrom trans_ng where id_machine={{msg.payload}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 313.00003814697266,
        "y": 2097.0000972747803,
        "wires": [
            [
                "6446b60e645bbc9f"
            ]
        ]
    },
    {
        "id": "6446b60e645bbc9f",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "defect_time_dashboard_animation",
                "pt": "global",
                "to": "payload.rows[0]['detik']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 633.0000381469727,
        "y": 2097.0000972747803,
        "wires": [
            []
        ]
    },
    {
        "id": "eb255fc2dc89965e",
        "type": "ui_text",
        "z": "0545859087596164",
        "group": "3b6b43cc.f3e76c",
        "order": 2,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Operation Time: ",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "x": 657.9999542236328,
        "y": 2517.0000190734863,
        "wires": []
    },
    {
        "id": "38e013717f812760",
        "type": "function",
        "z": "0545859087596164",
        "name": "",
        "func": "var loading = global.get('loading_time_dashboard_animation');\nvar stop = global.get('stop_time_dashboard_animation');\nvar operation = loading-stop;\n\nvar otr = (operation / loading)*100;\nmsg.payload = otr.toFixed(2);\nmsg.operation = operation;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 2580,
        "wires": [
            [
                "d9f228a725effee8",
                "da9bcf43adfc72f1"
            ]
        ]
    },
    {
        "id": "da9bcf43adfc72f1",
        "type": "function",
        "z": "0545859087596164",
        "name": "",
        "func": "// Time HH:MM:SS from number\n\n// Hours\nvar detik = msg.operation;\nvar Hours = (detik/3600);\nHours = Math.floor(Hours);\n\n// Minutes\nvar Minutes = (detik-(Hours*3600))/60;\nMinutes = Math.floor(Minutes);\n\n// Seconds\nSeconds = Math.round(detik-(Hours*3600)-(Minutes*60));\n\n// Concatenate\nvar Time = ('0' +Hours).slice(-2)+':'+('0' +Minutes).slice(-2)+':'+('0' +Seconds).slice(-2);\n\nmsg.payload = Time;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 477.9999542236328,
        "y": 2517.0000190734863,
        "wires": [
            [
                "eb255fc2dc89965e"
            ]
        ]
    },
    {
        "id": "d200d2f8a1148a91",
        "type": "link in",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "28c0e8f2c9f6c549"
        ],
        "x": 151.99996185302734,
        "y": 2715.000184059143,
        "wires": [
            [
                "05f6a8f18abcbf79"
            ]
        ]
    },
    {
        "id": "05f6a8f18abcbf79",
        "type": "function",
        "z": "0545859087596164",
        "name": "",
        "func": "var loading = global.get('loading_time_dashboard_animation');\nvar stop = global.get('stop_time_dashboard_animation');\nvar output_time = global.get('output_time_dashboard_animation');\nvar operation = loading-stop;\n\nvar per = (output_time / operation)*100;\nmsg.payload = per.toFixed(2);\nmsg.output_time = output_time;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 326.99996185302734,
        "y": 2715.000184059143,
        "wires": [
            [
                "afe7193341106256",
                "633010f46307532c"
            ]
        ]
    },
    {
        "id": "afe7193341106256",
        "type": "function",
        "z": "0545859087596164",
        "name": "",
        "func": "// Time HH:MM:SS from number\n\n// Hours\nvar detik = msg.output_time;\nvar Hours = (detik/3600);\nHours = Math.floor(Hours);\n\n// Minutes\nvar Minutes = (detik-(Hours*3600))/60;\nMinutes = Math.floor(Minutes);\n\n// Seconds\nSeconds = (detik-(Hours*3600)-(Minutes*60));\n\n// Concatenate\nvar Time = ('0' +Hours).slice(-2)+':'+('0' +Minutes).slice(-2)+':'+('0' +Seconds).slice(-2);\n\nmsg.payload = Time;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 477.9999542236328,
        "y": 2657.0000190734863,
        "wires": [
            [
                "2ba1288bb2454fbb"
            ]
        ]
    },
    {
        "id": "bd56172243a8c98b",
        "type": "inject",
        "z": "0545859087596164",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 477.9999542236328,
        "y": 2477.0000190734863,
        "wires": [
            [
                "eb255fc2dc89965e",
                "d9f228a725effee8"
            ]
        ]
    },
    {
        "id": "2ba1288bb2454fbb",
        "type": "ui_text",
        "z": "0545859087596164",
        "group": "e50eb3d3.527a9",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Performance Time: ",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "x": 667.9999542236328,
        "y": 2657.0000190734863,
        "wires": []
    },
    {
        "id": "633010f46307532c",
        "type": "ui_gauge",
        "z": "0545859087596164",
        "name": "",
        "group": "e50eb3d3.527a9",
        "order": 1,
        "width": "6",
        "height": "5",
        "gtype": "gage",
        "title": "Performance (%)",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#00b500"
        ],
        "seg1": "70",
        "seg2": "80",
        "x": 667.9999542236328,
        "y": 2717.0000190734863,
        "wires": []
    },
    {
        "id": "543ca79908afc73d",
        "type": "link in",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "28c0e8f2c9f6c549"
        ],
        "x": 152.99998474121094,
        "y": 2871.9999408721924,
        "wires": [
            [
                "b85f843c34839372"
            ]
        ]
    },
    {
        "id": "b85f843c34839372",
        "type": "function",
        "z": "0545859087596164",
        "name": "",
        "func": "var defect_time = global.get('defect_time_dashboard_animation');\nvar output_time = global.get('output_time_dashboard_animation');\n\nvar qr = ((output_time-defect_time) / output_time)*100;\nmsg.payload = qr.toFixed(2);\nmsg.quality_time = (output_time-defect_time);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 327.99998474121094,
        "y": 2871.9999408721924,
        "wires": [
            [
                "5e96eaa4b98dd1c4",
                "2ea63e2931ce04bb"
            ]
        ]
    },
    {
        "id": "5e96eaa4b98dd1c4",
        "type": "function",
        "z": "0545859087596164",
        "name": "",
        "func": "// Time HH:MM:SS from number\n\n// Hours\nvar detik = msg.quality_time;\nvar Hours = (detik/3600);\nHours = Math.floor(Hours);\n\n// Minutes\nvar Minutes = (detik-(Hours*3600))/60;\nMinutes = Math.floor(Minutes);\n\n// Seconds\nSeconds = (detik-(Hours*3600)-(Minutes*60));\n\n// Concatenate\nvar Time = ('0' +Hours).slice(-2)+':'+('0' +Minutes).slice(-2)+':'+('0' +Seconds).slice(-2);\n\nmsg.payload = Time;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 478.9999771118164,
        "y": 2813.9997758865356,
        "wires": [
            [
                "015fce8137061edb"
            ]
        ]
    },
    {
        "id": "015fce8137061edb",
        "type": "ui_text",
        "z": "0545859087596164",
        "group": "af38459f.688558",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "QualityTime: ",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "x": 648.9999771118164,
        "y": 2813.9997758865356,
        "wires": []
    },
    {
        "id": "2ea63e2931ce04bb",
        "type": "ui_gauge",
        "z": "0545859087596164",
        "name": "",
        "group": "af38459f.688558",
        "order": 1,
        "width": "6",
        "height": "5",
        "gtype": "gage",
        "title": "Quality (%)",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#00b500"
        ],
        "seg1": "70",
        "seg2": "80",
        "x": 648.9999771118164,
        "y": 2873.9997758865356,
        "wires": []
    },
    {
        "id": "db4bdc5111bd9102",
        "type": "link in",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "28c0e8f2c9f6c549"
        ],
        "x": 155,
        "y": 3000,
        "wires": [
            [
                "5298c40190578109"
            ]
        ]
    },
    {
        "id": "5298c40190578109",
        "type": "function",
        "z": "0545859087596164",
        "name": "",
        "func": "var loading = global.get('loading_time_dashboard_animation');\nvar stop = global.get('stop_time_dashboard_animation');\nvar defect_time = global.get('defect_time_dashboard_animation');\nvar output_time = global.get('output_time_dashboard_animation');\n\n\nvar oee = ((output_time-defect_time) / loading)*100;\nmsg.payload = oee.toFixed(2);\nmsg.oee_time = (output_time-defect_time);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 3000,
        "wires": [
            [
                "c401e32a3675a84f",
                "6105bb641be74c83"
            ]
        ]
    },
    {
        "id": "c401e32a3675a84f",
        "type": "function",
        "z": "0545859087596164",
        "name": "",
        "func": "// Time HH:MM:SS from number\n\n// Hours\nvar detik = msg.oee_time;\nvar Hours = (detik/3600);\nHours = Math.floor(Hours);\n\n// Minutes\nvar Minutes = (detik-(Hours*3600))/60;\nMinutes = Math.floor(Minutes);\n\n// Seconds\nSeconds = (detik-(Hours*3600)-(Minutes*60));\n\n// Concatenate\nvar Time = ('0' +Hours).slice(-2)+':'+('0' +Minutes).slice(-2)+':'+('0' +Seconds).slice(-2);\n\nmsg.payload = Time;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 478.9999771118164,
        "y": 2953.9997758865356,
        "wires": [
            [
                "fb393fe2348e3180"
            ]
        ]
    },
    {
        "id": "fb393fe2348e3180",
        "type": "ui_text",
        "z": "0545859087596164",
        "group": "ee767c85.93df2",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "OEE Time: ",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "x": 648.9999771118164,
        "y": 2953.9997758865356,
        "wires": []
    },
    {
        "id": "6105bb641be74c83",
        "type": "ui_gauge",
        "z": "0545859087596164",
        "name": "",
        "group": "ee767c85.93df2",
        "order": 1,
        "width": 0,
        "height": 0,
        "gtype": "donut",
        "title": "OEE(%)",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#00b500"
        ],
        "seg1": "70",
        "seg2": "80",
        "x": 640,
        "y": 3000,
        "wires": []
    },
    {
        "id": "ad22bbdcc45f9fc6",
        "type": "inject",
        "z": "0545859087596164",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 477.9999542236328,
        "y": 2617.0000190734863,
        "wires": [
            [
                "2ba1288bb2454fbb",
                "633010f46307532c"
            ]
        ]
    },
    {
        "id": "d0dccf45710a9ca9",
        "type": "inject",
        "z": "0545859087596164",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 477.9999542236328,
        "y": 2777.0000190734863,
        "wires": [
            [
                "015fce8137061edb",
                "2ea63e2931ce04bb"
            ]
        ]
    },
    {
        "id": "81b64ac331e8adb5",
        "type": "inject",
        "z": "0545859087596164",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 477.9999542236328,
        "y": 2917.0000190734863,
        "wires": [
            [
                "fb393fe2348e3180",
                "6105bb641be74c83"
            ]
        ]
    },
    {
        "id": "d9f295c787d5d421",
        "type": "comment",
        "z": "0545859087596164",
        "name": "Reset saat awal semua waktu",
        "info": "",
        "x": 240,
        "y": 1480,
        "wires": []
    },
    {
        "id": "3bb78fe779a359d7",
        "type": "inject",
        "z": "0545859087596164",
        "name": "Init global id_machine",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 239.8958282470703,
        "y": 1527.111083984375,
        "wires": [
            [
                "e5207229db7c587f",
                "f96b40befe928ce2",
                "5fcf0e3b267631eb",
                "c023fb4f6a31cbcb",
                "452791495680495e",
                "d636ba1fc0c10519"
            ]
        ]
    },
    {
        "id": "e5207229db7c587f",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "loading_time_dashboard_animation",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 1480,
        "wires": [
            []
        ]
    },
    {
        "id": "f96b40befe928ce2",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "stop_time_dashboard_animation",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 1520,
        "wires": [
            []
        ]
    },
    {
        "id": "5fcf0e3b267631eb",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "output_time_dashboard_animation",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 1560,
        "wires": [
            []
        ]
    },
    {
        "id": "c023fb4f6a31cbcb",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "defect_time_dashboard_animation",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 1600,
        "wires": [
            []
        ]
    },
    {
        "id": "84dee176e357e1f5",
        "type": "postgrestor",
        "z": "0545859087596164",
        "name": "Ambil machine_name",
        "query": "SELECT machine_name FROM machine_master order by machine_name;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 460,
        "y": 320,
        "wires": [
            [
                "93da7fd66a73a826"
            ]
        ]
    },
    {
        "id": "93da7fd66a73a826",
        "type": "function",
        "z": "0545859087596164",
        "name": "create array",
        "func": "\nvar i;\nlist_machine = [];\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  list_machine.push({\"machine\":msg.payload.rows[i]['machine_name']});\n}\n\nmsg.payload = list_machine;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 360,
        "wires": [
            [
                "e3ea5b3e83fda5b5"
            ]
        ]
    },
    {
        "id": "e3ea5b3e83fda5b5",
        "type": "function",
        "z": "0545859087596164",
        "name": "format array of objects for dropdown in dashboard",
        "func": "//Reformat array to work with dashboard\nvar reformattedArray = msg.payload.map(obj =>{\n    //declare the reformatted object\n    var rObj = {};\n    //format it for drop down\n    //\"label\":\"value\" is the format so lets move the value to the label and add some txt as well\n    //you can also replce the txt with a var if you want\n    rObj[obj.machine] = obj.machine;\n    return rObj;\n});\nmsg.payload =  reformattedArray;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 360,
        "wires": [
            [
                "a71235b1cad1198a"
            ]
        ]
    },
    {
        "id": "a71235b1cad1198a",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 400,
        "wires": [
            [
                "8ebe41d0d19c58c5"
            ]
        ]
    },
    {
        "id": "79385de0c9ac2664",
        "type": "inject",
        "z": "0545859087596164",
        "name": "Current Time",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 1120,
        "wires": [
            [
                "0633f6ace1d00b83",
                "620b9200c4124a97"
            ]
        ]
    },
    {
        "id": "620b9200c4124a97",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "today",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 1020,
        "wires": [
            [
                "6464c19204844dbf",
                "b74550631e7beab3",
                "913403500ad7a05e"
            ]
        ]
    },
    {
        "id": "8e162154778c79d8",
        "type": "comment",
        "z": "0545859087596164",
        "name": "Refresh tiap 1 detik",
        "info": "",
        "x": 190,
        "y": 1080,
        "wires": []
    },
    {
        "id": "452791495680495e",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "id_machine_dashboard_animation",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "machine_no_dashboard_animation",
                "pt": "global",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 1440,
        "wires": [
            []
        ]
    },
    {
        "id": "84787d6964a58ef9",
        "type": "switch",
        "z": "0545859087596164",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 1700,
        "wires": [
            [
                "28c0e8f2c9f6c549"
            ]
        ]
    },
    {
        "id": "c920999be2858c8c",
        "type": "ui_svg_graphics",
        "z": "0545859087596164",
        "group": "2fa4a902.2321c6",
        "order": 0,
        "width": "12",
        "height": "7",
        "svgString": "<svg xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\" xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:rexsvg=\"http://www.rexcontrols.com/rexsvg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"100%\" height=\"100%\" viewBox=\"582.9599609375 2 8473 5732\" version=\"1.1\" id=\"svg136\" sodipodi:docname=\"Machine_2.svg\" inkscape:version=\"1.1.1 (3bf5ae0d25, 2021-09-20)\" preserveAspectRatio=\"xMidYMid meet\">\n  <rect id=\"svgEditorBackground\" x=\"0\" y=\"0\" width=\"9365.625\" height=\"5718.75\" style=\"fill:none;stroke:none;\" />\n  <defs id=\"defs140\">\n    <path id=\"SVGID_1_-1\" d=\"m 10.248,56.151 c 0,-25.375 20.571,-45.945 45.945,-45.945 25.376,0 45.945,20.57 45.945,45.945 0,25.376 -20.568,45.947 -45.945,45.947 -25.374,0 -45.945,-20.571 -45.945,-45.947 M 52.829,0 C 24.171,1.691 1.281,24.837 0,53.603 v 5.096 c 1.331,29.885 25.98,53.702 56.193,53.702 31.067,0 56.25,-25.184 56.25,-56.25 C 112.443,26.216 89.055,1.741 59.556,0 Z\" />\n    <rect id=\"SVGID_4_\" width=\"112.5\" height=\"112.5\" x=\"0\" y=\"0\" />\n    <linearGradient id=\"SVGID_1_\" gradientUnits=\"userSpaceOnUse\" x1=\"0\" y1=\"56.25\" x2=\"94.593803\" y2=\"56.25\" gradientTransform=\"matrix(6.1953192,0,0,5.5968402,4216.3852,3751.718)\">\n      <stop offset=\"0\" style=\"stop-color:#383838\" id=\"stop331\" />\n      <stop offset=\"0.5\" style=\"stop-color:#ECECEC\" id=\"stop333\" />\n      <stop offset=\"0.57\" style=\"stop-color:#D9D9D9\" id=\"stop335\" />\n      <stop offset=\"0.71\" style=\"stop-color:#A8A8A8\" id=\"stop337\" />\n      <stop offset=\"0.92\" style=\"stop-color:#5A5A5A\" id=\"stop339\" />\n      <stop offset=\"1\" style=\"stop-color:#383838\" id=\"stop341\" />\n    </linearGradient>\n    <linearGradient id=\"SVGID_2_\" gradientUnits=\"userSpaceOnUse\" x1=\"22.9727\" y1=\"19.144501\" x2=\"71.507797\" y2=\"19.144501\" gradientTransform=\"matrix(6.1953192,0,0,5.5968402,4216.3852,3751.718)\">\n      <stop offset=\"0\" style=\"stop-color:#383838\" id=\"stop346\" />\n      <stop offset=\"0.5\" style=\"stop-color:#ECECEC\" id=\"stop348\" />\n      <stop offset=\"0.57\" style=\"stop-color:#D9D9D9\" id=\"stop350\" />\n      <stop offset=\"0.71\" style=\"stop-color:#A8A8A8\" id=\"stop352\" />\n      <stop offset=\"0.92\" style=\"stop-color:#5A5A5A\" id=\"stop354\" />\n      <stop offset=\"1\" style=\"stop-color:#383838\" id=\"stop356\" />\n    </linearGradient>\n    <radialGradient id=\"SVGID_3_\" cx=\"47.296902\" cy=\"47.241199\" r=\"34.0378\" gradientTransform=\"matrix(-2.7080601e-7,-5.5968402,7.434383,-2.9357481e-7,4158.195,4280.8326)\" gradientUnits=\"userSpaceOnUse\">\n      <stop offset=\"0\" style=\"stop-color:#ECECEC\" id=\"stop361\" />\n      <stop offset=\"0.14\" style=\"stop-color:#DDDDDD\" id=\"stop363\" />\n      <stop offset=\"0.4\" style=\"stop-color:#B8B8B8\" id=\"stop365\" />\n      <stop offset=\"0.75\" style=\"stop-color:#7C7C7C\" id=\"stop367\" />\n      <stop offset=\"1\" style=\"stop-color:#4D4D4D\" id=\"stop369\" />\n    </radialGradient>\n  </defs>\n  <sodipodi:namedview id=\"namedview138\" pagecolor=\"#ffffff\" bordercolor=\"#666666\" borderopacity=\"1.0\" inkscape:pageshadow=\"2\" inkscape:pageopacity=\"0.0\" inkscape:pagecheckerboard=\"0\" showgrid=\"false\" inkscape:zoom=\"3.0935922\" inkscape:cx=\"359.6143\" inkscape:cy=\"281.71134\" inkscape:window-width=\"1366\" inkscape:window-height=\"745\" inkscape:window-x=\"-8\" inkscape:window-y=\"-8\" inkscape:window-maximized=\"1\" inkscape:current-layer=\"svg136\" objecttolerance=\"1\" guidetolerance=\"1\" gridtolerance=\"1\" width=\"600px\">\n    <inkscape:grid type=\"xygrid\" id=\"grid1399\" empspacing=\"5\" spacingx=\"7.8046875\" snapvisiblegridlinesonly=\"false\" spacingy=\"7.1484375\" />\n  </sodipodi:namedview>\n  <g id=\"g209\" transform=\"matrix(6.9636536,0,0,5.1594801,1049.3147,925.24791)\">\n    <path style=\"fill:#cccccc;stroke:#4c4c4c;stroke-width:2\" d=\"m 583,207 h 156 v 42 H 583 Z\" id=\"path2\" />\n    <path style=\"fill:#669999;stroke:#4c4c4c;stroke-width:2\" d=\"m 42,811 h 914 v 82 H 42 Z\" id=\"path4\" />\n    <path style=\"fill:#003333;stroke:#4c4c4c;stroke-width:2\" d=\"M 20,915 H 978 V 893 H 20 Z\" id=\"path6\" />\n    <path style=\"fill:#e5e5e5\" d=\"M 42,811 0,683 20,249 h 958 l 21,434 -43,128 z\" id=\"path8\" />\n    <path style=\"fill:#e0e0e0\" d=\"M 42,811 0,683 9,467 982,357 999,683 956,811 Z\" id=\"path10\" />\n    <path style=\"fill:#dbdbdb\" d=\"M 42,811 0,683 5,575 989,467 999,683 956,811 Z\" id=\"path12\" />\n    <path style=\"fill:#d6d6d6\" d=\"M 42,811 0,683 993,575 l 6,108 -43,128 z\" id=\"path14\" />\n    <path style=\"fill:none;stroke:#4c4c4c;stroke-width:2\" d=\"M 42,811 0,683 20,249 h 958 l 21,434 -43,128 H 42\" id=\"path16\" />\n    <path style=\"fill:#336666\" d=\"M 249,249 H 749 V 665 H 249 Z\" id=\"path18\" />\n    <path style=\"fill:#cccccc;stroke:#4c4c4c;stroke-width:2\" d=\"M 311,249 H 687 V 665 H 311 Z\" id=\"path20\" />\n    <path style=\"fill:none;stroke:#4c4c4c;stroke-width:2\" d=\"M 249,249 H 749 V 665 H 249 V 249\" id=\"path22\" />\n    <path style=\"fill:#333333;stroke:#4c4c4c;stroke-width:2\" d=\"m 311,623 h 376 v 42 H 311 Z\" id=\"path24\" />\n    <path style=\"fill:#7f7f7f;stroke:#4c4c4c;stroke-width:2\" d=\"M 311,623 H 687 V 603 H 311 Z\" id=\"path26\" />\n    <path style=\"fill:#e5e5e5;stroke:#4c4c4c;stroke-width:2\" d=\"m 311,603 42,-22 h 292 l 42,22 z\" id=\"path28\" />\n    <path style=\"fill:#e5e5e5\" d=\"M 415,0 H 583 V 331 H 415 Z\" id=\"path30\" />\n    <path style=\"fill:#d9d9d9\" d=\"M 415,0 H 583 V 81 H 415 Z\" id=\"path32\" />\n    <path style=\"fill:#cccccc\" d=\"M 415,0 H 583 V 61 H 415 Z\" id=\"path34\" />\n    <path style=\"fill:#bfbfbf\" d=\"M 415,0 H 583 V 39 H 415 Z\" id=\"path36\" />\n    <path style=\"fill:#b2b2b2\" d=\"M 415,0 H 583 V 20 H 415 Z\" id=\"path38\" />\n    <path style=\"fill:#003333\" d=\"m 707,561 h 22 v 82 h -22 z\" id=\"path40\" />\n    <path style=\"fill:#003333\" d=\"m 269,561 h 22 v 82 h -22 z\" id=\"path42\" />\n    <path style=\"fill:#003333\" d=\"m 183,603 h 46 v 30 h -46 z\" id=\"path44\" />\n    <path style=\"fill:#003333\" d=\"m 125,603 h 44 v 30 h -44 z\" id=\"path46\" />\n    <path style=\"fill:#003333\" d=\"m 73,603 h 44 v 30 H 73 Z\" id=\"path48\" />\n    <path style=\"fill:#003333\" d=\"m 20,603 h 45 v 30 H 20 Z\" id=\"path50\" />\n    <path style=\"fill:#003333\" d=\"m 183,567 h 46 v 30 h -46 z\" id=\"path52\" />\n    <path style=\"fill:#003333\" d=\"m 125,567 h 44 v 30 h -44 z\" id=\"path54\" />\n    <path style=\"fill:#003333\" d=\"m 73,567 h 44 v 30 H 73 Z\" id=\"path56\" />\n    <path style=\"fill:#003333\" d=\"m 183,529 h 46 v 30 h -46 z\" id=\"path58\" />\n    <path style=\"fill:#003333\" d=\"m 125,529 h 44 v 30 h -44 z\" id=\"path60\" />\n    <path style=\"fill:#003333\" d=\"m183,493h46v28h-46Z\" id=\"path62\" />\n    <path style=\"fill:none;stroke:#ffffff;stroke-width:2\" d=\"M 603,353 V 561 H 395\" id=\"path64\" />\n    <path style=\"fill:none;stroke:#999999;stroke-width:2\" d=\"M 603,353 H 395 v 208\" id=\"path66\" />\n    <path style=\"fill:#7f7f7f\" d=\"m 457,415 v -84 h 84 v 84 z\" id=\"path68\" />\n    <path style=\"fill:#999999\" d=\"m 463,415 v -84 h 72 v 84 z\" id=\"path70\" />\n    <path style=\"fill:#b2b2b2\" d=\"m 471,415 v -84 h 56 v 84 z\" id=\"path72\" />\n    <path style=\"fill:#cccccc\" d=\"m 481,415 v -84 h 36 v 84 z\" id=\"path74\" />\n    <path style=\"fill:#e5e5e5\" d=\"m 487,415 v -84 h 24 v 84 z\" id=\"path76\" />\n    <path style=\"fill:#ffffff\" d=\"m 493,415 v -84 h 12 v 84 z\" id=\"path78\" />\n    <path style=\"fill:none;stroke:#4c4c4c;stroke-width:2\" d=\"m 457,415 v -84 h 84 v 84 h -84\" id=\"path80\" />\n    <path style=\"fill:#cccccc\" d=\"M 291,61 H 415 V 249 H 291 Z\" id=\"path82\" />\n    <path style=\"fill:#c7c7c7\" d=\"M 291,193 415,116 V 249 H 291 Z\" id=\"path84\" />\n    <path style=\"fill:#c2c2c2\" d=\"M 291,201 415,123 V 249 H 291 Z\" id=\"path86\" />\n    <path style=\"fill:#bdbdbd\" d=\"M 291,213 415,135 V 249 H 291 Z\" id=\"path88\" />\n    <path style=\"fill:#b2b2b2;stroke:#4c4c4c;stroke-width:2\" d=\"m 311,269 h 62 v 42 h -62 z\" id=\"path90\" />\n    <path style=\"fill:#b2b2b2;stroke:#4c4c4c;stroke-width:2\" d=\"m 311,311 h 42 v 52 h -42 z\" id=\"path92\" />\n    <path style=\"fill:#ffcc00\" d=\"m 457,831 h 499 v 22 H 457 Z\" id=\"path94\" />\n    <path style=\"fill:#ffcc00\" d=\"m 61,831 h 376 v 22 H 61 Z\" id=\"path96\" />\n    <path style=\"fill:#ffcc00\" d=\"m 707,269 h 22 v 20 h -22 z\" id=\"path98\" />\n    <path style=\"fill:#ffcc00\" d=\"m 425,279 h 64 v 42 h -64 z\" id=\"path100\" />\n    <path style=\"fill:#ffcc00\" d=\"m 321,341 h 32 v 22 h -32 z\" id=\"path102\" />\n    <path style=\"fill:#ffcc00\" d=\"m 229,581 h 20 v 22 h -20 z\" id=\"path104\" />\n    <path style=\"fill:#669999;stroke:#4c4c4c;stroke-width:2\" d=\"M 769,331 H 937 V 499 H 769 Z\" id=\"path106\" />\n    <path style=\"fill:#cccccc;stroke:#4c4c4c;stroke-width:2\" d=\"m 843,551 h -62 l -12,-52 h 84 z\" id=\"path108\" />\n    <path style=\"fill:#cccccc;stroke:#4c4c4c;stroke-width:2\" d=\"m 781,279 h 62 l 10,52 h -84 z\" id=\"path110\" />\n    <path style=\"fill:none;stroke:#003333;stroke-width:2\" d=\"M 61,321 H 229\" id=\"path112\" />\n    <path style=\"fill:none;stroke:#003333;stroke-width:2\" d=\"M 61,341 H 229\" id=\"path114\" />\n    <path style=\"fill:none;stroke:#003333;stroke-width:2\" d=\"M 781,499 V 331\" id=\"path116\" />\n    <path style=\"fill:#003333\" d=\"m 791,341 h 84 v 74 h -84 z\" id=\"path118\" />\n    <path style=\"fill:none;stroke:#4c4c4c;stroke-width:2\" d=\"m 791,415 v -74 h 82\" id=\"path120\" />\n    <path style=\"fill:none;stroke:#99cccc;stroke-width:2\" d=\"m 873,341 v 74 h -82\" id=\"path122\" />\n    <path style=\"fill:none;stroke:#99cccc;stroke-width:2\" d=\"M 791,435 H 925\" id=\"path124\" />\n    <path style=\"fill:none;stroke:#99cccc;stroke-width:2\" d=\"m 833,435 v 52\" id=\"path126\" />\n    <path style=\"fill:none;stroke:#99cccc;stroke-width:2\" d=\"m 895,435 v 52\" id=\"path128\" />\n    <path style=\"fill:none;stroke:#4c4c4c;stroke-width:2\" d=\"M 415,0 H 583 V 331 H 415 V 0\" id=\"path130\" />\n    <path style=\"fill:none;stroke:#4c4c4c;stroke-width:2\" d=\"M 291,61 H 415 V 249 H 291 V 61\" id=\"path132\" />\n    <path style=\"fill:#e5e5e5;stroke:#4c4c4c;stroke-width:2\" d=\"M 311,269 H 687 V 249 H 311 Z\" id=\"path134\" />\n  </g>\n  <g id=\"g536\" transform=\"matrix(7.7749578,0,0,7.2804594,3815.1511,4291.4556)\">\n    <path style=\"fill:#7f7f7f;stroke:#4c4c4c;stroke-width:2\" d=\"M 29,59 H 441 V 88 H 29 Z\" id=\"path515\" />\n    <path style=\"fill:#7f7f7f;stroke:#4c4c4c;stroke-width:2\" d=\"M 36,11 15,32 56,73 77,52 81,48 84,42 85,37 86,31 85,26 84,20 81,15 77,11 73,7 68,4 62,3 57,2 51,3 46,4 40,7 Z\" id=\"path517\" />\n    <circle style=\"fill:#b2b2b2;stroke:#4c4c4c;stroke-width:2\" cx=\"441\" cy=\"58\" r=\"29\" id=\"circle519\" />\n    <circle style=\"fill:#b2b2b2;stroke:#4c4c4c;stroke-width:2\" cx=\"29\" cy=\"58\" r=\"29\" id=\"circle521\" />\n    <path style=\"fill:#7f7f7f;stroke:#4c4c4c;stroke-width:2\" d=\"m 491,50 4,-5 3,-5 1,-5 1,-6 L 498,18 492,8 482,2 471,0 H 59 l -6,1 -5,1 -5,3 -5,3 -29,30 4,-4 5,-3 6,-1 5,-1 h 412 l 6,1 5,1 6,3 4,4 4,4 3,5 1,6 1,6 -1,7 -3,7 -5,6 -6,5 z\" id=\"path523\" />\n  </g>\n  <g transform=\"matrix(51.523247,0,0,46.509289,6311.4128,-419.65247)\" id=\"layer1-0\" inkscape:label=\"Livello 1\">\n    <rect style=\"fill:#0000ff;stroke:none;stroke-width:0.254298\" id=\"rect2991-0\" width=\"34.660416\" height=\"14.552083\" x=\"17.443602\" y=\"84.860855\" rx=\"1.8773369\" />\n    <rect inkscape:label=\"\" rexsvg:tag=\"textbox\" rx=\"3.6723204\" ry=\"3.0821497\" y=\"90.395531\" x=\"18.373404\" height=\"7.9443727\" width=\"32.815208\" id=\"alarm-77\" style=\"fill:#333333;fill-opacity:1;fill-rule:nonzero;stroke:#00ff00;stroke-width:0.522293;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" />\n    <text inkscape:label=\"\" style=\"font-size:5.42001px;font-family:Tahoma;text-align:end;text-anchor:end;fill:#00ffff;stroke-width:0.33875\" x=\"41.321472\" y=\"91.913193\" id=\"output\" transform=\"scale(0.95087635,1.0516615)\">0</text>\n    <text inkscape:label=\"\" id=\"R802_PT_P19_unit\" y=\"87.471046\" x=\"45.332966\" style=\"font-weight:bold;font-size:4.34663px;font-family:Tahoma;fill:#ffffff;stroke-width:0.271664\" transform=\"scale(0.90719051,1.1023043)\">Pcs</text>\n    <text inkscape:label=\"\" id=\"tag-08\" y=\"88.778542\" x=\"19.124393\" style=\"font-size:3.94322px;font-family:Tahoma;fill:#ffffff;stroke-width:0.246451\">Output</text>\n  </g>\n  <g transform=\"matrix(51.523247,0,0,46.509289,-263.5606,-3858.4856)\" id=\"layer1-0-6\" inkscape:label=\"Livello 1\">\n    <rect style=\"fill:#008080;stroke:none;stroke-width:0.290302\" id=\"rect2991-0-5\" width=\"45.170422\" height=\"14.552083\" x=\"17.443602\" y=\"84.860855\" rx=\"2.4465628\" />\n    <rect inkscape:label=\"\" rexsvg:tag=\"textbox\" rx=\"4.7699866\" ry=\"3.0548925\" y=\"90.430656\" x=\"18.408527\" height=\"7.8741159\" width=\"42.62376\" id=\"alarm-77-5\" style=\"fill:#333333;fill-opacity:1;fill-rule:nonzero;stroke:#00ff00;stroke-width:0.592616;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" />\n    <text inkscape:label=\"\" id=\"machine\" y=\"87.280708\" x=\"24.480843\" style=\"font-weight:bold;font-size:4.34663px;font-family:Tahoma;fill:#ffffff;stroke-width:0.271664\" transform=\"scale(0.90719051,1.1023043)\">-</text>\n    <text inkscape:label=\"\" id=\"tag-08-3\" y=\"88.778542\" x=\"19.124393\" style=\"font-size:3.94322px;font-family:Tahoma;fill:#ffffff;stroke-width:0.246451\">Machine Name</text>\n  </g>\n  <g transform=\"matrix(51.523247,0,0,46.509289,-252.74773,-3077.8245)\" id=\"layer1-0-6-8\" inkscape:label=\"Livello 1\">\n    <rect style=\"fill:#808000;stroke:none;stroke-width:0.290302\" id=\"rect2991-0-5-6\" width=\"45.170422\" height=\"14.552083\" x=\"17.443602\" y=\"84.860855\" rx=\"2.4465628\" />\n    <rect inkscape:label=\"\" rexsvg:tag=\"textbox\" rx=\"4.7699866\" ry=\"3.0548925\" y=\"90.430656\" x=\"18.408527\" height=\"7.8741159\" width=\"42.62376\" id=\"alarm-77-5-1\" style=\"fill:#333333;fill-opacity:1;fill-rule:nonzero;stroke:#00ff00;stroke-width:0.592616;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" />\n    <text inkscape:label=\"\" id=\"product\" y=\"87.280708\" x=\"24.480843\" style=\"font-weight:bold;font-size:4.34663px;font-family:Tahoma;fill:#ffffff;stroke-width:0.271664\" transform=\"scale(0.90719051,1.1023043)\">-</text>\n    <text inkscape:label=\"\" id=\"tag-08-3-3\" y=\"88.778542\" x=\"19.124393\" style=\"font-size:3.94322px;font-family:Tahoma;fill:#ffffff;stroke-width:0.246451\">Product Name</text>\n  </g>\n  <g transform=\"matrix(51.523247,0,0,46.509289,6288.3034,-3251.0214)\" id=\"layer1-0-9\" inkscape:label=\"Livello 1\">\n    <rect style=\"fill:#008000;stroke:none;stroke-width:0.254298\" id=\"rect2991-0-9\" width=\"34.660416\" height=\"14.552083\" x=\"17.443602\" y=\"84.860855\" rx=\"1.8773369\" />\n    <rect inkscape:label=\"\" rexsvg:tag=\"textbox\" rx=\"3.6723204\" ry=\"3.0821497\" y=\"90.395531\" x=\"18.373404\" height=\"7.9443727\" width=\"32.815208\" id=\"alarm-77-4\" style=\"fill:#333333;fill-opacity:1;fill-rule:nonzero;stroke:#00ff00;stroke-width:0.522293;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" />\n    <text inkscape:label=\"\" style=\"font-size:5.42001px;font-family:Tahoma;text-align:end;text-anchor:end;fill:#00ffff;stroke-width:0.33875\" x=\"41.321472\" y=\"91.913193\" id=\"ok\" transform=\"scale(0.95087635,1.0516615)\">0</text>\n    <text inkscape:label=\"\" id=\"R802_PT_P19_unit-5\" y=\"87.471046\" x=\"45.332966\" style=\"font-weight:bold;font-size:4.34663px;font-family:Tahoma;fill:#ffffff;stroke-width:0.271664\" transform=\"scale(0.90719051,1.1023043)\">Pcs</text>\n    <text inkscape:label=\"\" id=\"tag-08-7\" y=\"88.778542\" x=\"19.124393\" style=\"font-size:3.94322px;font-family:Tahoma;fill:#ffffff;stroke-width:0.246451\">OK</text>\n  </g>\n  <g transform=\"matrix(51.523247,0,0,46.509289,6288.3034,-2479.0835)\" id=\"layer1-0-9-1\" inkscape:label=\"Livello 1\">\n    <rect style=\"fill:#d40000;stroke:none;stroke-width:0.254298\" id=\"rect2991-0-9-0\" width=\"34.660416\" height=\"14.552083\" x=\"17.443602\" y=\"84.860855\" rx=\"1.8773369\" />\n    <rect inkscape:label=\"\" rexsvg:tag=\"textbox\" rx=\"3.6723204\" ry=\"3.0821497\" y=\"90.395531\" x=\"18.373404\" height=\"7.9443727\" width=\"32.815208\" id=\"alarm-77-4-0\" style=\"fill:#333333;fill-opacity:1;fill-rule:nonzero;stroke:#00ff00;stroke-width:0.522293;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\" />\n    <text inkscape:label=\"\" style=\"font-size:5.42001px;font-family:Tahoma;text-align:end;text-anchor:end;fill:#00ffff;stroke-width:0.33875\" x=\"41.321472\" y=\"91.913193\" id=\"defect\" transform=\"scale(0.95087635,1.0516615)\">0</text>\n    <text inkscape:label=\"\" id=\"R802_PT_P19_unit-5-5\" y=\"87.471046\" x=\"45.332966\" style=\"font-weight:bold;font-size:4.34663px;font-family:Tahoma;fill:#ffffff;stroke-width:0.271664\" transform=\"scale(0.90719051,1.1023043)\">Pcs</text>\n    <text inkscape:label=\"\" id=\"tag-08-7-1\" y=\"88.778542\" x=\"19.124393\" style=\"font-size:3.94322px;font-family:Tahoma;fill:#ffffff;stroke-width:0.246451\">Defect</text>\n  </g>\n  <g id=\"pulley2\">\n    <path style=\"fill:#808080;fill-rule:evenodd;stroke-width:0.442167\" d=\"m 7244.4099,4496.7575 h 11.0544 l 11.0544,0.8844 11.0544,1.3264 11.0544,1.7687 10.6122,2.6529 10.17,3.0951 10.6123,3.5373 9.7278,3.9795 9.7279,4.4216 9.7278,4.8638 9.2857,5.3058 8.8435,5.7482 8.8435,6.1902 8.4014,6.6324 7.9591,6.6324 7.517,7.5167 7.517,7.5166 7.0748,7.9589 6.6327,8.4011 6.1904,8.8432 5.7482,8.8432 5.3061,9.2854 4.864,9.7275 4.4218,9.7275 3.9796,10.1696 3.5373,10.1698 3.0953,10.6117 2.2108,10.6119 2.2109,10.6119 1.3265,11.054 0.8844,11.4961 0.4421,11.054 -0.4421,11.4961 -0.8844,11.054 -1.3265,11.054 -2.2109,11.054 -2.2108,10.6119 -3.0953,10.6119 -3.5373,10.1696 -3.9796,10.1696 -4.4218,9.7275 -4.864,9.2854 -5.3061,9.2854 -5.7482,9.2853 -6.1904,8.4011 -6.6327,8.4011 -7.0748,7.9588 -7.517,7.9589 -7.517,7.0745 -7.9591,7.0746 -8.4014,6.6324 -8.8435,6.1903 -8.8435,5.748 -9.2857,5.306 -9.7278,4.8637 -9.7279,4.4215 -9.7278,3.9795 -10.6123,3.0951 -10.17,3.0952 -10.6122,2.653 -11.0544,1.7686 -11.0544,1.3264 -11.0544,0.8843 -11.0544,0.4422 -11.4965,-0.4422 -11.0544,-0.8843 -11.0544,-1.3264 -11.0543,-1.7686 -10.6123,-2.653 -10.6122,-3.0952 -10.17,-3.0951 -10.1701,-3.9795 -9.7278,-4.4215 -9.7279,-4.8637 -9.2856,-5.306 -8.8436,-5.748 -8.4013,-6.1903 -8.4014,-6.6324 -7.959,-7.0746 -7.9592,-7.0745 -7.0749,-7.9589 -7.0748,-7.9588 -6.6326,-8.4011 -6.1904,-8.4011 -5.7483,-9.2853 -5.3062,-9.2854 -4.8638,-9.2854 -4.4218,-9.7275 -3.9796,-10.1696 -3.0952,-10.1696 -3.0953,-10.6119 -2.653,-10.6119 -1.7687,-11.054 -1.3265,-11.054 -0.8844,-11.054 v -11.4961 -11.054 l 0.8844,-11.4961 1.3265,-11.054 1.7687,-10.6119 2.653,-10.6119 3.0953,-10.6117 3.0952,-10.1698 3.9796,-10.1696 4.4218,-9.7275 4.8638,-9.7275 5.3062,-9.2854 5.7483,-8.8432 6.1904,-8.8432 6.6326,-8.4011 7.0748,-7.9589 7.0749,-7.5166 7.9592,-7.5167 7.959,-6.6324 8.4014,-6.6324 8.4013,-6.1902 8.8436,-5.7482 9.2856,-5.3058 9.7279,-4.8638 9.7278,-4.4216 10.1701,-3.9795 10.17,-3.5373 10.6122,-3.0951 10.6123,-2.6529 11.0543,-1.7687 11.0544,-1.3264 11.0544,-0.8844 z m 1.7688,206.9308 h -2.6531 l -2.6531,0.8844 -2.2108,1.3265 -2.2109,1.7686 -1.7687,2.2107 -1.3265,2.2109 -0.8844,2.6529 v 2.653 2.653 l 0.8844,2.6529 1.3265,2.2108 1.7687,2.2108 2.2109,1.7686 2.2108,0.8844 2.6531,0.8842 2.6531,0.4423 2.653,-0.4423 2.653,-0.8842 2.211,-0.8844 2.2108,-1.7686 1.7687,-2.2108 0.8844,-2.2108 0.8843,-2.6529 0.4422,-2.653 -0.4422,-2.653 -0.8843,-2.6529 -0.8844,-2.2109 -1.7687,-2.2107 -2.2108,-1.7686 -2.211,-1.3265 -2.653,-0.8844 z m -41.5646,-16.3599 4.4218,-5.3059 5.3061,-4.8637 5.3062,-3.5374 5.7482,-3.0951 5.7483,-1.7686 6.1904,-1.7687 6.1905,-0.4421 h 6.1905 l 5.7482,0.4421 6.1905,1.3265 5.3061,1.7687 5.3061,2.653 4.864,2.653 3.9795,3.5372 3.5374,3.9794 2.6531,4.4216 129.5574,-81.3574 -3.0952,-4.8637 -3.5375,-4.8638 -3.5374,-4.8637 -3.5374,-4.8638 -3.9796,-4.8638 -3.9796,-4.4215 -4.4217,-4.4217 -4.4217,-4.4216 -4.864,-4.4216 -4.4217,-3.9794 -5.3062,-3.9795 -4.8638,-3.9794 -5.3062,-3.5372 -5.3061,-3.5374 -5.306,-3.5372 -5.7484,-3.0952 -5.7482,-3.0951 -5.7483,-3.0951 -5.7483,-2.6529 -6.1905,-2.653 -5.7482,-2.653 -6.1905,-2.2107 -6.1904,-1.7687 -6.1905,-1.7686 -6.6327,-1.7686 -6.1904,-1.3265 -6.6326,-1.3265 -6.6327,-1.3265 -6.1904,-0.4421 -6.6326,-0.8844 h -6.6327 l -6.6326,-0.4421 -6.6326,0.4421 h -6.6327 l -6.6326,0.8844 -6.6326,0.4421 -6.1905,1.3265 -6.6326,0.8842 -6.1904,1.3265 -6.1906,1.7687 -6.6326,1.7686 -5.7482,2.2109 -6.1905,1.7686 -6.1904,2.653 -5.7483,2.6529 -5.7483,2.653 -5.7483,2.653 -5.306,3.0951 -5.7484,3.0951 -5.3061,3.5373 -5.3061,3.5372 -4.8639,3.5373 -4.864,3.9795 -4.8638,3.9793 -4.864,3.9795 -4.4217,4.4217 -4.4218,4.4215 -4.4218,4.4216 -3.9796,4.8637 -3.9795,4.8638 -3.5374,4.8637 -3.9796,4.8638 -3.0952,4.8637 -3.5374,5.306 z m 90.646,16.3599 1.3266,5.7481 0.4422,5.7481 v 5.3059 l -0.4422,5.3059 -0.8844,5.306 -1.3266,4.8637 -1.7686,4.8638 -2.2109,4.4216 -3.0952,3.9794 -3.5374,3.9795 -3.5374,3.5372 -4.4218,3.0952 -4.4218,2.6528 -5.306,2.2109 -5.3062,2.2108 -6.1904,1.3265 v 150.3343 l 6.1904,-0.4421 5.7483,-0.4422 6.1905,-0.4422 5.7482,-0.8843 6.1905,-1.3264 5.7483,-0.8844 6.1905,-1.7686 5.7482,-1.3265 6.1905,-1.7686 5.7482,-2.2108 6.1906,-2.2108 5.7482,-2.2108 5.7483,-2.653 5.7482,-2.653 5.7484,-2.6529 5.306,-3.0951 5.7483,-3.0951 5.3061,-3.5373 5.3061,-3.5373 5.3062,-3.9794 5.306,-3.5373 4.864,-4.4216 4.8639,-3.9795 4.864,-4.4215 4.8638,-4.4216 4.4218,-4.8638 4.4218,-4.8637 3.9796,-5.306 3.9795,-4.8638 3.9796,-5.3059 3.5374,-5.7481 3.5374,-5.748 3.5374,-5.7481 3.0952,-6.1903 2.6531,-6.1902 2.6531,-5.748 2.2108,-6.1903 2.2109,-6.6323 2.2109,-6.1903 1.7687,-6.1902 1.3266,-6.1903 1.7686,-6.6324 0.8844,-6.1902 0.8844,-6.1903 0.8842,-6.6323 0.4422,-6.1903 0.4422,-6.1902 v -6.6324 -6.1903 l -0.4422,-6.1902 -0.4422,-6.1903 -0.4422,-6.1902 -0.8842,-6.1903 -0.8844,-6.1902 -1.3266,-6.1903 -1.3264,-5.748 -1.7688,-6.1902 -1.7686,-5.7481 -1.7688,-6.1903 -2.2108,-5.748 -2.2109,-5.306 -2.6531,-5.748 -2.653,-5.7481 -2.6531,-5.3059 z m -59.2515,64.5554 -5.3061,-1.7687 -4.8639,-2.2107 -4.864,-2.653 -4.4217,-2.653 -3.9796,-3.5373 -3.9796,-3.5372 -3.5374,-3.9795 -2.653,-3.9794 -2.653,-4.4216 -2.211,-4.8638 -1.7686,-4.8637 -0.8844,-4.8638 -0.4422,-5.306 v -5.3058 l 0.8844,-5.3059 1.7686,-5.306 -132.2103,-83.126 -2.6531,5.3059 -2.6531,5.306 -2.653,5.748 -2.2109,5.306 -2.2109,5.748 -1.7687,6.1902 -1.7687,5.7481 -1.7687,6.1903 -1.3266,5.748 -0.8842,6.1902 -1.3266,6.1903 -0.4422,6.1902 -0.8844,6.6324 -0.4421,6.1903 v 6.6323 6.1903 6.1902 l 0.4421,6.6324 0.4422,6.6324 0.8844,6.1902 0.8844,6.6325 1.3264,6.1902 1.3266,6.6325 1.7687,6.1902 1.7687,6.6324 1.7687,6.1902 2.2109,6.1902 2.653,6.1902 2.6531,6.1903 2.653,5.7481 3.0952,6.1902 3.5374,5.7481 3.0954,5.7481 3.9795,5.7481 3.5374,5.3059 3.9796,5.3059 3.9796,5.3059 4.4217,4.8638 3.9795,4.8637 4.864,4.8638 4.4218,4.4216 4.8639,4.4215 4.864,3.9795 4.8638,3.9794 5.3062,3.9795 4.8639,3.5373 5.3061,3.5372 5.7483,3.5374 5.306,3.0951 5.7484,3.0951 5.3061,2.6529 5.7482,2.653 5.7484,2.653 6.1904,2.2107 5.7483,2.2108 5.7482,1.7686 6.1905,1.7688 6.1905,1.3264 5.7482,1.3265 6.1905,1.3264 6.1904,0.8844 6.1905,0.8843 6.1905,0.4422 6.1904,0.4421 z\" id=\"path3544\" />\n    <ellipse style=\"fill:none;stroke:#4c4c4c;stroke-width:0.884335\" cx=\"7244.4097\" cy=\"4717.395\" id=\"circle3546\" rx=\"220.64552\" ry=\"220.63777\" />\n    <ellipse style=\"fill:none;stroke:#4c4c4c;stroke-width:0.884335\" cx=\"7246.1787\" cy=\"4717.395\" id=\"circle3548\" rx=\"13.707438\" ry=\"13.706955\" />\n    <path style=\"fill:none;stroke:#4c4c4c;stroke-width:0.884335\" d=\"m 7204.6141,4687.3284 4.4218,-5.3059 5.3061,-4.8637 5.3062,-3.5374 5.7482,-3.0951 5.7483,-1.7686 6.1904,-1.7687 6.1905,-0.4421 h 6.1905 l 5.7482,0.4421 6.1905,1.3265 5.3061,1.7687 5.3061,2.653 4.864,2.653 3.9795,3.5372 3.5374,3.9794 2.6531,4.4216 129.5574,-81.3574 -3.0952,-4.8637 -3.5375,-4.8638 -3.5374,-4.8637 -3.5374,-4.8638 -3.9796,-4.8638 -3.9796,-4.4215 -4.4217,-4.4217 -4.4217,-4.4216 -4.864,-4.4216 -4.4217,-3.9794 -5.3062,-3.9795 -4.8638,-3.9794 -5.3062,-3.5372 -5.3061,-3.5374 -5.306,-3.5372 -5.7484,-3.0952 -5.7482,-3.0951 -5.7483,-3.0951 -5.7483,-2.6529 -6.1905,-2.653 -5.7482,-2.653 -6.1905,-2.2107 -6.1904,-1.7687 -6.1905,-1.7686 -6.6327,-1.7686 -6.1904,-1.3265 -6.6326,-1.3265 -6.6327,-1.3265 -6.1904,-0.4421 -6.6326,-0.8844 h -6.6327 l -6.6326,-0.4421 -6.6326,0.4421 h -6.6327 l -6.6326,0.8844 -6.6326,0.4421 -6.1905,1.3265 -6.6326,0.8842 -6.1904,1.3265 -6.1906,1.7687 -6.6326,1.7686 -5.7482,2.2109 -6.1905,1.7686 -6.1904,2.653 -5.7483,2.6529 -5.7483,2.653 -5.7483,2.653 -5.306,3.0951 -5.7484,3.0951 -5.3061,3.5373 -5.3061,3.5372 -4.8639,3.5373 -4.864,3.9795 -4.8638,3.9793 -4.864,3.9795 -4.4217,4.4217 -4.4218,4.4215 -4.4218,4.4216 -3.9796,4.8637 -3.9795,4.8638 -3.5374,4.8637 -3.9796,4.8638 -3.0952,4.8637 -3.5374,5.306 129.5573,81.3574\" id=\"path3550\" />\n    <path style=\"fill:none;stroke:#4c4c4c;stroke-width:0.884335\" d=\"m 7295.2601,4703.6883 1.3266,5.7481 0.4422,5.7481 v 5.3059 l -0.4422,5.3059 -0.8844,5.306 -1.3266,4.8637 -1.7686,4.8638 -2.2109,4.4216 -3.0952,3.9794 -3.5374,3.9795 -3.5374,3.5372 -4.4218,3.0952 -4.4218,2.6528 -5.306,2.2109 -5.3062,2.2108 -6.1904,1.3265 v 150.3343 l 6.1904,-0.4421 5.7483,-0.4422 6.1905,-0.4422 5.7482,-0.8843 6.1905,-1.3264 5.7483,-0.8844 6.1905,-1.7686 5.7482,-1.3265 6.1905,-1.7686 5.7482,-2.2108 6.1906,-2.2108 5.7482,-2.2108 5.7483,-2.653 5.7482,-2.653 5.7484,-2.6529 5.306,-3.0951 5.7483,-3.0951 5.3061,-3.5373 5.3061,-3.5373 5.3062,-3.9794 5.306,-3.5373 4.864,-4.4216 4.8639,-3.9795 4.864,-4.4215 4.8638,-4.4216 4.4218,-4.8638 4.4218,-4.8637 3.9796,-5.306 3.9795,-4.8638 3.9796,-5.3059 3.5374,-5.7481 3.5374,-5.748 3.5374,-5.7481 3.0952,-6.1903 2.6531,-6.1902 2.6531,-5.748 2.2108,-6.1903 2.2109,-6.6323 2.2109,-6.1903 1.7687,-6.1902 1.3266,-6.1903 1.7686,-6.6324 0.8844,-6.1902 0.8844,-6.1903 0.8842,-6.6323 0.4422,-6.1903 0.4422,-6.1902 v -6.6324 -6.1903 l -0.4422,-6.1902 -0.4422,-6.1903 -0.4422,-6.1902 -0.8842,-6.1903 -0.8844,-6.1902 -1.3266,-6.1903 -1.3264,-5.748 -1.7688,-6.1902 -1.7686,-5.7481 -1.7688,-6.1903 -2.2108,-5.748 -2.2109,-5.306 -2.6531,-5.748 -2.653,-5.7481 -2.6531,-5.3059 -131.3261,78.7044\" id=\"path3552\" />\n    <path style=\"fill:none;stroke:#4c4c4c;stroke-width:0.884335\" d=\"m 7236.0086,4768.2437 -5.3061,-1.7687 -4.8639,-2.2107 -4.864,-2.653 -4.4217,-2.653 -3.9796,-3.5373 -3.9796,-3.5372 -3.5374,-3.9795 -2.653,-3.9794 -2.653,-4.4216 -2.211,-4.8638 -1.7686,-4.8637 -0.8844,-4.8638 -0.4422,-5.306 v -5.3058 l 0.8844,-5.3059 1.7686,-5.306 -132.2103,-83.126 -2.6531,5.3059 -2.6531,5.306 -2.653,5.748 -2.2109,5.306 -2.2109,5.748 -1.7687,6.1902 -1.7687,5.7481 -1.7687,6.1903 -1.3266,5.748 -0.8842,6.1902 -1.3266,6.1903 -0.4422,6.1902 -0.8844,6.6324 -0.4421,6.1903 v 6.6323 6.1903 6.1902 l 0.4421,6.6324 0.4422,6.6324 0.8844,6.1902 0.8844,6.6325 1.3264,6.1902 1.3266,6.6325 1.7687,6.1902 1.7687,6.6324 1.7687,6.1902 2.2109,6.1902 2.653,6.1902 2.6531,6.1903 2.653,5.7481 3.0952,6.1902 3.5374,5.7481 3.0954,5.7481 3.9795,5.7481 3.5374,5.3059 3.9796,5.3059 3.9796,5.3059 4.4217,4.8638 3.9795,4.8637 4.864,4.8638 4.4218,4.4216 4.8639,4.4215 4.864,3.9795 4.8638,3.9794 5.3062,3.9795 4.8639,3.5373 5.3061,3.5372 5.7483,3.5374 5.306,3.0951 5.7484,3.0951 5.3061,2.6529 5.7482,2.653 5.7484,2.653 6.1904,2.2107 5.7483,2.2108 5.7482,1.7686 6.1905,1.7688 6.1905,1.3264 5.7482,1.3265 6.1905,1.3264 6.1904,0.8844 6.1905,0.8843 6.1905,0.4422 6.1904,0.4421 v -150.3343\" id=\"path3554\" />\n  </g>\n  <g id=\"pulley1\">\n    <path style=\"fill:#808080;fill-rule:evenodd;stroke-width:0.442167\" d=\"m 4041.2535,4501.0641 h 11.0548 l 11.0549,0.8843 11.0548,1.3264 11.0548,1.7686 10.6127,2.6528 10.1704,3.095 10.6127,3.5371 9.7282,3.9793 9.7283,4.4215 9.7282,4.8635 9.286,5.3057 8.844,5.7478 8.8438,6.19 8.4017,6.6321 7.9594,6.6321 7.5173,7.5164 7.5173,7.5163 7.0752,7.9586 6.6328,8.4007 6.1907,8.8428 5.7485,8.8428 5.3063,9.285 4.8642,9.7271 4.4219,9.7271 3.9798,10.1692 3.5374,10.1693 3.0955,10.6113 2.2109,10.6114 2.211,10.6114 1.3266,11.0535 0.8844,11.4957 0.4421,11.0535 -0.4421,11.4956 -0.8844,11.0536 -1.3266,11.0535 -2.211,11.0535 -2.2109,10.6114 -3.0955,10.6114 -3.5374,10.1692 -3.9798,10.1692 -4.4219,9.7271 -4.8642,9.285 -5.3063,9.285 -5.7485,9.2849 -6.1907,8.4007 -6.6328,8.4007 -7.0752,7.9586 -7.5173,7.9585 -7.5173,7.0742 -7.9594,7.0743 -8.4017,6.6321 -8.8438,6.19 -8.844,5.7478 -9.286,5.3057 -9.7282,4.8636 -9.7283,4.4213 -9.7282,3.9793 -10.6127,3.095 -10.1704,3.095 -10.6127,2.6529 -11.0548,1.7685 -11.0548,1.3264 -11.0549,0.8843 -11.0548,0.4421 -11.497,-0.4421 -11.0549,-0.8843 -11.0548,-1.3264 -11.0548,-1.7685 -10.6126,-2.6529 -10.6127,-3.095 -10.1704,-3.095 -10.1705,-3.9793 -9.7282,-4.4213 -9.7283,-4.8636 -9.286,-5.3057 -8.8439,-5.7478 -8.4016,-6.19 -8.4018,-6.6321 -7.9594,-7.0743 -7.9595,-7.0742 -7.0751,-7.9585 -7.0751,-7.9586 -6.6329,-8.4007 -6.1907,-8.4007 -5.7485,-9.2849 -5.3064,-9.285 -4.864,-9.285 -4.422,-9.7271 -3.9798,-10.1692 -3.0953,-10.1692 -3.0953,-10.6114 -2.6532,-10.6114 -1.7688,-11.0535 -1.3265,-11.0535 -0.8844,-11.0536 v -11.4956 -11.0535 l 0.8844,-11.4957 1.3265,-11.0535 1.7688,-10.6114 2.6532,-10.6114 3.0953,-10.6113 3.0953,-10.1693 3.9798,-10.1692 4.422,-9.7271 4.864,-9.7271 5.3064,-9.285 5.7485,-8.8428 6.1907,-8.8428 6.6329,-8.4007 7.0751,-7.9586 7.0751,-7.5163 7.9595,-7.5164 7.9594,-6.6321 8.4018,-6.6321 8.4016,-6.19 8.8439,-5.7478 9.286,-5.3057 9.7283,-4.8635 9.7282,-4.4215 10.1705,-3.9793 10.1704,-3.5371 10.6127,-3.095 10.6126,-2.6528 11.0548,-1.7686 11.0548,-1.3264 11.0549,-0.8843 z m 1.7688,206.9219 h -2.6531 l -2.6533,0.8843 -2.2109,1.3265 -2.2109,1.7685 -1.7689,2.2107 -1.3265,2.2107 -0.8844,2.6528 v 2.6529 2.6529 l 0.8844,2.6528 1.3265,2.2107 1.7689,2.2107 2.2109,1.7685 2.2109,0.8844 2.6533,0.8842 2.6531,0.4422 2.6531,-0.4422 2.6532,-0.8842 2.211,-0.8844 2.2109,-1.7685 1.7688,-2.2107 0.8844,-2.2107 0.8844,-2.6528 0.4422,-2.6529 -0.4422,-2.6529 -0.8844,-2.6528 -0.8844,-2.2107 -1.7688,-2.2107 -2.2109,-1.7685 -2.211,-1.3265 -2.6532,-0.8843 z m -41.5662,-16.3592 4.422,-5.3056 5.3062,-4.8636 5.3064,-3.5372 5.7485,-3.095 5.7485,-1.7685 6.1907,-1.7686 6.1908,-0.4421 h 6.1907 l 5.7484,0.4421 6.1907,1.3265 5.3064,1.7685 5.3063,2.6529 4.8642,2.6529 3.9796,3.5371 3.5376,3.9792 2.6532,4.4214 129.5626,-81.3539 -3.0954,-4.8635 -3.5375,-4.8636 -3.5376,-4.8635 -3.5375,-4.8635 -3.9798,-4.8637 -3.9797,-4.4213 -4.4219,-4.4214 -4.422,-4.4215 -4.8641,-4.4214 -4.4219,-3.9792 -5.3064,-3.9793 -4.864,-3.9793 -5.3064,-3.5371 -5.3063,-3.5372 -5.3063,-3.5371 -5.7486,-3.095 -5.7484,-3.095 -5.7485,-3.0949 -5.7486,-2.6528 -6.1907,-2.6529 -5.7485,-2.6529 -6.1907,-2.2106 -6.1907,-1.7686 -6.1908,-1.7685 -6.6328,-1.7686 -6.1907,-1.3264 -6.6329,-1.3265 -6.6329,-1.3264 -6.1907,-0.4421 -6.6329,-0.8844 h -6.6329 l -6.6329,-0.4421 -6.6329,0.4421 h -6.6329 l -6.6329,0.8844 -6.6329,0.4421 -6.1907,1.3264 -6.6329,0.8842 -6.1907,1.3265 -6.1908,1.7685 -6.6329,1.7686 -5.7484,2.2108 -6.1907,1.7685 -6.1907,2.6529 -5.7485,2.6528 -5.7486,2.6528 -5.7485,2.6529 -5.3063,3.095 -5.7485,3.095 -5.3063,3.5371 -5.3064,3.5371 -4.8641,3.5371 -4.8641,3.9793 -4.8641,3.9792 -4.8642,3.9794 -4.4218,4.4214 -4.422,4.4213 -4.422,4.4215 -3.9797,4.8635 -3.9797,4.8635 -3.5375,4.8636 -3.9798,4.8635 -3.0953,4.8636 -3.5376,5.3057 z m 90.6496,16.3592 1.3266,5.7479 0.4422,5.7478 v 5.3057 l -0.4422,5.3056 -0.8844,5.3058 -1.3266,4.8636 -1.7687,4.8635 -2.211,4.4214 -3.0953,3.9792 -3.5376,3.9794 -3.5375,3.5371 -4.422,3.095 -4.4219,2.6527 -5.3063,2.2108 -5.3064,2.2107 -6.1907,1.3264 v 150.3279 l 6.1907,-0.4421 5.7486,-0.4422 6.1907,-0.4421 5.7485,-0.8843 6.1907,-1.3264 5.7485,-0.8843 6.1907,-1.7686 5.7485,-1.3264 6.1907,-1.7686 5.7485,-2.2106 6.1908,-2.2108 5.7485,-2.2106 5.7484,-2.6529 5.7485,-2.6529 5.7486,-2.6528 5.3063,-3.095 5.7485,-3.095 5.3064,-3.5371 5.3062,-3.5372 5.3064,-3.9792 5.3063,-3.5371 4.8642,-4.4214 4.864,-3.9793 4.8642,-4.4214 4.8641,-4.4214 4.4219,-4.8635 4.422,-4.8636 3.9798,-5.3057 3.9796,-4.8636 3.9798,-5.3056 3.5375,-5.7479 3.5376,-5.7478 3.5375,-5.7479 3.0954,-6.1899 2.6531,-6.19 2.6532,-5.7478 2.211,-6.19 2.2109,-6.6321 2.211,-6.1899 1.7688,-6.19 1.3266,-6.19 1.7687,-6.6321 0.8844,-6.19 0.8844,-6.19 0.8844,-6.6321 0.4422,-6.1899 0.4422,-6.19 v -6.6321 -6.19 l -0.4422,-6.19 -0.4422,-6.19 -0.4423,-6.1899 -0.8843,-6.19 -0.8844,-6.19 -1.3266,-6.19 -1.3265,-5.7478 -1.7688,-6.1899 -1.7688,-5.7479 -1.7688,-6.19 -2.2109,-5.7478 -2.211,-5.3057 -2.6532,-5.7478 -2.6531,-5.7479 -2.6532,-5.3056 z m -59.2538,64.5526 -5.3064,-1.7686 -4.8641,-2.2106 -4.8642,-2.6529 -4.4218,-2.6529 -3.9798,-3.5371 -3.9797,-3.5371 -3.5376,-3.9793 -2.6531,-3.9792 -2.6532,-4.4214 -2.211,-4.8636 -1.7687,-4.8635 -0.8844,-4.8636 -0.4423,-5.3057 v -5.3057 l 0.8845,-5.3056 1.7687,-5.3058 -132.2157,-83.1224 -2.6532,5.3056 -2.6532,5.3058 -2.6532,5.7477 -2.2109,5.3058 -2.211,5.7478 -1.7687,6.1899 -1.7689,5.7479 -1.7687,6.19 -1.3266,5.7478 -0.8843,6.1899 -1.3266,6.19 -0.4423,6.19 -0.8844,6.6321 -0.4421,6.19 v 6.6321 6.19 6.1899 l 0.4421,6.6321 0.4422,6.6321 0.8845,6.19 0.8844,6.6322 1.3265,6.1899 1.3266,6.6322 1.7687,6.19 1.7689,6.6321 1.7687,6.19 2.211,6.1898 2.6532,6.19 2.6531,6.19 2.6531,5.7479 3.0954,6.1899 3.5375,5.7478 3.0955,5.7479 3.9796,5.7479 3.5376,5.3056 3.9797,5.3057 3.9798,5.3057 4.422,4.8636 3.9796,4.8635 4.8642,4.8636 4.422,4.4214 4.864,4.4213 4.8642,3.9793 4.8641,3.9792 5.3063,3.9794 4.8641,3.5371 5.3064,3.5371 5.7485,3.5372 5.3063,3.095 5.7485,3.095 5.3063,2.6527 5.7485,2.6529 5.7486,2.6529 6.1907,2.2107 5.7485,2.2106 5.7484,1.7686 6.1908,1.7686 6.1907,1.3264 5.7485,1.3264 6.1907,1.3264 6.1907,0.8844 6.1907,0.8842 6.1908,0.4422 6.1907,0.4421 z\" id=\"path3544-0\" />\n    <ellipse style=\"fill:none;stroke:#4c4c4c;stroke-width:0.884334\" cx=\"4041.2534\" cy=\"4721.6924\" id=\"circle3546-3\" rx=\"220.65443\" ry=\"220.6283\" />\n    <ellipse style=\"fill:none;stroke:#4c4c4c;stroke-width:0.884334\" cx=\"4043.0225\" cy=\"4721.6924\" id=\"circle3548-5\" rx=\"13.707992\" ry=\"13.706367\" />\n    <path style=\"fill:none;stroke:#4c4c4c;stroke-width:0.884334\" d=\"m4001.4561,4691.6268m4.422,-5.3056m5.3062,-4.8636m5.3064,-3.5372m5.7485,-3.095m5.7485,-1.7685m6.1907,-1.7686m6.1908,-0.4421h6.1907l5.7484,0.4421l6.1907,1.3265l5.3064,1.7685l5.3063,2.6529l4.8642,2.6529l3.9796,3.5371l3.5376,3.9792l2.6532,4.4214l129.5626,-81.3539l-3.0954,-4.8635l-3.5375,-4.8636l-3.5376,-4.8635l-3.5375,-4.8635l-3.9798,-4.8637l-3.9797,-4.4213l-4.4219,-4.4214l-4.422,-4.4215l-4.8641,-4.4214l-4.4219,-3.9792l-5.3064,-3.9793l-4.864,-3.9793l-5.3064,-3.5371l-5.3063,-3.5372l-5.3063,-3.5371l-5.7486,-3.095l-5.7484,-3.095l-5.7485,-3.0949l-5.7486,-2.6528l-6.1907,-2.6529l-5.7485,-2.6529l-6.1907,-2.2106l-6.1907,-1.7686l-6.1908,-1.7685l-6.6328,-1.7686l-6.1907,-1.3264l-6.6329,-1.3265l-6.6329,-1.3264l-6.1907,-0.4421l-6.6329,-0.8844h-6.6329l-6.6329,-0.4421l-6.6329,0.4421h-6.6329l-6.6329,0.8844l-6.6329,0.4421l-6.1907,1.3264l-6.6329,0.8842l-6.1907,1.3265l-6.1908,1.7685l-6.6329,1.7686l-5.7484,2.2108l-6.1907,1.7685l-6.1907,2.6529l-5.7485,2.6528l-5.7486,2.6528l-5.7485,2.6529l-5.3063,3.095l-5.7485,3.095l-5.3063,3.5371l-5.3064,3.5371l-4.8641,3.5371l-4.8641,3.9793l-4.8641,3.9792l-4.8642,3.9794l-4.4218,4.4214l-4.422,4.4213l-4.422,4.4215l-3.9797,4.8635l-3.9797,4.8635l-3.5375,4.8636l-3.9798,4.8635l-3.0953,4.8636l-3.5376,5.3057l129.5626,81.3539\" id=\"path3550-4\" />\n    <path style=\"fill:none;stroke:#4c4c4c;stroke-width:0.884334\" d=\"m 4092.1057,4707.986 1.3266,5.7479 0.4422,5.7478 v 5.3057 l -0.4422,5.3056 -0.8844,5.3058 -1.3266,4.8636 -1.7687,4.8635 -2.211,4.4214 -3.0953,3.9792 -3.5376,3.9794 -3.5375,3.5371 -4.422,3.095 -4.4219,2.6527 -5.3063,2.2108 -5.3064,2.2107 -6.1907,1.3264 v 150.3279 l 6.1907,-0.4421 5.7486,-0.4422 6.1907,-0.4421 5.7485,-0.8843 6.1907,-1.3264 5.7485,-0.8843 6.1907,-1.7686 5.7485,-1.3264 6.1907,-1.7686 5.7485,-2.2106 6.1908,-2.2108 5.7485,-2.2106 5.7484,-2.6529 5.7485,-2.6529 5.7486,-2.6528 5.3063,-3.095 5.7485,-3.095 5.3064,-3.5371 5.3062,-3.5372 5.3064,-3.9792 5.3063,-3.5371 4.8642,-4.4214 4.864,-3.9793 4.8642,-4.4214 4.8641,-4.4214 4.4219,-4.8635 4.422,-4.8636 3.9798,-5.3057 3.9796,-4.8636 3.9798,-5.3056 3.5375,-5.7479 3.5376,-5.7478 3.5375,-5.7479 3.0954,-6.1899 2.6531,-6.19 2.6532,-5.7478 2.211,-6.19 2.2109,-6.6321 2.211,-6.1899 1.7688,-6.19 1.3266,-6.19 1.7687,-6.6321 0.8844,-6.19 0.8844,-6.19 0.8844,-6.6321 0.4422,-6.1899 0.4422,-6.19 v -6.6321 -6.19 l -0.4422,-6.19 -0.4422,-6.19 -0.4423,-6.1899 -0.8843,-6.19 -0.8844,-6.19 -1.3266,-6.19 -1.3265,-5.7478 -1.7688,-6.1899 -1.7688,-5.7479 -1.7688,-6.19 -2.2109,-5.7478 -2.211,-5.3057 -2.6532,-5.7478 -2.6531,-5.7479 -2.6532,-5.3056 -131.3314,78.701\" id=\"path3552-2\" />\n    <path style=\"fill:none;stroke:#4c4c4c;stroke-width:0.884334\" d=\"m 4032.8519,4772.5386 -5.3064,-1.7686 -4.8641,-2.2106 -4.8642,-2.6529 -4.4218,-2.6529 -3.9798,-3.5371 -3.9797,-3.5371 -3.5376,-3.9793 -2.6531,-3.9792 -2.6532,-4.4214 -2.211,-4.8636 -1.7687,-4.8635 -0.8844,-4.8636 -0.4423,-5.3057 v -5.3057 l 0.8845,-5.3056 1.7687,-5.3058 -132.2157,-83.1224 -2.6532,5.3056 -2.6532,5.3058 -2.6532,5.7477 -2.2109,5.3058 -2.211,5.7478 -1.7687,6.1899 -1.7689,5.7479 -1.7687,6.19 -1.3266,5.7478 -0.8843,6.1899 -1.3266,6.19 -0.4423,6.19 -0.8844,6.6321 -0.4421,6.19 v 6.6321 6.19 6.1899 l 0.4421,6.6321 0.4422,6.6321 0.8845,6.19 0.8844,6.6322 1.3265,6.1899 1.3266,6.6322 1.7687,6.19 1.7689,6.6321 1.7687,6.19 2.211,6.1898 2.6532,6.19 2.6531,6.19 2.6531,5.7479 3.0954,6.1899 3.5375,5.7478 3.0955,5.7479 3.9796,5.7479 3.5376,5.3056 3.9797,5.3057 3.9798,5.3057 4.422,4.8636 3.9796,4.8635 4.8642,4.8636 4.422,4.4214 4.864,4.4213 4.8642,3.9793 4.8641,3.9792 5.3063,3.9794 4.8641,3.5371 5.3064,3.5371 5.7485,3.5372 5.3063,3.095 5.7485,3.095 5.3063,2.6527 5.7485,2.6529 5.7486,2.6529 6.1907,2.2107 5.7485,2.2106 5.7484,1.7686 6.1908,1.7686 6.1907,1.3264 5.7485,1.3264 6.1907,1.3264 6.1907,0.8844 6.1907,0.8842 6.1908,0.4422 6.1907,0.4421 v -150.3279\" id=\"path3554-3\" />\n  </g>\n  <g id=\"fg2\" transform=\"matrix(1 0 0 1 0 -350.48)\">\n    <g id=\"e17_group\">\n      <path fill=\"url(#SVGID_1_)\" d=\"m4216.3852,4381.3625v-315.1357l142.3251,-100.2114V3751.718h300.6898v214.2918l143.0251,100.2114v315.1413h-586.04\" id=\"e22_path\" style=\"fill:url(#SVGID_1_);stroke-width:5.88848\" />\n      <path fill=\"url(#SVGID_2_)\" d=\"M4358.7103,3966.0154V3751.718h300.6898v214.2918\" id=\"e23_path\" style=\"fill:url(#SVGID_2_);stroke-width:5.88848\" />\n      <path fill=\"url(#SVGID_3_)\" d=\"m4216.3852,4066.2268m142.3251,-100.2114h300.6898l143.0251,100.2114\" id=\"e24_path\" style=\"fill:url(#SVGID_3_);stroke-width:5.88848\" />\n      <path fill=\"url(#SVGID_1_)\" d=\"m4216.3852,4381.3625v-315.1357l142.3251,-100.2114V3751.718h300.6898v214.2918l143.0251,100.2114v315.1413h-586.04\" id=\"e25_path\" style=\"fill:url(#SVGID_1_);stroke-width:5.88848\" />\n      <path fill=\"url(#SVGID_2_)\" d=\"M4358.7103,3966.0154V3751.718h300.6898v214.2918\" id=\"e26_path\" style=\"fill:url(#SVGID_2_);stroke-width:5.88848\" />\n      <path fill=\"url(#SVGID_3_)\" d=\"m4216.3852,4066.2268m142.3251,-100.2114h300.6898l143.0251,100.2114\" id=\"e27_path\" style=\"fill:url(#SVGID_3_);stroke-width:5.88848\" />\n    </g>\n    <g id=\"e27_group\">\n      <path fill=\"url(#SVGID_1_)\" d=\"m4216.3852,4381.3625v-315.1357l142.3251,-100.2114V3751.718h300.6898v214.2918l143.0251,100.2114v315.1413h-586.04\" id=\"e28_path\" style=\"fill:url(#SVGID_1_);stroke-width:5.88848\" />\n      <path fill=\"url(#SVGID_2_)\" d=\"M4358.7103,3966.0154V3751.718h300.6898v214.2918\" id=\"e29_path\" style=\"fill:url(#SVGID_2_);stroke-width:5.88848\" />\n      <path fill=\"url(#SVGID_3_)\" d=\"m4216.3852,4066.2268m142.3251,-100.2114h300.6898l143.0251,100.2114\" id=\"e30_path\" style=\"fill:url(#SVGID_3_);stroke-width:5.88848\" />\n    </g>\n  </g>\n  <g id=\"fg\" transform=\"matrix(1 0 0 1 0 -350.48)\">\n    <g id=\"e1_group\">\n      <path fill=\"url(#SVGID_1_)\" d=\"m4216.3852,4381.3625v-315.1357l142.3251,-100.2114V3751.718h300.6898v214.2918l143.0251,100.2114v315.1413h-586.04\" id=\"path344\" style=\"fill:url(#SVGID_1_);stroke-width:5.88848\" />\n      <path fill=\"url(#SVGID_2_)\" d=\"M4358.7103,3966.0154V3751.718h300.6898v214.2918\" id=\"path359\" style=\"fill:url(#SVGID_2_);stroke-width:5.88848\" />\n      <path fill=\"url(#SVGID_3_)\" d=\"m4216.3852,4066.2268m142.3251,-100.2114h300.6898l143.0251,100.2114\" id=\"path372\" style=\"fill:url(#SVGID_3_);stroke-width:5.88848\" />\n      <path fill=\"url(#SVGID_1_)\" d=\"m4216.3852,4381.3625v-315.1357l142.3251,-100.2114V3751.718h300.6898v214.2918l143.0251,100.2114v315.1413h-586.04\" id=\"e19_path\" style=\"fill:url(#SVGID_1_);stroke-width:5.88848\" />\n      <path fill=\"url(#SVGID_2_)\" d=\"M4358.7103,3966.0154V3751.718h300.6898v214.2918\" id=\"e20_path\" style=\"fill:url(#SVGID_2_);stroke-width:5.88848\" />\n      <path fill=\"url(#SVGID_3_)\" d=\"m4216.3852,4066.2268m142.3251,-100.2114h300.6898l143.0251,100.2114\" id=\"e21_path\" style=\"fill:url(#SVGID_3_);stroke-width:5.88848\" />\n    </g>\n    <g id=\"e16_group\">\n      <path fill=\"url(#SVGID_1_)\" d=\"m4216.3852,4381.3625v-315.1357l142.3251,-100.2114V3751.718h300.6898v214.2918l143.0251,100.2114v315.1413h-586.04\" id=\"e16_path\" style=\"fill:url(#SVGID_1_);stroke-width:5.88848\" />\n      <path fill=\"url(#SVGID_2_)\" d=\"M4358.7103,3966.0154V3751.718h300.6898v214.2918\" id=\"e17_path\" style=\"fill:url(#SVGID_2_);stroke-width:5.88848\" />\n      <path fill=\"url(#SVGID_3_)\" d=\"m4216.3852,4066.2268m142.3251,-100.2114h300.6898l143.0251,100.2114\" id=\"e18_path\" style=\"fill:url(#SVGID_3_);stroke-width:5.88848\" />\n    </g>\n  </g>\n</svg>",
        "clickableShapes": [],
        "javascriptHandlers": [],
        "smilAnimations": [
            {
                "id": "rotate_pulley2",
                "targetId": "pulley1",
                "classValue": "",
                "attributeName": "transform",
                "transformType": "rotate",
                "fromValue": "0,4033,4717",
                "toValue": "360,4033,4717",
                "trigger": "msg",
                "duration": "3",
                "durationUnit": "s",
                "repeatCount": "0",
                "end": "freeze",
                "delay": "5",
                "delayUnit": "s",
                "custom": ""
            },
            {
                "id": "rotate_pulley2",
                "targetId": "pulley2",
                "classValue": "",
                "attributeName": "transform",
                "transformType": "rotate",
                "fromValue": "0,7240,4717",
                "toValue": "360,7240,4717",
                "trigger": "msg",
                "duration": "3",
                "durationUnit": "s",
                "repeatCount": "0",
                "end": "freeze",
                "delay": "5",
                "delayUnit": "s",
                "custom": ""
            },
            {
                "id": "move_fg",
                "targetId": "fg",
                "classValue": "",
                "attributeName": "transform",
                "transformType": "translate",
                "fromValue": "18,15",
                "toValue": "2350,15",
                "trigger": "msg",
                "duration": "7",
                "durationUnit": "s",
                "repeatCount": "1",
                "end": "restore",
                "delay": "1",
                "delayUnit": "s",
                "custom": ""
            }
        ],
        "bindings": [],
        "showCoordinates": false,
        "autoFormatAfterEdit": true,
        "showBrowserErrors": false,
        "showBrowserEvents": false,
        "enableJsDebugging": false,
        "sendMsgWhenLoaded": false,
        "noClickWhenDblClick": false,
        "outputField": "payload",
        "editorUrl": "http://127.0.0.1:1880/drawsvg_local/edrawsvg.html",
        "directory": "",
        "panning": "disabled",
        "zooming": "disabled",
        "panOnlyWhenZoomed": false,
        "doubleClickZoomEnabled": false,
        "mouseWheelZoomEnabled": false,
        "dblClickZoomPercentage": 150,
        "cssString": "div.ui-svg svg{\n    color: var(--nr-dashboard-widgetColor);\n    fill: currentColor !important;\n}\ndiv.ui-svg path {\n    fill: inherit;\n}",
        "name": "",
        "x": 560,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "c8881613641a9d6d",
        "type": "comment",
        "z": "0545859087596164",
        "name": "Untuk SVG SCADA",
        "info": "",
        "x": 150,
        "y": 60,
        "wires": []
    },
    {
        "id": "4f0c8cc77ac94205",
        "type": "link in",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "5d4f74d278099354",
            "fc2fef986703d033",
            "2c074089.bbe5c",
            "d5fc3161471ff197",
            "9494b877.4d3008",
            "96fc6d2e562eb758"
        ],
        "x": 335,
        "y": 140,
        "wires": [
            [
                "c920999be2858c8c"
            ]
        ]
    },
    {
        "id": "5d4f74d278099354",
        "type": "link out",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "4f0c8cc77ac94205"
        ],
        "x": 1415,
        "y": 1460,
        "wires": []
    },
    {
        "id": "2c3dd5577f11989f",
        "type": "function",
        "z": "0545859087596164",
        "name": "SVG machine name",
        "func": "var machine = msg.payload.rows[0]['machine_name'];\n\nmsg.payload =  \n    {\n        \"command\": \"update_text\",\n        \"selector\": \"#machine\",\n        \"textContent\": machine\n    };\n    \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1460,
        "wires": [
            [
                "5d4f74d278099354"
            ]
        ]
    },
    {
        "id": "d369a37565fb0ba9",
        "type": "function",
        "z": "0545859087596164",
        "name": "SVG product name",
        "func": "var product = msg.payload;\nmsg.payload =  \n    {\n        \"command\": \"update_text\",\n        \"selector\": \"#product\",\n        \"textContent\": product\n    };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1130,
        "y": 1600,
        "wires": [
            [
                "fc2fef986703d033"
            ]
        ]
    },
    {
        "id": "fc2fef986703d033",
        "type": "link out",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "4f0c8cc77ac94205"
        ],
        "x": 1415,
        "y": 1560,
        "wires": []
    },
    {
        "id": "c13b754745601b47",
        "type": "link in",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "28c0e8f2c9f6c549"
        ],
        "x": 135,
        "y": 2160,
        "wires": [
            [
                "57fead0c6efdd81b",
                "d37eeb97c22bd7c8"
            ]
        ]
    },
    {
        "id": "57fead0c6efdd81b",
        "type": "postgrestor",
        "z": "0545859087596164",
        "name": "output qty",
        "query": "select COALESCE(sum(qty),0) as qty\nfrom trans_output where id_machine={{msg.payload}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 300,
        "y": 2160,
        "wires": [
            [
                "9a0bbb746785a27c"
            ]
        ]
    },
    {
        "id": "d5fc3161471ff197",
        "type": "link out",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "4f0c8cc77ac94205"
        ],
        "x": 1035,
        "y": 2220,
        "wires": []
    },
    {
        "id": "e044e568ef54ac03",
        "type": "function",
        "z": "0545859087596164",
        "name": "SVG output",
        "func": "var output = parseInt(msg.payload);\nglobal.set('output_qty_dashboard_animation',output);\nmsg.payload =  \n    {\n        \"command\": \"update_text\",\n        \"selector\": \"#output\",\n        \"textContent\": output\n    };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 850,
        "y": 2160,
        "wires": [
            [
                "d5fc3161471ff197"
            ]
        ]
    },
    {
        "id": "d636ba1fc0c10519",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "status_before_dashboard_animation",
                "pt": "global",
                "to": "OFF",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 1640,
        "wires": [
            []
        ]
    },
    {
        "id": "5b033b2e2d60f7f4",
        "type": "function",
        "z": "0545859087596164",
        "name": "SVG output animation",
        "func": "var output = parseInt(msg.payload);\nvar output_before = parseInt(global.get('output_qty_before_dashboard_animation'));\nvar change_machine = global.get('change_machine');\n\nif (output!==output_before && change_machine!==true){\n    if (output!==0){\n        msg.payload =  \n        {\n        \"command\": \"trigger_animation\",\n        \"selector\": \"#move_fg\",\n        \"action\": \"start\"\n        };\n        \n    }   \n}\n\nglobal.set('change_machine',false);\nglobal.set('output_qty_before_dashboard_animation',output); \n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 2220,
        "wires": [
            [
                "d5fc3161471ff197"
            ]
        ]
    },
    {
        "id": "d37eeb97c22bd7c8",
        "type": "postgrestor",
        "z": "0545859087596164",
        "name": "defect qty",
        "query": "select COALESCE(sum(qty),0) as qty\nfrom trans_ng where id_machine={{msg.payload}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 300,
        "y": 2300,
        "wires": [
            [
                "50a4513daf367f6e"
            ]
        ]
    },
    {
        "id": "0e0cf9bbcb52a987",
        "type": "function",
        "z": "0545859087596164",
        "name": "SVG ok and defect",
        "func": "var defect = parseInt(msg.payload);\nvar output = parseInt(global.get('output_qty_dashboard_animation'));\nvar ok = output-defect;\n\nmsg.payload = [\n    {\n        \"command\": \"update_text\",\n        \"selector\": \"#defect\",\n        \"textContent\": defect\n    },\n    {\n        \"command\": \"update_text\",\n        \"selector\": \"#ok\",\n        \"textContent\": ok\n    }\n    ]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 2300,
        "wires": [
            [
                "d5fc3161471ff197"
            ]
        ]
    },
    {
        "id": "d83d746cb2c60cc9",
        "type": "switch",
        "z": "0545859087596164",
        "name": "",
        "property": "payload.rowCount",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 750,
        "y": 1420,
        "wires": [
            [
                "404c74c6b9036ca4",
                "2c3dd5577f11989f"
            ]
        ]
    },
    {
        "id": "404c74c6b9036ca4",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['type']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 1600,
        "wires": [
            [
                "d369a37565fb0ba9"
            ]
        ]
    },
    {
        "id": "9a0bbb746785a27c",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['qty']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 2160,
        "wires": [
            [
                "e044e568ef54ac03",
                "5b033b2e2d60f7f4"
            ]
        ]
    },
    {
        "id": "50a4513daf367f6e",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['qty']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 2300,
        "wires": [
            [
                "0e0cf9bbcb52a987"
            ]
        ]
    },
    {
        "id": "8576bc10c23d02a1",
        "type": "function",
        "z": "0545859087596164",
        "name": "SVG machine status OFF",
        "func": "\nmsg.payload =  [\n     {\n        \"command\": \"set_style\",\n        \"selector\": \"#path8\",\n        \"attributeName\": \"fill\",\n        \"attributeValue\": \"#e5e5e5\"\n    },   \n    {\n        \"command\": \"set_style\",\n        \"selector\": \"#path10\",\n        \"attributeName\": \"fill\",\n        \"attributeValue\": \"#e0e0e0\"\n    },\n    {\n        \"command\": \"set_style\",\n        \"selector\": \"#path12\",\n        \"attributeName\": \"fill\",\n        \"attributeValue\": \"#dbdbdb\"\n    },\n    {\n        \"command\": \"set_style\",\n        \"selector\": \"#path14\",\n        \"attributeName\": \"fill\",\n        \"attributeValue\": \"#d6d6d6\"\n    },\n        {\n        \"command\": \"trigger_animation\",\n        \"selector\": \"#rotate_pulley1\",\n        \"action\": \"stop\"\n    },\n    {\n        \"command\": \"trigger_animation\",\n        \"selector\": \"#rotate_pulley2\",\n        \"action\": \"stop\"\n    }\n]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1390,
        "y": 1180,
        "wires": [
            [
                "96fc6d2e562eb758"
            ]
        ]
    },
    {
        "id": "e930d70a2e421aa2",
        "type": "switch",
        "z": "0545859087596164",
        "name": "Check",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OFF",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "ON",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "STOP",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1210,
        "y": 1220,
        "wires": [
            [
                "8576bc10c23d02a1"
            ],
            [
                "d556a7e1aae046a9"
            ],
            [
                "40ae441951af1267"
            ]
        ]
    },
    {
        "id": "40ae441951af1267",
        "type": "function",
        "z": "0545859087596164",
        "name": "SVG machine status STOP",
        "func": "\nmsg.payload =  [\n     {\n        \"command\": \"set_style\",\n        \"selector\": \"#path8\",\n        \"attributeName\": \"fill\",\n        \"attributeValue\": \"#ffaaaa\"\n    },   \n    {\n        \"command\": \"set_style\",\n        \"selector\": \"#path10\",\n        \"attributeName\": \"fill\",\n        \"attributeValue\": \"#ff8080\"\n    },\n    {\n        \"command\": \"set_style\",\n        \"selector\": \"#path12\",\n        \"attributeName\": \"fill\",\n        \"attributeValue\": \"#d35f5f\"\n    },\n    {\n        \"command\": \"set_style\",\n        \"selector\": \"#path14\",\n        \"attributeName\": \"fill\",\n        \"attributeValue\": \"#aa0000\"\n    },\n    {\n        \"command\": \"trigger_animation\",\n        \"selector\": \"#rotate_pulley1\",\n        \"action\": \"stop\"\n    },\n    {\n        \"command\": \"trigger_animation\",\n        \"selector\": \"#rotate_pulley2\",\n        \"action\": \"stop\"\n    }\n]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1400,
        "y": 1260,
        "wires": [
            [
                "96fc6d2e562eb758"
            ]
        ]
    },
    {
        "id": "d556a7e1aae046a9",
        "type": "function",
        "z": "0545859087596164",
        "name": "SVG machine status ON",
        "func": "\nmsg.payload =  [\n    {\n        \"command\": \"trigger_animation\",\n        \"selector\": \"#rotate_pulley1\",\n        \"action\": \"start\"\n    },\n    {\n        \"command\": \"trigger_animation\",\n        \"selector\": \"#rotate_pulley2\",\n        \"action\": \"start\"\n    },\n     {\n        \"command\": \"set_style\",\n        \"selector\": \"#path8\",\n        \"attributeName\": \"fill\",\n        \"attributeValue\": \"#ccffaa\"\n    },   \n    {\n        \"command\": \"set_style\",\n        \"selector\": \"#path10\",\n        \"attributeName\": \"fill\",\n        \"attributeValue\": \"#99ff55\"\n    },\n    {\n        \"command\": \"set_style\",\n        \"selector\": \"#path12\",\n        \"attributeName\": \"fill\",\n        \"attributeValue\": \"#7fff2a\"\n    },\n    {\n        \"command\": \"set_style\",\n        \"selector\": \"#path14\",\n        \"attributeName\": \"fill\",\n        \"attributeValue\": \"#44aa00\"\n    }\n]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1390,
        "y": 1220,
        "wires": [
            [
                "96fc6d2e562eb758"
            ]
        ]
    },
    {
        "id": "96fc6d2e562eb758",
        "type": "link out",
        "z": "0545859087596164",
        "name": "",
        "links": [
            "4f0c8cc77ac94205"
        ],
        "x": 1595,
        "y": 1220,
        "wires": []
    },
    {
        "id": "cf2da7acf9bdb2cc",
        "type": "switch",
        "z": "0545859087596164",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "status_before_dashboard_animation",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1070,
        "y": 1180,
        "wires": [
            [
                "e930d70a2e421aa2",
                "364923b054d63c33"
            ]
        ]
    },
    {
        "id": "364923b054d63c33",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "status_before_dashboard_animation",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1340,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "3bc99f0fdba5a232",
        "type": "ui_text",
        "z": "0545859087596164",
        "group": "60a0e463.7cc3dc",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Cycle Time: ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 590,
        "y": 1380,
        "wires": []
    },
    {
        "id": "f5bd15bd2826f669",
        "type": "function",
        "z": "0545859087596164",
        "name": "",
        "func": "var ct = msg.payload.rows[0]['ct'];\nvar qty_perct = msg.payload.rows[0]['qty_perct'];\nvar satuan = \" sec/pc\"\nif (qty_perct!==1){\n    satuan = \" sec/\" + qty_perct + \"pcs\";\n}\nmsg.payload = ct.toString()+satuan;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 1380,
        "wires": [
            [
                "3bc99f0fdba5a232"
            ]
        ]
    },
    {
        "id": "7ca9dec4a24aea37",
        "type": "switch",
        "z": "0545859087596164",
        "name": "",
        "property": "payload.rowCount",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 310,
        "y": 1340,
        "wires": [
            [
                "f5bd15bd2826f669"
            ]
        ]
    },
    {
        "id": "b8d1948432105380",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "change_machine",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1250,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "d1e361101b57f3df",
        "type": "ui_button",
        "z": "0545859087596164",
        "name": "",
        "group": "5cc5a5f1.2fb52c",
        "order": 5,
        "width": "0",
        "height": "0",
        "passthru": false,
        "label": "Refresh Status (After Change Page)",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "OFF",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 930,
        "y": 780,
        "wires": [
            [
                "87d2eebf868c86aa"
            ]
        ]
    },
    {
        "id": "87d2eebf868c86aa",
        "type": "change",
        "z": "0545859087596164",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "status_before_dashboard_animation",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1300,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "2ddbe3d7.a26f0c",
        "type": "comment",
        "z": "75ae1ffb.e2bc9",
        "name": "Ini untuk menampilkan list machine untuk menampilkan dashboard",
        "info": "",
        "x": 300,
        "y": 60,
        "wires": []
    },
    {
        "id": "28da3ca8.0966b4",
        "type": "inject",
        "z": "75ae1ffb.e2bc9",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 210,
        "y": 260,
        "wires": [
            [
                "402538ba.3450d8",
                "538bf8e5.43ec98"
            ]
        ]
    },
    {
        "id": "d60221a6.31f69",
        "type": "ui_dropdown",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "label": "Machine Name",
        "tooltip": "",
        "place": "Select option",
        "group": "a8e1d3d.1f6b53",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 460,
        "y": 260,
        "wires": [
            [
                "402538ba.3450d8"
            ]
        ]
    },
    {
        "id": "ca9d2c68.bfff3",
        "type": "ui_button",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "group": "a8e1d3d.1f6b53",
        "order": 2,
        "width": "7",
        "height": "1",
        "passthru": false,
        "label": "Select Machine",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "machine_name",
        "payloadType": "flow",
        "topic": "topic",
        "topicType": "msg",
        "x": 880,
        "y": 340,
        "wires": [
            [
                "44eeb2fb.3992ec",
                "2c68970a.e4d758",
                "bff9fef3.f8ea7"
            ]
        ]
    },
    {
        "id": "402538ba.3450d8",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machine_name",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 250,
        "y": 360,
        "wires": [
            [
                "48dcfd1c.99fb94"
            ]
        ]
    },
    {
        "id": "e94564c8.112548",
        "type": "debug",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1170,
        "y": 320,
        "wires": []
    },
    {
        "id": "2c68970a.e4d758",
        "type": "ui_text",
        "z": "75ae1ffb.e2bc9",
        "group": "4e3da262.ed00bc",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Machine Name:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1180,
        "y": 280,
        "wires": []
    },
    {
        "id": "48dcfd1c.99fb94",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "is text empty?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 480,
        "y": 360,
        "wires": [
            [
                "47b9cce2.d25744"
            ],
            [
                "7e682236.3a8cac"
            ]
        ]
    },
    {
        "id": "7e682236.3a8cac",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "enabled true",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 360,
        "wires": [
            [
                "ca9d2c68.bfff3"
            ]
        ]
    },
    {
        "id": "47b9cce2.d25744",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "enabled false",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 320,
        "wires": [
            [
                "ca9d2c68.bfff3"
            ]
        ]
    },
    {
        "id": "44eeb2fb.3992ec",
        "type": "function",
        "z": "75ae1ffb.e2bc9",
        "name": "set False",
        "func": "msg.payload = false;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1160,
        "y": 360,
        "wires": [
            [
                "8f24c919.5848a8"
            ]
        ]
    },
    {
        "id": "8f24c919.5848a8",
        "type": "link out",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "links": [
            "f4f4787e.87d838"
        ],
        "x": 1295,
        "y": 360,
        "wires": []
    },
    {
        "id": "f4f4787e.87d838",
        "type": "link in",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "links": [
            "8f24c919.5848a8"
        ],
        "x": 255,
        "y": 220,
        "wires": [
            [
                "d60221a6.31f69",
                "48dcfd1c.99fb94"
            ]
        ]
    },
    {
        "id": "a9c9bfa4.889c6",
        "type": "inject",
        "z": "75ae1ffb.e2bc9",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 940,
        "y": 240,
        "wires": [
            [
                "2c68970a.e4d758"
            ]
        ]
    },
    {
        "id": "6fec5066.3385c",
        "type": "comment",
        "z": "75ae1ffb.e2bc9",
        "name": "Menampilkan Status",
        "info": "",
        "x": 207,
        "y": 422.00002098083496,
        "wires": []
    },
    {
        "id": "bff9fef3.f8ea7",
        "type": "link out",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "links": [
            "c61f5426.49ea88",
            "2a017c5b.e0c284",
            "6127b723.ca98f8",
            "2664b5d1.5cd2da"
        ],
        "x": 1125,
        "y": 420,
        "wires": []
    },
    {
        "id": "9e44de9d.03eb7",
        "type": "inject",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payload": "machine_no_input",
        "payloadType": "global",
        "x": 252.9999542236328,
        "y": 1001.9998302459717,
        "wires": [
            [
                "4d613d63.6a1014"
            ]
        ]
    },
    {
        "id": "4b53e4d6.92549c",
        "type": "postgrestor",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "query": "SELECT id_machine,machine_no,status_start, status_stop FROM machine_master where machine_name='{{msg.payload}}';",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 310,
        "y": 580,
        "wires": [
            [
                "9b01064.d2c60f8",
                "d2aa868d.7cf358",
                "2078bb3.38da344",
                "2bd7bd36.dec5f2",
                "dc573049.1f701"
            ]
        ]
    },
    {
        "id": "c61f5426.49ea88",
        "type": "link in",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "links": [
            "bff9fef3.f8ea7"
        ],
        "x": 135,
        "y": 580,
        "wires": [
            [
                "4b53e4d6.92549c"
            ]
        ]
    },
    {
        "id": "21f3155a.5dd35a",
        "type": "ui_text",
        "z": "75ae1ffb.e2bc9",
        "group": "4e3da262.ed00bc",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Status: ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1022.9999542236328,
        "y": 1121.9998302459717,
        "wires": []
    },
    {
        "id": "361957a4.b4b0e8",
        "type": "ui_text",
        "z": "75ae1ffb.e2bc9",
        "group": "4e3da262.ed00bc",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Running Type: ",
        "format": "{{msg.payload.rows[0]['type']}}",
        "layout": "row-spread",
        "x": 532.9999542236328,
        "y": 1161.9998302459717,
        "wires": []
    },
    {
        "id": "a5e32564.6cf598",
        "type": "ui_text",
        "z": "75ae1ffb.e2bc9",
        "group": "4e3da262.ed00bc",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Loading Time: ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 760,
        "y": 1700,
        "wires": []
    },
    {
        "id": "9dbd121c.f095",
        "type": "comment",
        "z": "75ae1ffb.e2bc9",
        "name": "Menampilkan OEE",
        "info": "",
        "x": 213.00003814697266,
        "y": 1957.0000972747803,
        "wires": []
    },
    {
        "id": "9b01064.d2c60f8",
        "type": "ui_text",
        "z": "75ae1ffb.e2bc9",
        "group": "a8e1d3d.1f6b53",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "ID Machine: ",
        "format": "{{msg.payload.rows[0]['id_machine']}}",
        "layout": "row-spread",
        "x": 570,
        "y": 600,
        "wires": []
    },
    {
        "id": "d2aa868d.7cf358",
        "type": "ui_text",
        "z": "75ae1ffb.e2bc9",
        "group": "a8e1d3d.1f6b53",
        "order": 6,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Machine No: ",
        "format": "{{msg.payload.rows[0]['machine_no']}}",
        "layout": "row-spread",
        "x": 570,
        "y": 640,
        "wires": []
    },
    {
        "id": "2078bb3.38da344",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "id_machine_input",
                "pt": "global",
                "to": "payload.rows[0]['id_machine']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "fe3d705d.21ecf",
        "type": "inject",
        "z": "75ae1ffb.e2bc9",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 440,
        "y": 520,
        "wires": [
            [
                "9b01064.d2c60f8",
                "d2aa868d.7cf358"
            ]
        ]
    },
    {
        "id": "4d613d63.6a1014",
        "type": "link out",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "links": [
            "9ee35204.3e51"
        ],
        "x": 607.9999542236328,
        "y": 1001.9998302459717,
        "wires": []
    },
    {
        "id": "b13c7e05.0f988",
        "type": "comment",
        "z": "75ae1ffb.e2bc9",
        "name": "Refresh tiap 5 detik",
        "info": "",
        "x": 170,
        "y": 960,
        "wires": []
    },
    {
        "id": "2e31f9a5.ab5786",
        "type": "postgrestor",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "query": "SELECT a.status_start, a.status_stop, b.type FROM machine_master a inner join\nlist_ct b on a.id_type=b.id_type where machine_no='{{msg.payload}}';",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 302.9999542236328,
        "y": 1061.9998302459717,
        "wires": [
            [
                "dc573049.1f701",
                "361957a4.b4b0e8",
                "c73274d5.854318"
            ]
        ]
    },
    {
        "id": "9ee35204.3e51",
        "type": "link in",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "links": [
            "4d613d63.6a1014"
        ],
        "x": 127.99995422363281,
        "y": 1061.9998302459717,
        "wires": [
            [
                "2e31f9a5.ab5786"
            ]
        ]
    },
    {
        "id": "2bd7bd36.dec5f2",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machine_no_input",
                "pt": "global",
                "to": "payload.rows[0]['machine_no']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "634b7fad.9c489",
        "type": "inject",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "id_machine_input",
        "payloadType": "global",
        "x": 230,
        "y": 1460,
        "wires": [
            [
                "f53a9d5.ede8b6"
            ]
        ]
    },
    {
        "id": "35cb7efb.7964e2",
        "type": "link out",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "links": [
            "6c9aa926.5428d8",
            "228d8081.28c74",
            "89556ad3.faad08",
            "2bcdca2f.178cf6",
            "68ebe926.1fc4f8",
            "81a9beda.5d63b",
            "a9fe4d3e.cfeaa",
            "3ad62b26.0f2db4",
            "f17cc4b0.e4f998",
            "1f5b448e.cf96fb",
            "a04be908.e200d8"
        ],
        "x": 935,
        "y": 1520,
        "wires": []
    },
    {
        "id": "cde1d136.f6148",
        "type": "comment",
        "z": "75ae1ffb.e2bc9",
        "name": "Refresh tiap 5 detik",
        "info": "",
        "x": 188.00005340576172,
        "y": 1416.0001759529114,
        "wires": []
    },
    {
        "id": "dc573049.1f701",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "Jika start ON",
        "property": "payload.rows[0]['status_start']",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 522.9999542236328,
        "y": 1061.9998302459717,
        "wires": [
            [
                "25fc1653.1cab6a"
            ],
            [
                "d08a7382.a8a9b"
            ]
        ]
    },
    {
        "id": "d08a7382.a8a9b",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "OFF",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "OFF",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 722.9999542236328,
        "y": 1121.9998302459717,
        "wires": [
            [
                "21f3155a.5dd35a",
                "92e233d5.d027d"
            ]
        ]
    },
    {
        "id": "25fc1653.1cab6a",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "Jika Trouble",
        "property": "payload.rows[0]['status_stop']",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 722.9999542236328,
        "y": 1041.9998302459717,
        "wires": [
            [
                "81234ce9.2983c"
            ],
            [
                "90021c6a.2a271"
            ]
        ]
    },
    {
        "id": "81234ce9.2983c",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "STOP",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "STOP",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 862.9999542236328,
        "y": 981.9998302459717,
        "wires": [
            [
                "21f3155a.5dd35a",
                "bf61fe02.d106f"
            ]
        ]
    },
    {
        "id": "90021c6a.2a271",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "ON",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "ON",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 862.9999542236328,
        "y": 1061.9998302459717,
        "wires": [
            [
                "21f3155a.5dd35a",
                "f02d5e0c.4e7e8",
                "8aa54a64.a9bc28"
            ]
        ]
    },
    {
        "id": "f1d911c1.febad",
        "type": "inject",
        "z": "75ae1ffb.e2bc9",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 860,
        "y": 920,
        "wires": [
            [
                "21f3155a.5dd35a",
                "361957a4.b4b0e8",
                "c73274d5.854318"
            ]
        ]
    },
    {
        "id": "41345c42.9d8e14",
        "type": "inject",
        "z": "75ae1ffb.e2bc9",
        "name": "Init global id_machine",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 220,
        "y": 460,
        "wires": [
            [
                "3caa8f19.528b6",
                "822ee1ff.dde9e"
            ]
        ]
    },
    {
        "id": "3caa8f19.528b6",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "id_machine_input",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "822ee1ff.dde9e",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machine_no_input",
                "pt": "global",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "80435a7e.0e9498",
        "type": "function",
        "z": "75ae1ffb.e2bc9",
        "name": "ambil global jam",
        "func": "var time = new Date();\nvar displaytime = time.toLocaleTimeString();\nvar hour = time.getHours();\nglobal.set('jam_input',hour);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 518,
        "y": 800.0000066757202,
        "wires": [
            [
                "b7f92526.bf0388"
            ]
        ]
    },
    {
        "id": "a481134e.34d2a",
        "type": "comment",
        "z": "75ae1ffb.e2bc9",
        "name": "Untuk mengambil tgl1 dan tgl2",
        "info": "",
        "x": 558,
        "y": 760.0000066757202,
        "wires": []
    },
    {
        "id": "b7f92526.bf0388",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "Menentukan tanggal",
        "property": "jam_input",
        "propertyType": "global",
        "rules": [
            {
                "t": "lte",
                "v": "6",
                "vt": "num"
            },
            {
                "t": "gte",
                "v": "7",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 738,
        "y": 800.0000066757202,
        "wires": [
            [
                "8a145c97.5c94f"
            ],
            [
                "e8bc471c.7861b8"
            ]
        ]
    },
    {
        "id": "3610724b.9a8aee",
        "type": "moment",
        "z": "75ae1ffb.e2bc9",
        "name": "today",
        "topic": "",
        "input": "today_input",
        "inputType": "global",
        "inTz": "Asia/Jakarta",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "today_input",
        "outputType": "global",
        "outTz": "Asia/Jakarta",
        "x": 628,
        "y": 860.0000066757202,
        "wires": [
            []
        ]
    },
    {
        "id": "2dffcf58.ffb1c",
        "type": "moment",
        "z": "75ae1ffb.e2bc9",
        "name": "yesterday",
        "topic": "",
        "input": "today_input",
        "inputType": "global",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "days",
        "adjDir": "subtract",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "yesterday_input",
        "outputType": "global",
        "outTz": "Asia/Jakarta",
        "x": 638,
        "y": 900.0000066757202,
        "wires": [
            []
        ]
    },
    {
        "id": "ec98a7ef.019558",
        "type": "moment",
        "z": "75ae1ffb.e2bc9",
        "name": "tomorrow",
        "topic": "",
        "input": "today_input",
        "inputType": "global",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "tomorrow_input",
        "outputType": "global",
        "outTz": "Asia/Jakarta",
        "x": 638,
        "y": 940.0000066757202,
        "wires": [
            []
        ]
    },
    {
        "id": "8a145c97.5c94f",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "Kurang dari jam 6",
        "rules": [
            {
                "t": "set",
                "p": "tgl1_input",
                "pt": "global",
                "to": "yesterday_input",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "tgl2_input",
                "pt": "global",
                "to": "today_input",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "e8bc471c.7861b8",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "lebih dari jam 6",
        "rules": [
            {
                "t": "set",
                "p": "tgl1_input",
                "pt": "global",
                "to": "today",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "tgl2_input",
                "pt": "global",
                "to": "tomorrow",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 960,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "228d8081.28c74",
        "type": "link in",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "links": [
            "35cb7efb.7964e2"
        ],
        "x": 118.00003814697266,
        "y": 1697.0000972747803,
        "wires": [
            [
                "bd2b94ee.774128"
            ]
        ]
    },
    {
        "id": "bd2b94ee.774128",
        "type": "postgrestor",
        "z": "75ae1ffb.e2bc9",
        "name": "loading time",
        "query": "SELECT COALESCE(SUM(extract(epoch from coalesce(finish, NOW())-start)),0) as detik FROM trans_operation \nwhere id_machine={{msg.payload}} and start between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}';",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 303.00006103515625,
        "y": 1705.0001678466797,
        "wires": [
            [
                "9f0d7fa7.4a9c9",
                "7f78ce50.dbc27"
            ]
        ]
    },
    {
        "id": "5806d18f.e90d6",
        "type": "inject",
        "z": "75ae1ffb.e2bc9",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 343.00003814697266,
        "y": 1537.0000972747803,
        "wires": [
            [
                "a5e32564.6cf598"
            ]
        ]
    },
    {
        "id": "f53a9d5.ede8b6",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "Ubah tanggal di payload",
        "rules": [
            {
                "t": "set",
                "p": "tgl1",
                "pt": "msg",
                "to": "tgl1_input",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "tgl2",
                "pt": "msg",
                "to": "tgl2_input",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "jam",
                "pt": "msg",
                "to": "jam_awal_kerja",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 1460,
        "wires": [
            [
                "8c4fc7ad.e34d48"
            ]
        ]
    },
    {
        "id": "7f78ce50.dbc27",
        "type": "function",
        "z": "75ae1ffb.e2bc9",
        "name": "ubah format time",
        "func": "// Time HH:MM:SS from number\n\n// Hours\nvar detik = msg.payload.rows[0]['detik'];\nvar Hours = (detik/3600);\nHours = Math.floor(Hours);\n\n// Minutes\nvar Minutes = (detik-(Hours*3600))/60;\nMinutes = Math.floor(Minutes);\n\n// Seconds\nSeconds = Math.round((detik-(Hours*3600)-(Minutes*60)));\n\n// Concatenate\nvar Time = ('0' +Hours).slice(-2)+':'+('0' +Minutes).slice(-2)+':'+('0' +Seconds).slice(-2);\n\nmsg.payload = Time;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 538.0000648498535,
        "y": 1706.0000925064087,
        "wires": [
            [
                "a5e32564.6cf598"
            ]
        ]
    },
    {
        "id": "9f0d7fa7.4a9c9",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "loading_time_input",
                "pt": "global",
                "to": "payload.rows[0]['detik']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 563.0000381469727,
        "y": 1757.0000972747803,
        "wires": [
            []
        ]
    },
    {
        "id": "7f9a641f.342cfc",
        "type": "comment",
        "z": "75ae1ffb.e2bc9",
        "name": "Mengambil data time",
        "info": "",
        "x": 190,
        "y": 1640,
        "wires": []
    },
    {
        "id": "89556ad3.faad08",
        "type": "link in",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "links": [
            "35cb7efb.7964e2"
        ],
        "x": 118.00003814697266,
        "y": 1797.0000972747803,
        "wires": [
            [
                "c1cd586e.428e68"
            ]
        ]
    },
    {
        "id": "c1cd586e.428e68",
        "type": "postgrestor",
        "z": "75ae1ffb.e2bc9",
        "name": "stop time",
        "query": "SELECT COALESCE(SUM(extract(epoch from coalesce(finish, NOW())-start)),0) as detik FROM trans_stop \nwhere id_machine={{msg.payload}} and start between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}';",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 283.00003814697266,
        "y": 1797.0000972747803,
        "wires": [
            [
                "fd21216b.754e3"
            ]
        ]
    },
    {
        "id": "fd21216b.754e3",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "stop_time_input",
                "pt": "global",
                "to": "payload.rows[0]['detik']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 553.0000381469727,
        "y": 1797.0000972747803,
        "wires": [
            []
        ]
    },
    {
        "id": "2bcdca2f.178cf6",
        "type": "link in",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "links": [
            "35cb7efb.7964e2"
        ],
        "x": 118.00003814697266,
        "y": 1837.0000972747803,
        "wires": [
            [
                "3ce0add4.db7b22"
            ]
        ]
    },
    {
        "id": "3ce0add4.db7b22",
        "type": "postgrestor",
        "z": "75ae1ffb.e2bc9",
        "name": "output time",
        "query": "select sum((ct/qty_perct)*qty) as detik\nfrom trans_output where id_machine={{msg.payload}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 293.00003814697266,
        "y": 1837.0000972747803,
        "wires": [
            [
                "c6cf61a3.fd4c2"
            ]
        ]
    },
    {
        "id": "c6cf61a3.fd4c2",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "output_time_input",
                "pt": "global",
                "to": "payload.rows[0]['detik']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 563.0000381469727,
        "y": 1837.0000972747803,
        "wires": [
            []
        ]
    },
    {
        "id": "68ebe926.1fc4f8",
        "type": "link in",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "links": [
            "35cb7efb.7964e2"
        ],
        "x": 118.00003814697266,
        "y": 1877.0000972747803,
        "wires": [
            [
                "e2551499.014108"
            ]
        ]
    },
    {
        "id": "e2551499.014108",
        "type": "postgrestor",
        "z": "75ae1ffb.e2bc9",
        "name": "quality_loss",
        "query": "select sum((ct/qty_perct)*qty) as detik\nfrom trans_ng where id_machine={{msg.payload}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 293.00003814697266,
        "y": 1877.0000972747803,
        "wires": [
            [
                "4b42bf84.accbf"
            ]
        ]
    },
    {
        "id": "4b42bf84.accbf",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "defect_time_input",
                "pt": "global",
                "to": "payload.rows[0]['detik']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 563.0000381469727,
        "y": 1877.0000972747803,
        "wires": [
            []
        ]
    },
    {
        "id": "f17cc4b0.e4f998",
        "type": "link in",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "links": [
            "35cb7efb.7964e2"
        ],
        "x": 115,
        "y": 2040,
        "wires": [
            [
                "c09606f5.8fabb8"
            ]
        ]
    },
    {
        "id": "c09606f5.8fabb8",
        "type": "function",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "func": "var loading = global.get('loading_time_input');\nvar stop = global.get('stop_time_input');\nvar defect_time = global.get('defect_time_input');\nvar output_time = global.get('output_time_input');\n\n\nvar oee = ((output_time-defect_time) / loading)*100;\nmsg.payload = oee.toFixed(2);\nmsg.oee_time = (output_time-defect_time);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 2040,
        "wires": [
            [
                "ecee21ba.1d085",
                "659311f4.fcf36"
            ]
        ]
    },
    {
        "id": "ecee21ba.1d085",
        "type": "function",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "func": "// Time HH:MM:SS from number\n\n// Hours\nvar detik = msg.oee_time;\nvar Hours = (detik/3600);\nHours = Math.floor(Hours);\n\n// Minutes\nvar Minutes = (detik-(Hours*3600))/60;\nMinutes = Math.floor(Minutes);\n\n// Seconds\nSeconds = (detik-(Hours*3600)-(Minutes*60));\n\n// Concatenate\nvar Time = ('0' +Hours).slice(-2)+':'+('0' +Minutes).slice(-2)+':'+('0' +Seconds).slice(-2);\n\nmsg.payload = Time;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440.99999237060547,
        "y": 1981.9998350143433,
        "wires": [
            [
                "734c3cbe.f4cfa4"
            ]
        ]
    },
    {
        "id": "734c3cbe.f4cfa4",
        "type": "ui_text",
        "z": "75ae1ffb.e2bc9",
        "group": "a40acfc1.ce9ad",
        "order": 2,
        "width": "7",
        "height": "1",
        "name": "",
        "label": "OEE Time: ",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "className": "",
        "x": 610.9999923706055,
        "y": 1981.9998350143433,
        "wires": []
    },
    {
        "id": "659311f4.fcf36",
        "type": "ui_gauge",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "group": "a40acfc1.ce9ad",
        "order": 1,
        "width": "7",
        "height": "5",
        "gtype": "donut",
        "title": "OEE(%)",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#00b500"
        ],
        "seg1": "70",
        "seg2": "80",
        "className": "",
        "x": 600.9999923706055,
        "y": 2041.9998350143433,
        "wires": []
    },
    {
        "id": "edba85f6.dd8d08",
        "type": "inject",
        "z": "75ae1ffb.e2bc9",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 439.9999694824219,
        "y": 1945.000078201294,
        "wires": [
            [
                "734c3cbe.f4cfa4",
                "659311f4.fcf36"
            ]
        ]
    },
    {
        "id": "1fdbab30.c51a55",
        "type": "comment",
        "z": "75ae1ffb.e2bc9",
        "name": "Reset saat awal semua waktu",
        "info": "",
        "x": 220,
        "y": 1300,
        "wires": []
    },
    {
        "id": "1d8d01e0.bb1f5e",
        "type": "inject",
        "z": "75ae1ffb.e2bc9",
        "name": "Init global id_machine",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 219.8958282470703,
        "y": 1347.111083984375,
        "wires": [
            [
                "e94011d6.4434",
                "7cffd110.e876b",
                "f61730c7.5b5e5",
                "d7d764ba.a7a8d8",
                "1d39adb2.bd3182"
            ]
        ]
    },
    {
        "id": "e94011d6.4434",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "loading_time_input",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "7cffd110.e876b",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "stop_time_input",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 1340,
        "wires": [
            []
        ]
    },
    {
        "id": "f61730c7.5b5e5",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "output_time_input",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "d7d764ba.a7a8d8",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "defect_time_input",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "538bf8e5.43ec98",
        "type": "postgrestor",
        "z": "75ae1ffb.e2bc9",
        "name": "Ambil machine_name",
        "query": "SELECT machine_name FROM machine_master order by machine_name;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 440,
        "y": 100,
        "wires": [
            [
                "80f88409.c7bc48"
            ]
        ]
    },
    {
        "id": "80f88409.c7bc48",
        "type": "function",
        "z": "75ae1ffb.e2bc9",
        "name": "create array",
        "func": "\nvar i;\nlist_machine = [];\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  list_machine.push({\"machine\":msg.payload.rows[i]['machine_name']});\n}\n\nmsg.payload = list_machine;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 140,
        "wires": [
            [
                "b4193ecf.203e3"
            ]
        ]
    },
    {
        "id": "b4193ecf.203e3",
        "type": "function",
        "z": "75ae1ffb.e2bc9",
        "name": "format array of objects for dropdown in dashboard",
        "func": "//Reformat array to work with dashboard\nvar reformattedArray = msg.payload.map(obj =>{\n    //declare the reformatted object\n    var rObj = {};\n    //format it for drop down\n    //\"label\":\"value\" is the format so lets move the value to the label and add some txt as well\n    //you can also replce the txt with a var if you want\n    rObj[obj.machine] = obj.machine;\n    return rObj;\n});\nmsg.payload =  reformattedArray;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 140,
        "wires": [
            [
                "37bcd007.83246"
            ]
        ]
    },
    {
        "id": "37bcd007.83246",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 180,
        "wires": [
            [
                "d60221a6.31f69"
            ]
        ]
    },
    {
        "id": "7183abe4.da8634",
        "type": "inject",
        "z": "75ae1ffb.e2bc9",
        "name": "Current Time",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 900,
        "wires": [
            [
                "80435a7e.0e9498",
                "985de1bd.2d14d"
            ]
        ]
    },
    {
        "id": "985de1bd.2d14d",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "today_input",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 800,
        "wires": [
            [
                "3610724b.9a8aee",
                "2dffcf58.ffb1c",
                "ec98a7ef.019558"
            ]
        ]
    },
    {
        "id": "5d891b69.50c2d4",
        "type": "comment",
        "z": "75ae1ffb.e2bc9",
        "name": "Refresh tiap 5 detik",
        "info": "",
        "x": 170,
        "y": 860,
        "wires": []
    },
    {
        "id": "1d39adb2.bd3182",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "id_machine_input",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "266c92ce.919bfe",
        "type": "ui_form",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "label": "Form Type",
        "group": "9744a8fb.501c28",
        "order": 3,
        "width": 7,
        "height": 1,
        "options": [
            {
                "label": "ID / QR Code",
                "value": "code",
                "type": "text",
                "required": true,
                "rows": null
            }
        ],
        "formValue": {
            "code": ""
        },
        "payload": "",
        "submit": "submit",
        "cancel": "cancel",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "x": 170,
        "y": 2200,
        "wires": [
            [
                "ae39c1f9.d4ed6"
            ]
        ]
    },
    {
        "id": "7c94b690.0693e8",
        "type": "ui_template",
        "z": "75ae1ffb.e2bc9",
        "group": "9744a8fb.501c28",
        "name": "",
        "order": 2,
        "width": 7,
        "height": 3,
        "format": "<div><i>\n    For Input / change Type Product, You must set the machine in <b>OFF or STOP Mode</b>.<br>\n    Scan QR Code or RFID tag for select Type<br>\n    ID must be registered.<br>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 160,
        "y": 2160,
        "wires": [
            []
        ]
    },
    {
        "id": "8c4fc7ad.e34d48",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "cek payload",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 1460,
        "wires": [
            [
                "dd01705b.d7f0f"
            ]
        ]
    },
    {
        "id": "dd01705b.d7f0f",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "property": "tgl1",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 800,
        "y": 1520,
        "wires": [
            [
                "35cb7efb.7964e2"
            ]
        ]
    },
    {
        "id": "e0d29f63.572d6",
        "type": "ui_form",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "label": "Form Stop Category",
        "group": "902b6747.3a0888",
        "order": 3,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "ID / QR Code",
                "value": "code",
                "type": "text",
                "required": true,
                "rows": null
            }
        ],
        "formValue": {
            "code": ""
        },
        "payload": "",
        "submit": "submit",
        "cancel": "cancel",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "x": 140,
        "y": 2640,
        "wires": [
            [
                "8149d635.7c35e8"
            ]
        ]
    },
    {
        "id": "8e45e167.9ddb3",
        "type": "comment",
        "z": "75ae1ffb.e2bc9",
        "name": "Form untuk change type",
        "info": "",
        "x": 210,
        "y": 2120,
        "wires": []
    },
    {
        "id": "f08bec4.30e691",
        "type": "comment",
        "z": "75ae1ffb.e2bc9",
        "name": "Form untuk input stop category",
        "info": "",
        "x": 190,
        "y": 2480,
        "wires": []
    },
    {
        "id": "56a4afb0.7cbca",
        "type": "ui_template",
        "z": "75ae1ffb.e2bc9",
        "group": "902b6747.3a0888",
        "name": "",
        "order": 2,
        "width": 0,
        "height": 0,
        "format": "<div><i>\n    For Input Stop Category, Machine status in <b>STOP Mode (Trouble)</b>.<br>\n    Scan QR Code or RFID tag for select Stop Category<br>\n    ID must be registered.</i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 120,
        "y": 2580,
        "wires": [
            []
        ]
    },
    {
        "id": "1f5b448e.cf96fb",
        "type": "link in",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "links": [
            "35cb7efb.7964e2"
        ],
        "x": 75,
        "y": 2520,
        "wires": [
            [
                "6baed845.368058"
            ]
        ]
    },
    {
        "id": "6baed845.368058",
        "type": "postgrestor",
        "z": "75ae1ffb.e2bc9",
        "name": "Table current stop",
        "query": "select b.machine_name as machine, TO_CHAR(a.start,'YYYY-MM-DD HH24:MI:ss') as start, \nround(cast(float8 (extract(epoch from NOW()-start)/60) as numeric),2) as menit, a.category as category\nfrom trans_stop a inner join machine_master b ON a.id_machine=b.id_machine where a.id_machine={{msg.payload}} and finish is null and \na.start between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 270,
        "y": 2520,
        "wires": [
            [
                "d48ff941.202fd8",
                "4e2dda4f.f2a334"
            ]
        ]
    },
    {
        "id": "d48ff941.202fd8",
        "type": "function",
        "z": "75ae1ffb.e2bc9",
        "name": "create array",
        "func": "\nvar i;\nlist_stop = [];\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  list_stop.push({\"Machine\":msg.payload.rows[i]['machine'],\"Start\":msg.payload.rows[i]['start'],\n  \"Category\":msg.payload.rows[i]['category'],\"Current Stop (Min)\":msg.payload.rows[i]['menit']});\n}\n\nmsg.payload = list_stop;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 2520,
        "wires": [
            [
                "791be18c.fc227"
            ]
        ]
    },
    {
        "id": "791be18c.fc227",
        "type": "ui_table",
        "z": "75ae1ffb.e2bc9",
        "group": "902b6747.3a0888",
        "name": "Table Current Stop",
        "order": 1,
        "width": 14,
        "height": 1,
        "columns": [],
        "outputs": 1,
        "cts": true,
        "x": 710,
        "y": 2520,
        "wires": [
            []
        ]
    },
    {
        "id": "c73274d5.854318",
        "type": "ui_text",
        "z": "75ae1ffb.e2bc9",
        "group": "9744a8fb.501c28",
        "order": 1,
        "width": 7,
        "height": 1,
        "name": "",
        "label": "Current Running Type: ",
        "format": "{{msg.payload.rows[0]['type']}}",
        "layout": "row-spread",
        "x": 560,
        "y": 1200,
        "wires": []
    },
    {
        "id": "bf61fe02.d106f",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "status_stop_input True",
        "rules": [
            {
                "t": "set",
                "p": "status_stop_input",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1060,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "92e233d5.d027d",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "status_off_input True",
        "rules": [
            {
                "t": "set",
                "p": "status_off_input",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1061.000099182129,
        "y": 1292.0000247955322,
        "wires": [
            []
        ]
    },
    {
        "id": "6056609c.4b20f",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "if status_stop_input",
        "property": "status_stop_input",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 570,
        "y": 2260,
        "wires": [
            [
                "291526a8.110a2a"
            ],
            [
                "489278b0.cee058"
            ]
        ]
    },
    {
        "id": "32ae1b81.01b4f4",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "if status_off_input",
        "property": "status_off_input",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 550,
        "y": 2200,
        "wires": [
            [
                "291526a8.110a2a"
            ],
            [
                "6056609c.4b20f"
            ]
        ]
    },
    {
        "id": "ae39c1f9.d4ed6",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "code",
                "pt": "msg",
                "to": "payload['code']",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "status_off_input",
                "pt": "msg",
                "to": "status_off_input",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "status_stop_input",
                "pt": "msg",
                "to": "status_stop_input",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 2200,
        "wires": [
            [
                "32ae1b81.01b4f4"
            ]
        ]
    },
    {
        "id": "bea00844.b098a8",
        "type": "ui_toast",
        "z": "75ae1ffb.e2bc9",
        "position": "top right",
        "displayTime": "8",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "Error",
        "name": "Error",
        "x": 910,
        "y": 2260,
        "wires": []
    },
    {
        "id": "489278b0.cee058",
        "type": "function",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "func": "\nmsg.payload = \"You must set the machine to OFF or STOP Mode\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 2260,
        "wires": [
            [
                "bea00844.b098a8"
            ]
        ]
    },
    {
        "id": "f02d5e0c.4e7e8",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "status_off_input False",
        "rules": [
            {
                "t": "set",
                "p": "status_off_input",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1061.000099182129,
        "y": 1332.0000247955322,
        "wires": [
            []
        ]
    },
    {
        "id": "8aa54a64.a9bc28",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "status_stop_input False",
        "rules": [
            {
                "t": "set",
                "p": "status_stop_input",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1070,
        "y": 1240,
        "wires": [
            []
        ]
    },
    {
        "id": "291526a8.110a2a",
        "type": "postgrestor",
        "z": "75ae1ffb.e2bc9",
        "name": "Check registered code",
        "query": "select type_card from list_rfid where rfid='{{msg.payload.code}}'",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 780,
        "y": 2120,
        "wires": [
            [
                "e2cde283.18f14"
            ]
        ]
    },
    {
        "id": "e2cde283.18f14",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "property": "payload.rowCount",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 960,
        "y": 2180,
        "wires": [
            [
                "2233b1d4.b3ec8e"
            ],
            [
                "28233097.55448"
            ]
        ]
    },
    {
        "id": "2233b1d4.b3ec8e",
        "type": "function",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "func": "\nmsg.payload = \"Code is not registered\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1080,
        "y": 2100,
        "wires": [
            [
                "412e0304.5f323c"
            ]
        ]
    },
    {
        "id": "412e0304.5f323c",
        "type": "ui_toast",
        "z": "75ae1ffb.e2bc9",
        "position": "top right",
        "displayTime": "8",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "Code not found!",
        "name": "not found",
        "x": 1240,
        "y": 2100,
        "wires": []
    },
    {
        "id": "28233097.55448",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "Cek Type Card",
        "property": "payload.rows[0]['type_card']",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Product",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1140,
        "y": 2180,
        "wires": [
            [
                "38c5e4a4.59018c"
            ]
        ]
    },
    {
        "id": "38c5e4a4.59018c",
        "type": "postgrestor",
        "z": "75ae1ffb.e2bc9",
        "name": "Mencari type",
        "query": "select a.id_type,b.ct,b.id_machine,b.qty_perct from list_rfid a inner join list_ct b on a.id_type=b.id_type where rfid='{{msg.code}}'",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 1140,
        "y": 2240,
        "wires": [
            [
                "59dae293.1ea2cc"
            ]
        ]
    },
    {
        "id": "59dae293.1ea2cc",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "Set variable for update",
        "rules": [
            {
                "t": "set",
                "p": "id_type",
                "pt": "msg",
                "to": "payload.rows[0]['id_type']",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "ct",
                "pt": "msg",
                "to": "payload.rows[0]['ct']",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "id_machine",
                "pt": "msg",
                "to": "id_machine_input",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "qty_perct",
                "pt": "msg",
                "to": "payload.rows[0]['qty_perct']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1380,
        "y": 2140,
        "wires": [
            [
                "acb65d9b.a62"
            ]
        ]
    },
    {
        "id": "acb65d9b.a62",
        "type": "postgrestor",
        "z": "75ae1ffb.e2bc9",
        "name": "Update machine_master",
        "query": "update machine_master set id_type={{msg.id_type}},ct={{msg.ct}},qty_perct={{msg.qty_perct}} where id_machine={{msg.id_machine}}",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 1390,
        "y": 2320,
        "wires": [
            [
                "9e9b7ed8.50db"
            ]
        ]
    },
    {
        "id": "9e9b7ed8.50db",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "property": "payload.command",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "UPDATE",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1330,
        "y": 2440,
        "wires": [
            [
                "6936dab6.ce8ab4"
            ],
            [
                "e134b42d.51a248"
            ]
        ]
    },
    {
        "id": "6936dab6.ce8ab4",
        "type": "function",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "func": "\nmsg.payload = \"Data Type Product has been updated to database\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1470,
        "y": 2400,
        "wires": [
            [
                "e134b42d.51a248"
            ]
        ]
    },
    {
        "id": "e134b42d.51a248",
        "type": "ui_toast",
        "z": "75ae1ffb.e2bc9",
        "position": "top right",
        "displayTime": "10",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "Status Query",
        "name": "",
        "x": 1650,
        "y": 2440,
        "wires": []
    },
    {
        "id": "4e2dda4f.f2a334",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "Jika muncul table",
        "property": "payload.rowCount",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 490,
        "y": 2440,
        "wires": [
            [
                "aa48e56b.487908"
            ],
            [
                "d9a1b7a.4482f48"
            ]
        ]
    },
    {
        "id": "aa48e56b.487908",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "table_stop",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 2380,
        "wires": [
            []
        ]
    },
    {
        "id": "a5899684.342dd8",
        "type": "postgrestor",
        "z": "75ae1ffb.e2bc9",
        "name": "Check registered code",
        "query": "select type_card from list_rfid where rfid='{{msg.payload.code}}'",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 620,
        "y": 2640,
        "wires": [
            [
                "c82e3590.165518"
            ]
        ]
    },
    {
        "id": "c82e3590.165518",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "property": "payload.rowCount",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 810,
        "y": 2640,
        "wires": [
            [
                "73c9f23d.6905ac"
            ],
            [
                "43339e7d.aa5b7"
            ]
        ]
    },
    {
        "id": "73c9f23d.6905ac",
        "type": "function",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "func": "\nmsg.payload = \"Code is not registered\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 2580,
        "wires": [
            [
                "e8c956b.c791ca8"
            ]
        ]
    },
    {
        "id": "e8c956b.c791ca8",
        "type": "ui_toast",
        "z": "75ae1ffb.e2bc9",
        "position": "top right",
        "displayTime": "8",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "Code not found!",
        "name": "not found",
        "x": 1120,
        "y": 2580,
        "wires": []
    },
    {
        "id": "43339e7d.aa5b7",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "Cek Type Card",
        "property": "payload.rows[0]['type_card']",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "Product",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Product",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 980,
        "y": 2660,
        "wires": [
            [
                "23a549c7.7c4fa6"
            ],
            [
                "73c9f23d.6905ac"
            ]
        ]
    },
    {
        "id": "3473a0f4.64a6b",
        "type": "function",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "func": "\nmsg.payload = \"STOP condition not detected, Machine is running or OFF now\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 2720,
        "wires": [
            [
                "f4997307.be52d"
            ]
        ]
    },
    {
        "id": "f4997307.be52d",
        "type": "ui_toast",
        "z": "75ae1ffb.e2bc9",
        "position": "top right",
        "displayTime": "8",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "Error",
        "name": "Error",
        "x": 730,
        "y": 2720,
        "wires": []
    },
    {
        "id": "23a549c7.7c4fa6",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "Set variable for update",
        "rules": [
            {
                "t": "set",
                "p": "id_machine",
                "pt": "msg",
                "to": "id_machine_input",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "type_card",
                "pt": "msg",
                "to": "payload.rows[0]['type_card']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 2720,
        "wires": [
            [
                "32b621cb.e22b0e"
            ]
        ]
    },
    {
        "id": "32b621cb.e22b0e",
        "type": "postgrestor",
        "z": "75ae1ffb.e2bc9",
        "name": "Update trans_stop",
        "query": "update trans_stop set category='{{msg.type_card}}' where finish is null and id_machine={{msg.id_machine}}",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 1000,
        "y": 2800,
        "wires": [
            [
                "282b8c73.49ae64"
            ]
        ]
    },
    {
        "id": "282b8c73.49ae64",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "property": "payload.command",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "UPDATE",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 950,
        "y": 2920,
        "wires": [
            [
                "279e727a.e0068e"
            ],
            [
                "96ad3f32.9ae09"
            ]
        ]
    },
    {
        "id": "279e727a.e0068e",
        "type": "function",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "func": "\nmsg.payload = \"Data Stop Category has been updated to database\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 2880,
        "wires": [
            [
                "96ad3f32.9ae09"
            ]
        ]
    },
    {
        "id": "96ad3f32.9ae09",
        "type": "ui_toast",
        "z": "75ae1ffb.e2bc9",
        "position": "top right",
        "displayTime": "10",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "Status Query",
        "name": "",
        "x": 1270,
        "y": 2920,
        "wires": []
    },
    {
        "id": "d9a1b7a.4482f48",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "table_stop",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 2440,
        "wires": [
            []
        ]
    },
    {
        "id": "8149d635.7c35e8",
        "type": "change",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "code",
                "pt": "msg",
                "to": "payload['code']",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "status_off_input",
                "pt": "msg",
                "to": "status_off_input",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "status_stop_input",
                "pt": "msg",
                "to": "status_stop_input",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 120,
        "y": 2720,
        "wires": [
            [
                "5f9601a7.2b7f4"
            ]
        ]
    },
    {
        "id": "5f9601a7.2b7f4",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "if status_off_input",
        "property": "status_off_input",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 2740,
        "wires": [
            [
                "3473a0f4.64a6b"
            ],
            [
                "5a9cb709.2b8308"
            ]
        ]
    },
    {
        "id": "5a9cb709.2b8308",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "if status_stop_input",
        "property": "status_stop_input",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 390,
        "y": 2660,
        "wires": [
            [
                "a5899684.342dd8"
            ],
            [
                "3473a0f4.64a6b"
            ]
        ]
    },
    {
        "id": "7540e8e1.1f78c8",
        "type": "debug",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 2580,
        "wires": []
    },
    {
        "id": "5f62c0e2.1daf3",
        "type": "debug",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 340,
        "y": 2840,
        "wires": []
    },
    {
        "id": "51eef0f8.47acf",
        "type": "switch",
        "z": "75ae1ffb.e2bc9",
        "name": "Cek id_machine",
        "property": "id_machine",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "id_machine_input",
                "vt": "global"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1660,
        "y": 2100,
        "wires": [
            [],
            [
                "b673bd72.48a0a"
            ]
        ]
    },
    {
        "id": "b673bd72.48a0a",
        "type": "function",
        "z": "75ae1ffb.e2bc9",
        "name": "",
        "func": "\nmsg.payload = \"Machine no is not match with selected type\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1600,
        "y": 2220,
        "wires": [
            [
                "4c7cd758.775588"
            ]
        ]
    },
    {
        "id": "4c7cd758.775588",
        "type": "ui_toast",
        "z": "75ae1ffb.e2bc9",
        "position": "top right",
        "displayTime": "8",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "Code not found!",
        "name": "not match",
        "x": 1600,
        "y": 2280,
        "wires": []
    },
    {
        "id": "ead32048.746d2",
        "type": "inject",
        "z": "4e3a4843.11c9d8",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 140,
        "y": 320,
        "wires": [
            [
                "6609f288.ce705c",
                "15884238.58f85e",
                "331fc1ec.25fa8e"
            ]
        ]
    },
    {
        "id": "331fc1ec.25fa8e",
        "type": "postgrestor",
        "z": "4e3a4843.11c9d8",
        "name": "Ambil machine_name",
        "query": "SELECT machine_name FROM machine_master order by machine_name;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 180,
        "y": 40,
        "wires": [
            [
                "4a25295a.b3feb8"
            ]
        ]
    },
    {
        "id": "d5c58a18.3c4918",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 160,
        "wires": [
            [
                "6609f288.ce705c"
            ]
        ]
    },
    {
        "id": "4a25295a.b3feb8",
        "type": "function",
        "z": "4e3a4843.11c9d8",
        "name": "create array",
        "func": "\nvar i;\nlist_machine = [];\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  list_machine.push({\"machine\":msg.payload.rows[i]['machine_name']});\n}\n\nmsg.payload = list_machine;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 40,
        "wires": [
            [
                "6836f7f0.43ff98"
            ]
        ]
    },
    {
        "id": "6836f7f0.43ff98",
        "type": "function",
        "z": "4e3a4843.11c9d8",
        "name": "format array of objects for dropdown in dashboard",
        "func": "//Reformat array to work with dashboard\nvar reformattedArray = msg.payload.map(obj =>{\n    //declare the reformatted object\n    var rObj = {};\n    //format it for drop down\n    //\"label\":\"value\" is the format so lets move the value to the label and add some txt as well\n    //you can also replce the txt with a var if you want\n    rObj[obj.machine] = obj.machine;\n    return rObj;\n});\nmsg.payload =  reformattedArray;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 40,
        "wires": [
            [
                "d5c58a18.3c4918"
            ]
        ]
    },
    {
        "id": "6609f288.ce705c",
        "type": "ui_dropdown",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "label": "Machine Name",
        "tooltip": "",
        "place": "Select option",
        "group": "f9837f30.f9df3",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "x": 380,
        "y": 320,
        "wires": [
            [
                "15884238.58f85e",
                "120f0971.3b26c7",
                "fa96b489.4b2398",
                "47924ccc.6e2af4",
                "2459adb9.7cbcb2"
            ]
        ]
    },
    {
        "id": "15884238.58f85e",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machine_name",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 193.99996948242188,
        "y": 436.99999618530273,
        "wires": [
            [
                "fbf62f9.6e179d"
            ]
        ]
    },
    {
        "id": "fbf62f9.6e179d",
        "type": "switch",
        "z": "4e3a4843.11c9d8",
        "name": "is text empty?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 423.9999694824219,
        "y": 436.99999618530273,
        "wires": [
            [
                "a6fae.8c6890528"
            ],
            [
                "d9735f86.af714"
            ]
        ]
    },
    {
        "id": "d9735f86.af714",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "enabled true",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 613.9999694824219,
        "y": 436.99999618530273,
        "wires": [
            [
                "8c0225f0.7a1c08"
            ]
        ]
    },
    {
        "id": "a6fae.8c6890528",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "enabled false",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 613.9999694824219,
        "y": 396.99999618530273,
        "wires": [
            [
                "8c0225f0.7a1c08"
            ]
        ]
    },
    {
        "id": "740b7f5b.703c1",
        "type": "inject",
        "z": "4e3a4843.11c9d8",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 800,
        "y": 340,
        "wires": [
            [
                "2459adb9.7cbcb2",
                "8b1ad0b5.e6db6",
                "28eb1388.8eeabc",
                "d060c9f0.241cc8"
            ]
        ]
    },
    {
        "id": "8c0225f0.7a1c08",
        "type": "ui_button",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "group": "f9837f30.f9df3",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Input Defect",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "machine_name",
        "payloadType": "flow",
        "topic": "topic",
        "topicType": "msg",
        "x": 813.9999694824219,
        "y": 416.99999618530273,
        "wires": [
            [
                "665e4c43.d57c84"
            ]
        ]
    },
    {
        "id": "2459adb9.7cbcb2",
        "type": "ui_text",
        "z": "4e3a4843.11c9d8",
        "group": "a09e942e.af52d8",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Machine Name:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 1160,
        "y": 300,
        "wires": []
    },
    {
        "id": "d98076e3.ddd498",
        "type": "ui_dropdown",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "label": "Defect Category: ",
        "tooltip": "",
        "place": "Select option",
        "group": "f9837f30.f9df3",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "x": 390,
        "y": 600,
        "wires": [
            [
                "30673ec4.c248e2"
            ]
        ]
    },
    {
        "id": "babf2a8f.125ee8",
        "type": "inject",
        "z": "4e3a4843.11c9d8",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 156.00003051757812,
        "y": 601.0000591278076,
        "wires": [
            [
                "d98076e3.ddd498",
                "69cf1a16.772074"
            ]
        ]
    },
    {
        "id": "69cf1a16.772074",
        "type": "postgrestor",
        "z": "4e3a4843.11c9d8",
        "name": "Ambil list defect",
        "query": "SELECT category FROM defect_list order by category;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 240,
        "y": 760,
        "wires": [
            [
                "a3b74ce1.ea746"
            ]
        ]
    },
    {
        "id": "a3b74ce1.ea746",
        "type": "function",
        "z": "4e3a4843.11c9d8",
        "name": "create array",
        "func": "\nvar i;\nlist_defect = [];\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  list_defect.push({\"defect\":msg.payload.rows[i]['category']});\n}\n\nmsg.payload = list_defect;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 760,
        "wires": [
            [
                "efcec04b.7e189"
            ]
        ]
    },
    {
        "id": "efcec04b.7e189",
        "type": "function",
        "z": "4e3a4843.11c9d8",
        "name": "format array of objects for dropdown in dashboard",
        "func": "//Reformat array to work with dashboard\nvar reformattedArray = msg.payload.map(obj =>{\n    //declare the reformatted object\n    var rObj = {};\n    //format it for drop down\n    //\"label\":\"value\" is the format so lets move the value to the label and add some txt as well\n    //you can also replce the txt with a var if you want\n    rObj[obj.defect] = obj.defect;\n    return rObj;\n});\nmsg.payload =  reformattedArray;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 760,
        "wires": [
            [
                "1cca1872.64a718"
            ]
        ]
    },
    {
        "id": "1cca1872.64a718",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 680,
        "wires": [
            [
                "d98076e3.ddd498",
                "471b50d3.9dc3a"
            ]
        ]
    },
    {
        "id": "ba8ab04.a9e005",
        "type": "ui_text_input",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "label": "Defect Qty: ",
        "tooltip": "",
        "group": "f9837f30.f9df3",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "topicType": "msg",
        "x": 410,
        "y": 500,
        "wires": [
            [
                "fca0c70.7072838"
            ]
        ]
    },
    {
        "id": "974fe100.c363a",
        "type": "inject",
        "z": "4e3a4843.11c9d8",
        "name": "Init 0",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 120,
        "y": 500,
        "wires": [
            [
                "ba8ab04.a9e005"
            ]
        ]
    },
    {
        "id": "df547087.87953",
        "type": "inject",
        "z": "4e3a4843.11c9d8",
        "name": "Current Time",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 125,
        "y": 1040.0000114440918,
        "wires": [
            [
                "e9c13396.760c6",
                "93e9fdfb.e11d1"
            ]
        ]
    },
    {
        "id": "b10739f2.881158",
        "type": "comment",
        "z": "4e3a4843.11c9d8",
        "name": "Refresh tiap 5 detik",
        "info": "",
        "x": 95,
        "y": 1000.0000114440918,
        "wires": []
    },
    {
        "id": "93e9fdfb.e11d1",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "today_defect",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 175,
        "y": 940.0000114440918,
        "wires": [
            [
                "46564261.042c7c",
                "641ec13a.41fa4",
                "126df91c.7c3cd7"
            ]
        ]
    },
    {
        "id": "e9c13396.760c6",
        "type": "function",
        "z": "4e3a4843.11c9d8",
        "name": "ambil global jam",
        "func": "var time = new Date();\nvar displaytime = time.toLocaleTimeString();\nvar hour = time.getHours();\nglobal.set('jam_defect',hour);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 443,
        "y": 940.000018119812,
        "wires": [
            [
                "fd33ee63.c5826"
            ]
        ]
    },
    {
        "id": "2513e0bf.51141",
        "type": "comment",
        "z": "4e3a4843.11c9d8",
        "name": "Untuk mengambil tgl1 dan tgl2",
        "info": "",
        "x": 483,
        "y": 900.000018119812,
        "wires": []
    },
    {
        "id": "fd33ee63.c5826",
        "type": "switch",
        "z": "4e3a4843.11c9d8",
        "name": "Menentukan tanggal",
        "property": "jam_defect",
        "propertyType": "global",
        "rules": [
            {
                "t": "lte",
                "v": "6",
                "vt": "num"
            },
            {
                "t": "gte",
                "v": "7",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 663,
        "y": 940.000018119812,
        "wires": [
            [
                "750aab5a.e088a4"
            ],
            [
                "eaa048c5.47f3a8"
            ]
        ]
    },
    {
        "id": "750aab5a.e088a4",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "Kurang dari jam 6",
        "rules": [
            {
                "t": "set",
                "p": "tgl1_defect",
                "pt": "global",
                "to": "yesterday_defect",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "tgl2_defect",
                "pt": "global",
                "to": "today_defect",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 895,
        "y": 920.0000114440918,
        "wires": [
            []
        ]
    },
    {
        "id": "eaa048c5.47f3a8",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "lebih dari jam 6",
        "rules": [
            {
                "t": "set",
                "p": "tgl1_defect",
                "pt": "global",
                "to": "today_defect",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "tgl2_defect",
                "pt": "global",
                "to": "tomorrow_defect",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 885,
        "y": 980.0000114440918,
        "wires": [
            []
        ]
    },
    {
        "id": "126df91c.7c3cd7",
        "type": "moment",
        "z": "4e3a4843.11c9d8",
        "name": "tomorrow",
        "topic": "",
        "input": "today_defect",
        "inputType": "global",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "tomorrow_defect",
        "outputType": "global",
        "outTz": "Asia/Jakarta",
        "x": 425,
        "y": 1080.0000114440918,
        "wires": [
            []
        ]
    },
    {
        "id": "641ec13a.41fa4",
        "type": "moment",
        "z": "4e3a4843.11c9d8",
        "name": "yesterday",
        "topic": "",
        "input": "today_defect",
        "inputType": "global",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "days",
        "adjDir": "subtract",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "yesterday_defect",
        "outputType": "global",
        "outTz": "Asia/Jakarta",
        "x": 425,
        "y": 1040.0000114440918,
        "wires": [
            []
        ]
    },
    {
        "id": "46564261.042c7c",
        "type": "moment",
        "z": "4e3a4843.11c9d8",
        "name": "today",
        "topic": "",
        "input": "today_defect",
        "inputType": "global",
        "inTz": "Asia/Jakarta",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "today_defect",
        "outputType": "global",
        "outTz": "Asia/Jakarta",
        "x": 415,
        "y": 1000.0000114440918,
        "wires": [
            []
        ]
    },
    {
        "id": "47924ccc.6e2af4",
        "type": "postgrestor",
        "z": "4e3a4843.11c9d8",
        "name": "Ambil id_machine",
        "query": "SELECT id_machine FROM machine_master where machine_name='{{msg.payload}}';",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 570,
        "y": 180,
        "wires": [
            [
                "51ce04.2b2ee1fc"
            ]
        ]
    },
    {
        "id": "51ce04.2b2ee1fc",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "id_machine_defect",
                "pt": "global",
                "to": "payload.rows[0]['id_machine']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 220,
        "wires": [
            [
                "4014ecac.686ed4"
            ]
        ]
    },
    {
        "id": "665e4c43.d57c84",
        "type": "link out",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "links": [
            "9819914f.d15ee"
        ],
        "x": 1163.0000972747803,
        "y": 560.0000448226929,
        "wires": []
    },
    {
        "id": "5e544271.59920c",
        "type": "comment",
        "z": "4e3a4843.11c9d8",
        "name": "Input data defect",
        "info": "",
        "x": 1280,
        "y": 560,
        "wires": []
    },
    {
        "id": "fca0c70.7072838",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "defect_qty",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 500,
        "wires": [
            [
                "8c0225f0.7a1c08"
            ]
        ]
    },
    {
        "id": "30673ec4.c248e2",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "defect_category",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 600,
        "wires": [
            [
                "8c0225f0.7a1c08"
            ]
        ]
    },
    {
        "id": "9819914f.d15ee",
        "type": "link in",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "links": [
            "665e4c43.d57c84"
        ],
        "x": 55,
        "y": 1180,
        "wires": [
            [
                "f091556c.784df8"
            ]
        ]
    },
    {
        "id": "debc88ed.a62a68",
        "type": "comment",
        "z": "4e3a4843.11c9d8",
        "name": "Input data defect",
        "info": "",
        "x": 120,
        "y": 1140,
        "wires": []
    },
    {
        "id": "f091556c.784df8",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "Variable untuk input defect",
        "rules": [
            {
                "t": "set",
                "p": "id_machine",
                "pt": "msg",
                "to": "id_machine_defect",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "id_type",
                "pt": "msg",
                "to": "id_type_defect",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "defect_qty",
                "pt": "msg",
                "to": "defect_qty",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "defect_category",
                "pt": "msg",
                "to": "defect_category",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "ct",
                "pt": "msg",
                "to": "ct_defect",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "qty_perct",
                "pt": "msg",
                "to": "qty_perct_defect",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 1180,
        "wires": [
            [
                "d476f865.ee84b8"
            ]
        ]
    },
    {
        "id": "2133161f.1c864a",
        "type": "postgrestor",
        "z": "4e3a4843.11c9d8",
        "name": "Mencari current type",
        "query": "SELECT a.id_type,b.type,b.ct,b.qty_perct FROM machine_master a inner join list_ct b on a.id_type=b.id_type \nwhere a.machine_name='{{msg.payload}}';",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 660,
        "y": 140,
        "wires": [
            [
                "8b1ad0b5.e6db6",
                "3ca6c74c.29fd38",
                "e200c14.5390e4",
                "f27be14c.2ec23"
            ]
        ]
    },
    {
        "id": "8b1ad0b5.e6db6",
        "type": "ui_text",
        "z": "4e3a4843.11c9d8",
        "group": "f9837f30.f9df3",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Current Type:",
        "format": "{{msg.payload.rows[0]['type']}}",
        "layout": "row-spread",
        "x": 1160,
        "y": 260,
        "wires": []
    },
    {
        "id": "120f0971.3b26c7",
        "type": "switch",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 140,
        "wires": [
            [
                "2133161f.1c864a"
            ]
        ]
    },
    {
        "id": "3ca6c74c.29fd38",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "id_type_defect",
                "pt": "global",
                "to": "payload.rows[0]['id_type']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1190,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "8134515f.b9dc2",
        "type": "postgrestor",
        "z": "4e3a4843.11c9d8",
        "name": "Insert defect",
        "query": "INSERT INTO trans_ng (id_machine,id_type,time,qty,category,ct,qty_perct) \nvalues({{msg.id_machine}},{{msg.id_type}},now(),{{msg.defect_qty}},'{{msg.defect_category}}',{{msg.ct}},{{msg.qty_perct}}) ;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 830,
        "y": 1240,
        "wires": [
            [
                "a8592338.f9867",
                "53d31504.09e35c",
                "93e9f209.67a52"
            ]
        ]
    },
    {
        "id": "67a3a7b4.fb3ae8",
        "type": "switch",
        "z": "4e3a4843.11c9d8",
        "name": "Cek qty",
        "property": "defect_qty",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lte",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "gte",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 640,
        "y": 1240,
        "wires": [
            [
                "827957d3.b12b88"
            ],
            [
                "8134515f.b9dc2"
            ]
        ]
    },
    {
        "id": "d476f865.ee84b8",
        "type": "switch",
        "z": "4e3a4843.11c9d8",
        "name": "Cek category",
        "property": "defect_category",
        "propertyType": "msg",
        "rules": [
            {
                "t": "empty"
            },
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 470,
        "y": 1180,
        "wires": [
            [
                "6841f0ab.f5a17"
            ],
            [
                "67a3a7b4.fb3ae8"
            ]
        ]
    },
    {
        "id": "bf964818.c705d8",
        "type": "ui_toast",
        "z": "4e3a4843.11c9d8",
        "position": "top right",
        "displayTime": "6",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "defect qty 0",
        "x": 1010,
        "y": 1140,
        "wires": []
    },
    {
        "id": "827957d3.b12b88",
        "type": "function",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "func": "\nmsg.payload = \"Defect Qty still 0 or wrong format!, please fill Defect Qty\";\n\nmsg.topic = \"Not Complete\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 1140,
        "wires": [
            [
                "bf964818.c705d8"
            ]
        ]
    },
    {
        "id": "6841f0ab.f5a17",
        "type": "function",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "func": "\nmsg.payload = \"Defect Category still empty, please fill Defect Category\";\n\nmsg.topic = \"Not Complete\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 1100,
        "wires": [
            [
                "fe755028.9c8f5"
            ]
        ]
    },
    {
        "id": "fe755028.9c8f5",
        "type": "ui_toast",
        "z": "4e3a4843.11c9d8",
        "position": "top right",
        "displayTime": "6",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "category empty",
        "x": 1000,
        "y": 1100,
        "wires": []
    },
    {
        "id": "72db5bca.6c8574",
        "type": "ui_toast",
        "z": "4e3a4843.11c9d8",
        "position": "top right",
        "displayTime": "10",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "Status Query",
        "name": "",
        "x": 1360,
        "y": 1220,
        "wires": []
    },
    {
        "id": "a36bfe5f.e7fbe",
        "type": "comment",
        "z": "4e3a4843.11c9d8",
        "name": "Reset qty",
        "info": "",
        "x": 1000,
        "y": 1340,
        "wires": []
    },
    {
        "id": "9762288e.0e69a8",
        "type": "link out",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "links": [
            "4e88bae4.18d504"
        ],
        "x": 1215,
        "y": 1380,
        "wires": []
    },
    {
        "id": "a8592338.f9867",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "Reset Variable defect",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "defect_qty",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1040,
        "y": 1380,
        "wires": [
            [
                "9762288e.0e69a8"
            ]
        ]
    },
    {
        "id": "4e88bae4.18d504",
        "type": "link in",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "links": [
            "9762288e.0e69a8"
        ],
        "x": 255,
        "y": 540,
        "wires": [
            [
                "ba8ab04.a9e005"
            ]
        ]
    },
    {
        "id": "9fb794f3.2d4508",
        "type": "inject",
        "z": "4e3a4843.11c9d8",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 100,
        "y": 1380,
        "wires": [
            [
                "11a63843.f5cea8"
            ]
        ]
    },
    {
        "id": "af920efd.aafe9",
        "type": "comment",
        "z": "4e3a4843.11c9d8",
        "name": "Reset",
        "info": "",
        "x": 70,
        "y": 1340,
        "wires": []
    },
    {
        "id": "11a63843.f5cea8",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "Reset Variable defect",
        "rules": [
            {
                "t": "set",
                "p": "defect_category",
                "pt": "global",
                "to": "",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "defect_qty",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "id_machine_defect",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "id_type_defect",
                "pt": "global",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "fa96b489.4b2398",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "tgl1_defect",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 100,
        "wires": [
            [
                "28eb1388.8eeabc",
                "d060c9f0.241cc8"
            ]
        ]
    },
    {
        "id": "28eb1388.8eeabc",
        "type": "ui_text",
        "z": "4e3a4843.11c9d8",
        "group": "f9837f30.f9df3",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Production Date: ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1170,
        "y": 80,
        "wires": []
    },
    {
        "id": "53d31504.09e35c",
        "type": "switch",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "property": "payload.command",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "INSERT",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1040,
        "y": 1220,
        "wires": [
            [
                "c4476b7f.3a5978"
            ],
            [
                "72db5bca.6c8574"
            ]
        ]
    },
    {
        "id": "c4476b7f.3a5978",
        "type": "function",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "func": "\nmsg.payload = \"Data has been inserted to database\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 1180,
        "wires": [
            [
                "72db5bca.6c8574"
            ]
        ]
    },
    {
        "id": "93e9f209.67a52",
        "type": "link out",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "links": [
            "d999d66a.5536f8",
            "570bef0d.bf43"
        ],
        "x": 935,
        "y": 1460,
        "wires": []
    },
    {
        "id": "7f673a52.13aa64",
        "type": "comment",
        "z": "4e3a4843.11c9d8",
        "name": "Update table and graph",
        "info": "",
        "x": 1060,
        "y": 1460,
        "wires": []
    },
    {
        "id": "d999d66a.5536f8",
        "type": "link in",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "links": [
            "93e9f209.67a52"
        ],
        "x": 75,
        "y": 1820,
        "wires": [
            [
                "9128f95a.244be8"
            ]
        ]
    },
    {
        "id": "766539a1.c0a868",
        "type": "postgrestor",
        "z": "4e3a4843.11c9d8",
        "name": "Ambil list defect table",
        "query": "SELECT a.id_machine,b.machine_name as machine_name, a.id_type as id_type, c.type as type, TO_CHAR(time,'YYYY-MM-DD HH24:MI:ss') as time,\na.qty as qty,a.category as category\nFROM trans_ng a inner join machine_master b on a.id_machine=b.id_machine inner join list_ct c on a.id_type=c.id_type where a.id_machine={{msg.id_machine}} and a.time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}' and a.qty > 0\norder by a.time\n\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 560,
        "y": 1820,
        "wires": [
            [
                "6628bb94.41deb4"
            ]
        ]
    },
    {
        "id": "6628bb94.41deb4",
        "type": "function",
        "z": "4e3a4843.11c9d8",
        "name": "create array",
        "func": "\nvar i;\nlist_defect = [];\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  list_defect.push({\"No\":i+1,\"ID_Machine\":msg.payload.rows[i]['id_machine'],\"Machine Name\":msg.payload.rows[i]['machine_name'],\"ID_Type\":msg.payload.rows[i]['id_type'],\n  \"Type\":msg.payload.rows[i]['type'],\"Time\":msg.payload.rows[i]['time'],\"Qty\":msg.payload.rows[i]['qty'],\n    \"Category\":msg.payload.rows[i]['category']});\n}\n\nmsg.payload = list_defect;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 1820,
        "wires": [
            [
                "a1f89b63.c82a38"
            ]
        ]
    },
    {
        "id": "a1f89b63.c82a38",
        "type": "ui_table",
        "z": "4e3a4843.11c9d8",
        "group": "a09e942e.af52d8",
        "name": "Data Defect",
        "order": 4,
        "width": "16",
        "height": "18",
        "columns": [],
        "outputs": 1,
        "cts": true,
        "x": 990,
        "y": 1820,
        "wires": [
            [
                "4dd245bf.93a8bc",
                "4e956fa7.00c5",
                "c3d1caa8.366e78",
                "edb8e202.643a3",
                "2f41a757.6a4388",
                "3b26a52e.42d95a",
                "574f3991.a061d8",
                "70d278a6.98ab78",
                "75e300db.590a7"
            ]
        ]
    },
    {
        "id": "90fc0eae.c79f2",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "Reset chart",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 750,
        "y": 1760,
        "wires": [
            [
                "a1f89b63.c82a38",
                "5841f2a9.f5ea2c"
            ]
        ]
    },
    {
        "id": "7f1aca9c.bd7514",
        "type": "inject",
        "z": "4e3a4843.11c9d8",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 680,
        "y": 1680,
        "wires": [
            [
                "90fc0eae.c79f2"
            ]
        ]
    },
    {
        "id": "42e8975a.d96068",
        "type": "comment",
        "z": "4e3a4843.11c9d8",
        "name": "Reset Chart",
        "info": "",
        "x": 690,
        "y": 1640,
        "wires": []
    },
    {
        "id": "9128f95a.244be8",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "Variable untuk table NG",
        "rules": [
            {
                "t": "set",
                "p": "id_machine",
                "pt": "msg",
                "to": "id_machine_defect",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "tgl1",
                "pt": "msg",
                "to": "tgl1_defect",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "tgl2",
                "pt": "msg",
                "to": "tgl2_defect",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "jam",
                "pt": "msg",
                "to": "jam_awal_kerja",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 1820,
        "wires": [
            [
                "766539a1.c0a868",
                "4167b7cc.86e888",
                "821d1f7b.0c6b4"
            ]
        ]
    },
    {
        "id": "20c3b7e6.e69c88",
        "type": "ui_button",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "group": "a09e942e.af52d8",
        "order": 3,
        "width": "4",
        "height": "1",
        "passthru": false,
        "label": "Refresh Data",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 130,
        "y": 1900,
        "wires": [
            [
                "9128f95a.244be8"
            ]
        ]
    },
    {
        "id": "84407a6b.d297d8",
        "type": "comment",
        "z": "4e3a4843.11c9d8",
        "name": "Ambil defect category",
        "info": "",
        "x": 460,
        "y": 2140,
        "wires": []
    },
    {
        "id": "4167b7cc.86e888",
        "type": "postgrestor",
        "z": "4e3a4843.11c9d8",
        "name": "Defect",
        "query": "SELECT case\nwhen category is null then 'Others'\nelse category\nend as category,sum(qty) as qty\nFROM trans_ng where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\ngroup by category order by qty desc",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 410,
        "y": 2180,
        "wires": [
            [
                "4d815512.00730c"
            ]
        ]
    },
    {
        "id": "4d815512.00730c",
        "type": "function",
        "z": "4e3a4843.11c9d8",
        "name": "Format untuk chart",
        "func": "var data = [];\nvar label = [];\nvar i;\ndata.push([]);\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  data[0].push(msg.payload.rows[i]['qty']);\n}\n\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  label.push(msg.payload.rows[i]['category']);\n}\n\nvar m={\n    \"series\":[\"Unit\"],\n    \"data\":data,\n    \"labels\":label\n};\n\nreturn {payload:[m]};\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 2180,
        "wires": [
            [
                "5841f2a9.f5ea2c"
            ]
        ]
    },
    {
        "id": "5841f2a9.f5ea2c",
        "type": "ui_chart",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "group": "3a1532c6.d7d5be",
        "order": 2,
        "width": "7",
        "height": "8",
        "label": "Defect Category (Unit)",
        "chartType": "horizontalBar",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 880,
        "y": 2180,
        "wires": [
            []
        ]
    },
    {
        "id": "4014ecac.686ed4",
        "type": "link out",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "links": [
            "511c5053.e1919"
        ],
        "x": 1075,
        "y": 340,
        "wires": []
    },
    {
        "id": "3891d642.50f71a",
        "type": "comment",
        "z": "4e3a4843.11c9d8",
        "name": "Table",
        "info": "",
        "x": 1150,
        "y": 340,
        "wires": []
    },
    {
        "id": "511c5053.e1919",
        "type": "link in",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "links": [
            "4014ecac.686ed4"
        ],
        "x": 75,
        "y": 1760,
        "wires": [
            [
                "9128f95a.244be8"
            ]
        ]
    },
    {
        "id": "d060c9f0.241cc8",
        "type": "ui_text",
        "z": "4e3a4843.11c9d8",
        "group": "a09e942e.af52d8",
        "order": 2,
        "width": "6",
        "height": "1",
        "name": "",
        "label": "Production Date: ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1170,
        "y": 40,
        "wires": []
    },
    {
        "id": "4dd245bf.93a8bc",
        "type": "moment",
        "z": "4e3a4843.11c9d8",
        "name": "Set Start milisecond",
        "topic": "",
        "input": "payload['Time']",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD HH:mm:ss",
        "locale": "id-ID",
        "output": "payload",
        "outputType": "msg",
        "outTz": "Asia/Jakarta",
        "x": 1220,
        "y": 1800,
        "wires": [
            [
                "3b60222b.636c5e"
            ]
        ]
    },
    {
        "id": "4e956fa7.00c5",
        "type": "moment",
        "z": "4e3a4843.11c9d8",
        "name": "Set Start2 milisecond",
        "topic": "",
        "input": "payload['Time']",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "seconds",
        "adjDir": "add",
        "format": "YYYY-MM-DD HH:mm:ss",
        "locale": "id-ID",
        "output": "payload",
        "outputType": "msg",
        "outTz": "Asia/Jakarta",
        "x": 1220,
        "y": 1840,
        "wires": [
            [
                "60ba3cc8.997494"
            ]
        ]
    },
    {
        "id": "60ba3cc8.997494",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "time2_defect",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1550,
        "y": 1840,
        "wires": [
            []
        ]
    },
    {
        "id": "3b60222b.636c5e",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "time1_defect",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1550,
        "y": 1800,
        "wires": [
            [
                "bf6d05c9.af0078"
            ]
        ]
    },
    {
        "id": "bf6d05c9.af0078",
        "type": "ui_text",
        "z": "4e3a4843.11c9d8",
        "group": "e29ce8f0.4b69b8",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Time Defect: ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1410,
        "y": 1640,
        "wires": []
    },
    {
        "id": "2f41a757.6a4388",
        "type": "ui_text",
        "z": "4e3a4843.11c9d8",
        "group": "e29ce8f0.4b69b8",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Machine Name",
        "format": "{{msg.payload['Machine Name']}}",
        "layout": "row-spread",
        "x": 1200,
        "y": 1680,
        "wires": []
    },
    {
        "id": "c3d1caa8.366e78",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "id_type_selected",
                "pt": "global",
                "to": "payload['ID_Type']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1240,
        "y": 1900,
        "wires": [
            []
        ]
    },
    {
        "id": "edb8e202.643a3",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "id_machine_selected",
                "pt": "global",
                "to": "payload['ID_Machine']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1250,
        "y": 1940,
        "wires": [
            []
        ]
    },
    {
        "id": "471b50d3.9dc3a",
        "type": "link out",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "links": [
            "6713f5a.9f4050c"
        ],
        "x": 665,
        "y": 680,
        "wires": []
    },
    {
        "id": "6713f5a.9f4050c",
        "type": "link in",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "links": [
            "471b50d3.9dc3a"
        ],
        "x": 1055,
        "y": 2100,
        "wires": [
            [
                "a10ee358.3084e"
            ]
        ]
    },
    {
        "id": "c97109c.ee282f8",
        "type": "comment",
        "z": "4e3a4843.11c9d8",
        "name": "Defect Category 2",
        "info": "",
        "x": 790,
        "y": 680,
        "wires": []
    },
    {
        "id": "a10ee358.3084e",
        "type": "ui_dropdown",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "label": "Defect Category: ",
        "tooltip": "",
        "place": "Select option",
        "group": "e29ce8f0.4b69b8",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "x": 1410,
        "y": 2100,
        "wires": [
            [
                "f2c73dc5.f1789"
            ]
        ]
    },
    {
        "id": "3b26a52e.42d95a",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "id_type_selected",
                "pt": "global",
                "to": "payload['ID_Type']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1236.0000762939453,
        "y": 1987.0000896453857,
        "wires": [
            []
        ]
    },
    {
        "id": "84824e3d.d0086",
        "type": "ui_text_input",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "label": "Defect Qty: ",
        "tooltip": "",
        "group": "e29ce8f0.4b69b8",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "topicType": "msg",
        "x": 1426.0000762939453,
        "y": 2027.0000896453857,
        "wires": [
            [
                "ebad40a8.283b5"
            ]
        ]
    },
    {
        "id": "ebad40a8.283b5",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "defect_qty",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1616.0000762939453,
        "y": 2027.0000896453857,
        "wires": [
            [
                "7499ee37.f9142"
            ]
        ]
    },
    {
        "id": "7499ee37.f9142",
        "type": "ui_button",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "group": "e29ce8f0.4b69b8",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Update Data Defect",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "machine_name",
        "payloadType": "flow",
        "topic": "topic",
        "topicType": "msg",
        "x": 1890,
        "y": 2100,
        "wires": [
            [
                "65d62af1.6076b4"
            ]
        ]
    },
    {
        "id": "574f3991.a061d8",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload['Qty']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1196.0000762939453,
        "y": 2027.0000896453857,
        "wires": [
            [
                "84824e3d.d0086"
            ]
        ]
    },
    {
        "id": "70d278a6.98ab78",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload['Category']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1196.0000762939453,
        "y": 2067.0000896453857,
        "wires": [
            [
                "a10ee358.3084e"
            ]
        ]
    },
    {
        "id": "685602a0.2e4aec",
        "type": "comment",
        "z": "4e3a4843.11c9d8",
        "name": "Form Untuk Edit data defect",
        "info": "",
        "x": 1240,
        "y": 1760,
        "wires": []
    },
    {
        "id": "75e300db.590a7",
        "type": "ui_text",
        "z": "4e3a4843.11c9d8",
        "group": "e29ce8f0.4b69b8",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Type",
        "format": "{{msg.payload['Type']}}",
        "layout": "row-spread",
        "x": 1170,
        "y": 1720,
        "wires": []
    },
    {
        "id": "65d62af1.6076b4",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "Variable untuk update defect",
        "rules": [
            {
                "t": "set",
                "p": "time1_defect",
                "pt": "msg",
                "to": "time1_defect",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "time2_defect",
                "pt": "msg",
                "to": "time2_defect",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "id_machine_selected",
                "pt": "msg",
                "to": "id_machine_selected",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "defect_qty",
                "pt": "msg",
                "to": "defect_qty",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "category_update",
                "pt": "msg",
                "to": "category_update",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1440,
        "y": 2220,
        "wires": [
            [
                "e35a22e8.b3a2b"
            ]
        ]
    },
    {
        "id": "f2c73dc5.f1789",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "category_update",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1640,
        "y": 2100,
        "wires": [
            [
                "7499ee37.f9142"
            ]
        ]
    },
    {
        "id": "e35a22e8.b3a2b",
        "type": "postgrestor",
        "z": "4e3a4843.11c9d8",
        "name": "Update defect",
        "query": "Update trans_ng set qty='{{msg.defect_qty}}',category='{{msg.category_update}}'\nwhere id_machine = '{{msg.id_machine_selected}}' and time between '{{msg.time1_defect}}' and '{{msg.time2_defect}}'",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 1740,
        "y": 2220,
        "wires": [
            [
                "75a6c4c9.01ff5c",
                "bd240857.f42618",
                "744e6932.f6df48"
            ]
        ]
    },
    {
        "id": "75a6c4c9.01ff5c",
        "type": "link out",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "links": [
            "7f085982.299688",
            "b084b1b6.39ce"
        ],
        "x": 1895,
        "y": 2220,
        "wires": []
    },
    {
        "id": "bd240857.f42618",
        "type": "switch",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "property": "payload.command",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "UPDATE",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1630,
        "y": 2360,
        "wires": [
            [
                "dfd238b.f119cc8"
            ],
            [
                "378e950f.783eda"
            ]
        ]
    },
    {
        "id": "dfd238b.f119cc8",
        "type": "function",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "func": "\nmsg.payload = \"Data Defect has been updated\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1780,
        "y": 2320,
        "wires": [
            [
                "378e950f.783eda"
            ]
        ]
    },
    {
        "id": "378e950f.783eda",
        "type": "ui_toast",
        "z": "4e3a4843.11c9d8",
        "position": "top right",
        "displayTime": "8",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "Updated",
        "name": "berhasil update",
        "x": 1980,
        "y": 2360,
        "wires": []
    },
    {
        "id": "5dff38cf.bb27b8",
        "type": "comment",
        "z": "4e3a4843.11c9d8",
        "name": "Refresh Table",
        "info": "",
        "x": 1990,
        "y": 2220,
        "wires": []
    },
    {
        "id": "b084b1b6.39ce",
        "type": "link in",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "links": [
            "75a6c4c9.01ff5c"
        ],
        "x": 75,
        "y": 1700,
        "wires": [
            [
                "9128f95a.244be8"
            ]
        ]
    },
    {
        "id": "744e6932.f6df48",
        "type": "link out",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "links": [
            "5dfac272.d3e26c"
        ],
        "x": 1895,
        "y": 2180,
        "wires": []
    },
    {
        "id": "10ac77a9.bcee28",
        "type": "comment",
        "z": "4e3a4843.11c9d8",
        "name": "Reset Form",
        "info": "",
        "x": 1990,
        "y": 2180,
        "wires": []
    },
    {
        "id": "5dfac272.d3e26c",
        "type": "link in",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "links": [
            "744e6932.f6df48"
        ],
        "x": 935,
        "y": 1560,
        "wires": [
            [
                "537ee9d7.fe0e58"
            ]
        ]
    },
    {
        "id": "e52cb151.0f17b",
        "type": "inject",
        "z": "4e3a4843.11c9d8",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 980,
        "y": 1640,
        "wires": [
            [
                "2f41a757.6a4388",
                "75e300db.590a7",
                "bf6d05c9.af0078"
            ]
        ]
    },
    {
        "id": "537ee9d7.fe0e58",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "Set empty",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1040,
        "y": 1560,
        "wires": [
            [
                "75e300db.590a7",
                "2f41a757.6a4388",
                "bf6d05c9.af0078",
                "f194d48f.9c1988",
                "1a29a372.6d751d"
            ]
        ]
    },
    {
        "id": "f194d48f.9c1988",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "Reset Variable untuk update defect",
        "rules": [
            {
                "t": "set",
                "p": "time1_defect",
                "pt": "global",
                "to": "",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "time2_defect",
                "pt": "global",
                "to": "",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "id_machine_selected",
                "pt": "global",
                "to": "i",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "defect_qty",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "category_update",
                "pt": "global",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1520,
        "wires": [
            []
        ]
    },
    {
        "id": "1a29a372.6d751d",
        "type": "link out",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "links": [
            "2573e79e.785788"
        ],
        "x": 1195,
        "y": 1560,
        "wires": []
    },
    {
        "id": "2573e79e.785788",
        "type": "link in",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "links": [
            "1a29a372.6d751d"
        ],
        "x": 1195,
        "y": 2140,
        "wires": [
            [
                "a10ee358.3084e",
                "84824e3d.d0086"
            ]
        ]
    },
    {
        "id": "821d1f7b.0c6b4",
        "type": "postgrestor",
        "z": "4e3a4843.11c9d8",
        "name": "Defect",
        "query": "SELECT sum(qty) as qty\nFROM trans_ng where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 410,
        "y": 2280,
        "wires": [
            [
                "5ddb8fd8.7921a"
            ]
        ]
    },
    {
        "id": "342db527.520eea",
        "type": "comment",
        "z": "4e3a4843.11c9d8",
        "name": "Ambil total NG",
        "info": "",
        "x": 430,
        "y": 2240,
        "wires": []
    },
    {
        "id": "5ddb8fd8.7921a",
        "type": "ui_text",
        "z": "4e3a4843.11c9d8",
        "group": "a09e942e.af52d8",
        "order": 2,
        "width": "6",
        "height": "1",
        "name": "",
        "label": "Total Defect: ",
        "format": "{{msg.payload.rows[0]['qty']}}",
        "layout": "row-spread",
        "x": 630,
        "y": 2280,
        "wires": []
    },
    {
        "id": "5a4b5868.206198",
        "type": "inject",
        "z": "4e3a4843.11c9d8",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 410,
        "y": 2360,
        "wires": [
            [
                "5ddb8fd8.7921a"
            ]
        ]
    },
    {
        "id": "e200c14.5390e4",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ct_defect",
                "pt": "global",
                "to": "payload.rows[0]['ct']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1170,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "f27be14c.2ec23",
        "type": "change",
        "z": "4e3a4843.11c9d8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "qty_perct_defect",
                "pt": "global",
                "to": "payload.rows[0]['qty_perct']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1200,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "e88651ec.09ab",
        "type": "inject",
        "z": "e1d21b64.41dc98",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 120,
        "y": 300,
        "wires": [
            [
                "b6a7ca89.5638a8",
                "ab98c88e.1b3758",
                "c8396a1f.2f8948",
                "f4f1bfb8.1aa26"
            ]
        ]
    },
    {
        "id": "c8396a1f.2f8948",
        "type": "postgrestor",
        "z": "e1d21b64.41dc98",
        "name": "Ambil machine_name",
        "query": "SELECT machine_name FROM machine_master order by machine_name;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 160,
        "y": 60,
        "wires": [
            [
                "a633590d.72b1c8"
            ]
        ]
    },
    {
        "id": "a633590d.72b1c8",
        "type": "function",
        "z": "e1d21b64.41dc98",
        "name": "create array",
        "func": "\nvar i;\nlist_machine = [];\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  list_machine.push({\"machine\":msg.payload.rows[i]['machine_name']});\n}\n\nmsg.payload = list_machine;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 60,
        "wires": [
            [
                "1ad6b0a9.0aa52f"
            ]
        ]
    },
    {
        "id": "e8f7730e.11f6f",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 220,
        "y": 140,
        "wires": [
            [
                "b6a7ca89.5638a8"
            ]
        ]
    },
    {
        "id": "1ad6b0a9.0aa52f",
        "type": "function",
        "z": "e1d21b64.41dc98",
        "name": "format array of objects for dropdown in dashboard",
        "func": "//Reformat array to work with dashboard\nvar reformattedArray = msg.payload.map(obj =>{\n    //declare the reformatted object\n    var rObj = {};\n    //format it for drop down\n    //\"label\":\"value\" is the format so lets move the value to the label and add some txt as well\n    //you can also replce the txt with a var if you want\n    rObj[obj.machine] = obj.machine;\n    return rObj;\n});\nmsg.payload =  reformattedArray;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 60,
        "wires": [
            [
                "e8f7730e.11f6f"
            ]
        ]
    },
    {
        "id": "b6a7ca89.5638a8",
        "type": "ui_dropdown",
        "z": "e1d21b64.41dc98",
        "name": "",
        "label": "Machine Name",
        "tooltip": "",
        "place": "Select option",
        "group": "a90f88f7.5e52f8",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "x": 360,
        "y": 300,
        "wires": [
            [
                "ab98c88e.1b3758"
            ]
        ]
    },
    {
        "id": "790755ab.73ebdc",
        "type": "ui_switch",
        "z": "e1d21b64.41dc98",
        "name": "",
        "label": "Remember machine",
        "tooltip": "",
        "group": "a90f88f7.5e52f8",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 626.0000305175781,
        "y": 243.00000381469727,
        "wires": [
            [
                "8a76608c.22ba6"
            ]
        ]
    },
    {
        "id": "8a76608c.22ba6",
        "type": "switch",
        "z": "e1d21b64.41dc98",
        "name": "If off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 796.0000305175781,
        "y": 243.00000381469727,
        "wires": [
            [
                "35734f8c.ce931",
                "b6a7ca89.5638a8"
            ]
        ]
    },
    {
        "id": "35734f8c.ce931",
        "type": "function",
        "z": "e1d21b64.41dc98",
        "name": "set False",
        "func": "msg.payload = false;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 300,
        "wires": [
            [
                "836ea971.19b1b8",
                "b6a7ca89.5638a8"
            ]
        ]
    },
    {
        "id": "a2d0a03c.08d0c",
        "type": "inject",
        "z": "e1d21b64.41dc98",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 886.0000305175781,
        "y": 163.00000381469727,
        "wires": [
            [
                "57a18ebb.9415e",
                "b03ffea.42f9d"
            ]
        ]
    },
    {
        "id": "a804f07f.a6a37",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "tgl1_trouble",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1070,
        "y": 280,
        "wires": [
            [
                "b03ffea.42f9d"
            ]
        ]
    },
    {
        "id": "57a18ebb.9415e",
        "type": "ui_text",
        "z": "e1d21b64.41dc98",
        "group": "d795153e.b9b0b8",
        "order": 1,
        "width": "6",
        "height": "1",
        "name": "",
        "label": "Machine Name:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1090,
        "y": 320,
        "wires": []
    },
    {
        "id": "b03ffea.42f9d",
        "type": "ui_text",
        "z": "e1d21b64.41dc98",
        "group": "d795153e.b9b0b8",
        "order": 1,
        "width": "5",
        "height": "1",
        "name": "",
        "label": "Production Date: ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1293.9999694824219,
        "y": 296.99999618530273,
        "wires": []
    },
    {
        "id": "81e605bb.06cf68",
        "type": "ui_button",
        "z": "e1d21b64.41dc98",
        "name": "",
        "group": "a90f88f7.5e52f8",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Show Stop Time Data",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "machine_name",
        "payloadType": "flow",
        "topic": "topic",
        "topicType": "msg",
        "x": 823.9999694824219,
        "y": 396.99999618530273,
        "wires": [
            [
                "57a18ebb.9415e",
                "a804f07f.a6a37",
                "7b18a79.d7f3858",
                "1d114adf.b34cc5",
                "790755ab.73ebdc"
            ]
        ]
    },
    {
        "id": "55355bc0.4c9414",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "enabled true",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 593.9999694824219,
        "y": 416.99999618530273,
        "wires": [
            [
                "81e605bb.06cf68"
            ]
        ]
    },
    {
        "id": "6e157f76.1e809",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "enabled false",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 593.9999694824219,
        "y": 376.99999618530273,
        "wires": [
            [
                "81e605bb.06cf68"
            ]
        ]
    },
    {
        "id": "836ea971.19b1b8",
        "type": "switch",
        "z": "e1d21b64.41dc98",
        "name": "is text empty?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 403.9999694824219,
        "y": 416.99999618530273,
        "wires": [
            [
                "6e157f76.1e809"
            ],
            [
                "55355bc0.4c9414"
            ]
        ]
    },
    {
        "id": "ab98c88e.1b3758",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machine_name",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "id_machine_trouble",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 143.99996948242188,
        "y": 416.99999618530273,
        "wires": [
            [
                "836ea971.19b1b8"
            ]
        ]
    },
    {
        "id": "f4f1bfb8.1aa26",
        "type": "function",
        "z": "e1d21b64.41dc98",
        "name": "",
        "func": "var d = new Date();\nvar str = d.toDateString; //Wed Oct 23 2019\nmsg.payload = d;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 480,
        "wires": [
            [
                "7141a25c.e0b41c"
            ]
        ]
    },
    {
        "id": "7141a25c.e0b41c",
        "type": "ui_date_picker",
        "z": "e1d21b64.41dc98",
        "name": "",
        "label": "Production Date",
        "group": "a90f88f7.5e52f8",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "topic": "payload",
        "topicType": "msg",
        "x": 370,
        "y": 480,
        "wires": [
            [
                "4e169397.ff82cc",
                "75c8d695.ca28e8"
            ]
        ]
    },
    {
        "id": "4e169397.ff82cc",
        "type": "moment",
        "z": "e1d21b64.41dc98",
        "name": "tgl1",
        "topic": "",
        "input": "payload",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "tgl1_trouble",
        "outputType": "global",
        "outTz": "Asia/Jakarta",
        "x": 560,
        "y": 480,
        "wires": [
            [
                "81e605bb.06cf68"
            ]
        ]
    },
    {
        "id": "75c8d695.ca28e8",
        "type": "moment",
        "z": "e1d21b64.41dc98",
        "name": "tgl2",
        "topic": "",
        "input": "payload",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "tgl2_trouble",
        "outputType": "global",
        "outTz": "Asia/Jakarta",
        "x": 560,
        "y": 520,
        "wires": [
            [
                "81e605bb.06cf68"
            ]
        ]
    },
    {
        "id": "7b18a79.d7f3858",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machine_name",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1070,
        "y": 480,
        "wires": [
            [
                "a93fe567.951138"
            ]
        ]
    },
    {
        "id": "1d114adf.b34cc5",
        "type": "link out",
        "z": "e1d21b64.41dc98",
        "name": "",
        "links": [
            "3ce670c2.c71a8",
            "e2bf7e81.30619"
        ],
        "x": 1005,
        "y": 400,
        "wires": []
    },
    {
        "id": "a93fe567.951138",
        "type": "link out",
        "z": "e1d21b64.41dc98",
        "name": "",
        "links": [
            "42419e99.cd497",
            "33833716.28b348"
        ],
        "x": 1245,
        "y": 480,
        "wires": []
    },
    {
        "id": "7768ef87.14cb1",
        "type": "comment",
        "z": "e1d21b64.41dc98",
        "name": "Cari id_machine",
        "info": "",
        "x": 240,
        "y": 620,
        "wires": []
    },
    {
        "id": "7ca67f46.658ea",
        "type": "postgrestor",
        "z": "e1d21b64.41dc98",
        "name": "cari id_machine",
        "query": "SELECT id_machine FROM machine_master where machine_name='{{msg.machine_name}}';",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 233.99996948242188,
        "y": 656.9999961853027,
        "wires": [
            [
                "4b819481.5281dc"
            ]
        ]
    },
    {
        "id": "4b819481.5281dc",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "id_machine",
                "pt": "msg",
                "to": "payload.rows[0]['id_machine']",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "id_machine_trouble",
                "pt": "global",
                "to": "payload.rows[0]['id_machine']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 173.99996948242188,
        "y": 716.9999961853027,
        "wires": [
            [
                "4547c8e5.7b2978"
            ]
        ]
    },
    {
        "id": "4547c8e5.7b2978",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "tgl1",
                "pt": "msg",
                "to": "tgl1_trouble",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "tgl2",
                "pt": "msg",
                "to": "tgl2_trouble",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "jam",
                "pt": "msg",
                "to": "jam_awal_kerja",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 720,
        "wires": [
            [
                "40c5a090.47252",
                "b8131e2e.5215f"
            ]
        ]
    },
    {
        "id": "42419e99.cd497",
        "type": "link in",
        "z": "e1d21b64.41dc98",
        "name": "",
        "links": [
            "a93fe567.951138"
        ],
        "x": 75,
        "y": 640,
        "wires": [
            [
                "7ca67f46.658ea"
            ]
        ]
    },
    {
        "id": "40c5a090.47252",
        "type": "postgrestor",
        "z": "e1d21b64.41dc98",
        "name": "Ambil list Stop Table",
        "query": "SELECT TO_CHAR(start,'YYYY-MM-DD HH24:MI:ss') as start1, TO_CHAR(finish,'YYYY-MM-DD HH24:MI:ss') as finish1, case\nwhen category is null then 'Others'\nelse category\nend as category,round(cast(float8 ((extract(epoch from coalesce(finish, NOW())-start))/60) as numeric),2) as menit,\nproblem as problem, identification as identification, action as action,note as Note\nFROM trans_stop where id_machine={{msg.id_machine}} and start between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\norder by start\n\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 660,
        "y": 720,
        "wires": [
            [
                "c6a7fb9c.28c078"
            ]
        ]
    },
    {
        "id": "4b95ea92.d815b4",
        "type": "ui_table",
        "z": "e1d21b64.41dc98",
        "group": "d795153e.b9b0b8",
        "name": "Data Stop Time (Minute)",
        "order": 2,
        "width": "18",
        "height": "23",
        "columns": [],
        "outputs": 1,
        "cts": true,
        "x": 1090,
        "y": 720,
        "wires": [
            [
                "cf1a16ce.ab2e08",
                "53160b14.361254",
                "8d838797.2d1368",
                "ecae2e4f.a6796",
                "45da7b25.1749f4",
                "198ea50.89c815b",
                "1cac0048.1717b"
            ]
        ]
    },
    {
        "id": "c6a7fb9c.28c078",
        "type": "function",
        "z": "e1d21b64.41dc98",
        "name": "create array",
        "func": "\nvar i;\nlist_machine = [];\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  list_machine.push({\"No\":i+1,\"Start\":msg.payload.rows[i]['start1'],\"Finish\":msg.payload.rows[i]['finish1'],\n  \"Category\":msg.payload.rows[i]['category'],\"Stop Time (min)\":msg.payload.rows[i]['menit'],\"Problem\":msg.payload.rows[i]['problem'],\n    \"Identification\":msg.payload.rows[i]['identification'],\"Action\":msg.payload.rows[i]['action'],\"Note\":msg.payload.rows[i]['note']});\n}\n\nmsg.payload = list_machine;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 850,
        "y": 720,
        "wires": [
            [
                "4b95ea92.d815b4"
            ]
        ]
    },
    {
        "id": "38f0216c.4bfd6e",
        "type": "comment",
        "z": "e1d21b64.41dc98",
        "name": "Ambil total loading time",
        "info": "",
        "x": 180,
        "y": 860,
        "wires": []
    },
    {
        "id": "c9a05670.264718",
        "type": "postgrestor",
        "z": "e1d21b64.41dc98",
        "name": "Loading Time",
        "query": "SELECT round(cast(float8 (COALESCE(SUM(extract(epoch from coalesce(finish, NOW())-start)),0)/60) as numeric),2) as menit \nFROM trans_operation \nwhere id_machine={{msg.id_machine}} and start between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n\n\n\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 240,
        "y": 900,
        "wires": [
            [
                "2066e7a3.4d6988"
            ]
        ]
    },
    {
        "id": "2066e7a3.4d6988",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['menit']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 900,
        "wires": [
            [
                "9eff4544.afef78"
            ]
        ]
    },
    {
        "id": "1cbecbeb.d35ec4",
        "type": "inject",
        "z": "e1d21b64.41dc98",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 480,
        "y": 960,
        "wires": [
            [
                "9eff4544.afef78",
                "ebdef4d3.5297f8"
            ]
        ]
    },
    {
        "id": "9eff4544.afef78",
        "type": "ui_text",
        "z": "e1d21b64.41dc98",
        "group": "d795153e.b9b0b8",
        "order": 1,
        "width": "6",
        "height": "1",
        "name": "",
        "label": "Total Loading Time (Minute): ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 760,
        "y": 900,
        "wires": []
    },
    {
        "id": "ebdef4d3.5297f8",
        "type": "ui_text",
        "z": "e1d21b64.41dc98",
        "group": "d795153e.b9b0b8",
        "order": 1,
        "width": "6",
        "height": "1",
        "name": "",
        "label": "Total Stop Time (Minute): ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 750,
        "y": 1020,
        "wires": []
    },
    {
        "id": "7ad6eb.b640c914",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['menit']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 1020,
        "wires": [
            [
                "ebdef4d3.5297f8"
            ]
        ]
    },
    {
        "id": "51f61175.52972",
        "type": "postgrestor",
        "z": "e1d21b64.41dc98",
        "name": "Stop Time",
        "query": "SELECT round(cast(float8 (COALESCE(SUM(extract(epoch from coalesce(finish, NOW())-start)),0)/60) as numeric),2) as menit \nFROM trans_stop \nwhere id_machine={{msg.id_machine}} and start between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n\n\n\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 220,
        "y": 1020,
        "wires": [
            [
                "7ad6eb.b640c914"
            ]
        ]
    },
    {
        "id": "c7bea52c.9cd618",
        "type": "comment",
        "z": "e1d21b64.41dc98",
        "name": "Ambil total stop time",
        "info": "",
        "x": 170,
        "y": 980,
        "wires": []
    },
    {
        "id": "6981febb.b0c11",
        "type": "link in",
        "z": "e1d21b64.41dc98",
        "name": "",
        "links": [
            "6c85e424.96479c",
            "d46fdafb.a601b8"
        ],
        "x": 75,
        "y": 900,
        "wires": [
            [
                "c9a05670.264718"
            ]
        ]
    },
    {
        "id": "c697a3a2.10bb3",
        "type": "link in",
        "z": "e1d21b64.41dc98",
        "name": "",
        "links": [
            "6c85e424.96479c",
            "d46fdafb.a601b8"
        ],
        "x": 75,
        "y": 1020,
        "wires": [
            [
                "51f61175.52972"
            ]
        ]
    },
    {
        "id": "b8131e2e.5215f",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "Set tgl1 dan tgl2",
        "rules": [
            {
                "t": "set",
                "p": "tgl1",
                "pt": "msg",
                "to": "tgl1_trouble",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "tgl2",
                "pt": "msg",
                "to": "tgl2_trouble",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 780,
        "wires": [
            [
                "6c85e424.96479c"
            ]
        ]
    },
    {
        "id": "6c85e424.96479c",
        "type": "link out",
        "z": "e1d21b64.41dc98",
        "name": "",
        "links": [
            "6981febb.b0c11",
            "c697a3a2.10bb3",
            "8f77f8d5.a842f8",
            "89d4dcd9.b1c53"
        ],
        "x": 295,
        "y": 780,
        "wires": []
    },
    {
        "id": "d32e880f.9d0218",
        "type": "comment",
        "z": "e1d21b64.41dc98",
        "name": "Reset Chart",
        "info": "",
        "x": 810,
        "y": 540,
        "wires": []
    },
    {
        "id": "d71eeed1.949b4",
        "type": "inject",
        "z": "e1d21b64.41dc98",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 800,
        "y": 580,
        "wires": [
            [
                "4a35809c.c1935"
            ]
        ]
    },
    {
        "id": "4a35809c.c1935",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "Reset chart",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 660,
        "wires": [
            [
                "4b95ea92.d815b4"
            ]
        ]
    },
    {
        "id": "42c9b33.0b4b54c",
        "type": "postgrestor",
        "z": "e1d21b64.41dc98",
        "name": "Ambil data AR",
        "query": "\nselect round(cast(float8 (((loading-stop)/loading) * 100) as numeric),2) as ar from \n(SELECT SUM(extract(epoch from coalesce(finish, NOW())-start)) as loading FROM trans_operation where id_machine={{msg.id_machine}}\nAND start between '{{msg.tgl1}} {{msg.jam}}' AND '{{msg.tgl2}} {{msg.jam}}') as loading,\n\n(SELECT SUM(extract(epoch from coalesce(finish, NOW())-start)) as stop FROM trans_stop where id_machine={{msg.id_machine}}\nAND start between '{{msg.tgl1}} {{msg.jam}}' AND '{{msg.tgl2}} {{msg.jam}}') as stop",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 240,
        "y": 1220,
        "wires": [
            [
                "1503d8b7.20c447"
            ]
        ]
    },
    {
        "id": "1503d8b7.20c447",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['ar']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 1220,
        "wires": [
            [
                "ae27ffb4.0b658"
            ]
        ]
    },
    {
        "id": "3c30aa5b.0391e6",
        "type": "inject",
        "z": "e1d21b64.41dc98",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 241,
        "y": 1139.9999504089355,
        "wires": [
            [
                "ae27ffb4.0b658"
            ]
        ]
    },
    {
        "id": "4bcba8c6.a5d1c8",
        "type": "comment",
        "z": "e1d21b64.41dc98",
        "name": "Reset Chart",
        "info": "",
        "x": 231,
        "y": 1099.9999504089355,
        "wires": []
    },
    {
        "id": "ae27ffb4.0b658",
        "type": "ui_gauge",
        "z": "e1d21b64.41dc98",
        "name": "",
        "group": "852d7ff7.ea8d",
        "order": 1,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Total Availability(%)",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#00b500"
        ],
        "seg1": "70",
        "seg2": "80",
        "x": 650,
        "y": 1220,
        "wires": []
    },
    {
        "id": "8f77f8d5.a842f8",
        "type": "link in",
        "z": "e1d21b64.41dc98",
        "name": "",
        "links": [
            "6c85e424.96479c",
            "d46fdafb.a601b8"
        ],
        "x": 75,
        "y": 1220,
        "wires": [
            [
                "42c9b33.0b4b54c"
            ]
        ]
    },
    {
        "id": "2f56081c.dce9d8",
        "type": "postgrestor",
        "z": "e1d21b64.41dc98",
        "name": "Stop Time",
        "query": "SELECT case\nwhen category is null then 'Others'\nelse category\nend as category,round(cast(float8 (SUM(extract(epoch from coalesce(finish, NOW())-start))/60) as numeric),2) as menit\nFROM trans_stop where id_machine={{msg.id_machine}} and start between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\ngroup by category order by menit desc\n\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 200,
        "y": 1420,
        "wires": [
            [
                "49f57e5d.472f3"
            ]
        ]
    },
    {
        "id": "48ebd7d2.4c0228",
        "type": "ui_chart",
        "z": "e1d21b64.41dc98",
        "name": "",
        "group": "852d7ff7.ea8d",
        "order": 2,
        "width": "6",
        "height": "6",
        "label": "Stop Time (Minute)",
        "chartType": "horizontalBar",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 730,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "49f57e5d.472f3",
        "type": "function",
        "z": "e1d21b64.41dc98",
        "name": "Format untuk chart",
        "func": "var data = [];\nvar label = [];\nvar i;\ndata.push([]);\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  data[0].push(msg.payload.rows[i]['menit']);\n}\n\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  label.push(msg.payload.rows[i]['category']);\n}\n\nvar m={\n    \"series\":[\"Minute\"],\n    \"data\":data,\n    \"labels\":label\n};\n\nreturn {payload:[m]};\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 1420,
        "wires": [
            [
                "48ebd7d2.4c0228"
            ]
        ]
    },
    {
        "id": "c675e78f.102748",
        "type": "comment",
        "z": "e1d21b64.41dc98",
        "name": "Reset Chart",
        "info": "",
        "x": 330,
        "y": 1300,
        "wires": []
    },
    {
        "id": "f192b6fc.333ef8",
        "type": "inject",
        "z": "e1d21b64.41dc98",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 320,
        "y": 1340,
        "wires": [
            [
                "807ed56f.b2c0c8"
            ]
        ]
    },
    {
        "id": "807ed56f.b2c0c8",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "Reset chart",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 476.00001525878906,
        "y": 1340.0000286102295,
        "wires": [
            [
                "48ebd7d2.4c0228"
            ]
        ]
    },
    {
        "id": "a7fa67ac.847f68",
        "type": "comment",
        "z": "e1d21b64.41dc98",
        "name": "Ambil stop time & category",
        "info": "",
        "x": 170,
        "y": 1380,
        "wires": []
    },
    {
        "id": "42b304cb.2c98bc",
        "type": "comment",
        "z": "e1d21b64.41dc98",
        "name": "Ambil availability",
        "info": "",
        "x": 140,
        "y": 1180,
        "wires": []
    },
    {
        "id": "89d4dcd9.b1c53",
        "type": "link in",
        "z": "e1d21b64.41dc98",
        "name": "",
        "links": [
            "6c85e424.96479c",
            "d46fdafb.a601b8"
        ],
        "x": 75,
        "y": 1420,
        "wires": [
            [
                "2f56081c.dce9d8"
            ]
        ]
    },
    {
        "id": "ecae2e4f.a6796",
        "type": "ui_form",
        "z": "e1d21b64.41dc98",
        "name": "Form Action",
        "label": "",
        "group": "32bbfec0.d4bee2",
        "order": 2,
        "width": "6",
        "height": "7",
        "options": [
            {
                "label": "Problem",
                "value": "Problem",
                "type": "multiline",
                "required": true,
                "rows": 1
            },
            {
                "label": "Identification",
                "value": "Identification",
                "type": "multiline",
                "required": true,
                "rows": 1
            },
            {
                "label": "Action",
                "value": "Action",
                "type": "multiline",
                "required": true,
                "rows": 2
            },
            {
                "label": "Note",
                "value": "Note",
                "type": "text",
                "required": false,
                "rows": null
            }
        ],
        "formValue": {
            "Problem": "",
            "Identification": "",
            "Action": "",
            "Note": ""
        },
        "payload": "",
        "submit": "Update",
        "cancel": "Cancel",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "x": 1290,
        "y": 840,
        "wires": [
            [
                "5e783688.6303d8"
            ]
        ]
    },
    {
        "id": "f68ddf27.f7b08",
        "type": "ui_text",
        "z": "e1d21b64.41dc98",
        "group": "32bbfec0.d4bee2",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Start Time: ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1930,
        "y": 540,
        "wires": []
    },
    {
        "id": "33741a53.7c5806",
        "type": "ui_text",
        "z": "e1d21b64.41dc98",
        "group": "32bbfec0.d4bee2",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Finish Time: ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1930,
        "y": 660,
        "wires": []
    },
    {
        "id": "9b537cbd.ba62f",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "jam_start_trouble",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 540,
        "wires": [
            [
                "f68ddf27.f7b08"
            ]
        ]
    },
    {
        "id": "cf1a16ce.ab2e08",
        "type": "ui_text",
        "z": "e1d21b64.41dc98",
        "group": "32bbfec0.d4bee2",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Category:",
        "format": "{{msg.payload['Category']}}",
        "layout": "row-left",
        "x": 1580,
        "y": 720,
        "wires": []
    },
    {
        "id": "15c8e483.ed80db",
        "type": "inject",
        "z": "e1d21b64.41dc98",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 1440,
        "y": 460,
        "wires": [
            [
                "9b537cbd.ba62f",
                "6255777a.1ed3a8",
                "cf1a16ce.ab2e08"
            ]
        ]
    },
    {
        "id": "53160b14.361254",
        "type": "moment",
        "z": "e1d21b64.41dc98",
        "name": "Set Start milisecond",
        "topic": "",
        "input": "payload['Start']",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD HH:mm:ss",
        "locale": "id-ID",
        "output": "payload",
        "outputType": "msg",
        "outTz": "Asia/Jakarta",
        "x": 1360,
        "y": 540,
        "wires": [
            [
                "9b537cbd.ba62f"
            ]
        ]
    },
    {
        "id": "8d838797.2d1368",
        "type": "moment",
        "z": "e1d21b64.41dc98",
        "name": "Set Finish milisecond",
        "topic": "",
        "input": "payload['Finish']",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD HH:mm:ss",
        "locale": "id-ID",
        "output": "payload",
        "outputType": "msg",
        "outTz": "Asia/Jakarta",
        "x": 1360,
        "y": 660,
        "wires": [
            [
                "6255777a.1ed3a8"
            ]
        ]
    },
    {
        "id": "6255777a.1ed3a8",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "jam_finish_trouble",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1680,
        "y": 660,
        "wires": [
            [
                "33741a53.7c5806"
            ]
        ]
    },
    {
        "id": "7fcdf120.b71e8",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "Reset",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1350,
        "y": 760,
        "wires": [
            [
                "9b537cbd.ba62f",
                "6255777a.1ed3a8",
                "cf1a16ce.ab2e08"
            ]
        ]
    },
    {
        "id": "5e783688.6303d8",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "jam_start",
                "pt": "msg",
                "to": "jam_start_trouble",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "jam_finish",
                "pt": "msg",
                "to": "jam_finish_trouble",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "id_machine",
                "pt": "msg",
                "to": "id_machine_trouble",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "jam_start2",
                "pt": "msg",
                "to": "jam_start2_trouble",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "jam_finish2",
                "pt": "msg",
                "to": "jam_finish2_trouble",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "problem",
                "pt": "msg",
                "to": "payload['Problem']",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "identification",
                "pt": "msg",
                "to": "payload['Identification']",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "action",
                "pt": "msg",
                "to": "payload['Action']",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "note",
                "pt": "msg",
                "to": "payload['Note']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 840,
        "wires": [
            [
                "b440c32c.35e7c",
                "7fcdf120.b71e8"
            ]
        ]
    },
    {
        "id": "b440c32c.35e7c",
        "type": "postgrestor",
        "z": "e1d21b64.41dc98",
        "name": "Update",
        "query": "UPDATE trans_stop set problem='{{msg.problem}}',identification='{{msg.identification}}',action='{{msg.action}}',note='{{msg.note}}'\nWHERE id_machine={{msg.id_machine}} and (start between '{{msg.jam_start}}' and '{{msg.jam_start2}}') and\n(finish between '{{msg.jam_finish}}' and '{{msg.jam_finish2}}')",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 1720,
        "y": 840,
        "wires": [
            [
                "1f0a15eb.4620ca",
                "6a4af575.23621c"
            ]
        ]
    },
    {
        "id": "1f0a15eb.4620ca",
        "type": "link out",
        "z": "e1d21b64.41dc98",
        "name": "",
        "links": [
            "bed7182b.7c5f78"
        ],
        "x": 1855,
        "y": 840,
        "wires": []
    },
    {
        "id": "bed7182b.7c5f78",
        "type": "link in",
        "z": "e1d21b64.41dc98",
        "name": "",
        "links": [
            "1f0a15eb.4620ca"
        ],
        "x": 415,
        "y": 600,
        "wires": [
            [
                "b473b02b.a966a"
            ]
        ]
    },
    {
        "id": "b473b02b.a966a",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "id_machine",
                "pt": "msg",
                "to": "id_machine_trouble",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 600,
        "wires": [
            [
                "4547c8e5.7b2978"
            ]
        ]
    },
    {
        "id": "638732d2.e3b81c",
        "type": "comment",
        "z": "e1d21b64.41dc98",
        "name": "Ambil jam_start2 karena aktual postgresql 4 digit millisecond",
        "info": "",
        "x": 1800,
        "y": 500,
        "wires": []
    },
    {
        "id": "45da7b25.1749f4",
        "type": "moment",
        "z": "e1d21b64.41dc98",
        "name": "Set Start2 milisecond",
        "topic": "",
        "input": "payload['Start']",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "seconds",
        "adjDir": "add",
        "format": "YYYY-MM-DD HH:mm:ss",
        "locale": "id-ID",
        "output": "payload",
        "outputType": "msg",
        "outTz": "Asia/Jakarta",
        "x": 1360,
        "y": 580,
        "wires": [
            [
                "44399e01.b220f"
            ]
        ]
    },
    {
        "id": "198ea50.89c815b",
        "type": "moment",
        "z": "e1d21b64.41dc98",
        "name": "Set Finish2 milisecond",
        "topic": "",
        "input": "payload['Finish']",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "seconds",
        "adjDir": "add",
        "format": "YYYY-MM-DD HH:mm:ss",
        "locale": "id-ID",
        "output": "payload",
        "outputType": "msg",
        "outTz": "Asia/Jakarta",
        "x": 1360,
        "y": 620,
        "wires": [
            [
                "dfebdb34.b52f98"
            ]
        ]
    },
    {
        "id": "44399e01.b220f",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "jam_start2_trouble",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "dfebdb34.b52f98",
        "type": "change",
        "z": "e1d21b64.41dc98",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "jam_finish2_trouble",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1710,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "7644a9db.b6fdb8",
        "type": "comment",
        "z": "e1d21b64.41dc98",
        "name": "backup query",
        "info": "UPDATE trans_stop set problem='{{msg.payload['Problem']}}',identification='{{msg.payload['Identification']}}',action='{{msg.payload['Action']}}',note='{{msg.payload['Note']}}'\nWHERE id_machine={{msg.id_machine}}  and (start between '{{msg.jam_start}}' and '{{msg.jam_start2}}')",
        "x": 1740,
        "y": 800,
        "wires": []
    },
    {
        "id": "d47216fb.e5ef98",
        "type": "comment",
        "z": "e1d21b64.41dc98",
        "name": "Format millisecond",
        "info": "YYYY-MM-DD HH:mm:ss.SSS",
        "x": 1670,
        "y": 460,
        "wires": []
    },
    {
        "id": "e2bf7e81.30619",
        "type": "link in",
        "z": "e1d21b64.41dc98",
        "name": "",
        "links": [
            "1d114adf.b34cc5"
        ],
        "x": 435,
        "y": 200,
        "wires": [
            [
                "790755ab.73ebdc"
            ]
        ]
    },
    {
        "id": "f395b58a.bdf798",
        "type": "inject",
        "z": "e1d21b64.41dc98",
        "name": "Init false",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 460,
        "y": 140,
        "wires": [
            [
                "790755ab.73ebdc"
            ]
        ]
    },
    {
        "id": "cca04bbb.486fe8",
        "type": "ui_toast",
        "z": "e1d21b64.41dc98",
        "position": "top right",
        "displayTime": "10",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": true,
        "topic": "Data Stop Time",
        "name": "",
        "x": 1260,
        "y": 1000,
        "wires": []
    },
    {
        "id": "1cac0048.1717b",
        "type": "template",
        "z": "e1d21b64.41dc98",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "Start: {{payload.Start}}<br>\nFinish: {{payload.Finish}}<br>\nStop Time (Min): {{payload.Stop Time (min)}}<br>\nProblem: {{payload.Problem}}<br>\nIdentification: {{payload.Identification}}<br>\nAction: {{payload.Action}}<br>\nNote: {{payload.Note}}<br>\n",
        "output": "str",
        "x": 1140,
        "y": 920,
        "wires": [
            [
                "cca04bbb.486fe8"
            ]
        ]
    },
    {
        "id": "6a4af575.23621c",
        "type": "switch",
        "z": "e1d21b64.41dc98",
        "name": "",
        "property": "payload.command",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "UPDATE",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1830,
        "y": 940,
        "wires": [
            [
                "ee9b3131.0d63a"
            ],
            [
                "8fb58c17.385e7"
            ]
        ]
    },
    {
        "id": "ee9b3131.0d63a",
        "type": "function",
        "z": "e1d21b64.41dc98",
        "name": "",
        "func": "\nmsg.payload = \"Problem Identification and Action has been updated\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1980,
        "y": 900,
        "wires": [
            [
                "8fb58c17.385e7"
            ]
        ]
    },
    {
        "id": "8fb58c17.385e7",
        "type": "ui_toast",
        "z": "e1d21b64.41dc98",
        "position": "top right",
        "displayTime": "8",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "Updated",
        "name": "berhasil update",
        "x": 2180,
        "y": 940,
        "wires": []
    },
    {
        "id": "8fb3eddd.ab0ca",
        "type": "comment",
        "z": "e1d21b64.41dc98",
        "name": "Reset",
        "info": "",
        "x": 100,
        "y": 260,
        "wires": []
    },
    {
        "id": "79379c7f.8009e4",
        "type": "comment",
        "z": "eda02a4d.b557f8",
        "name": "Ini untuk menampilkan list machine untuk menampilkan dashboard",
        "info": "",
        "x": 260,
        "y": 60,
        "wires": []
    },
    {
        "id": "aec4ea85.6e2a68",
        "type": "inject",
        "z": "eda02a4d.b557f8",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 160,
        "y": 320,
        "wires": [
            [
                "659bdd65.6be4b4",
                "d04c4d27.19a7c",
                "fe494c0.868a6b8",
                "15546a18.382226"
            ]
        ]
    },
    {
        "id": "659bdd65.6be4b4",
        "type": "ui_dropdown",
        "z": "eda02a4d.b557f8",
        "name": "",
        "label": "Machine Name",
        "tooltip": "",
        "place": "Select option",
        "group": "4916da5c.154dc4",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "x": 410,
        "y": 320,
        "wires": [
            [
                "d04c4d27.19a7c"
            ]
        ]
    },
    {
        "id": "26a34bdc.d18fc4",
        "type": "ui_button",
        "z": "eda02a4d.b557f8",
        "name": "",
        "group": "4916da5c.154dc4",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Show OEE Data",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "machine_name",
        "payloadType": "flow",
        "topic": "topic",
        "topicType": "msg",
        "x": 843.9999694824219,
        "y": 416.99999618530273,
        "wires": [
            [
                "ec3a7835.bdd098",
                "6ca013fd.c9e44c",
                "4e4ee77a.3ead58",
                "372811dc.f6b52e",
                "19f102df.2c080d"
            ]
        ]
    },
    {
        "id": "d04c4d27.19a7c",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machine_name",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 213.99996948242188,
        "y": 436.99999618530273,
        "wires": [
            [
                "9e0f5f45.54d94"
            ]
        ]
    },
    {
        "id": "ec3a7835.bdd098",
        "type": "ui_text",
        "z": "eda02a4d.b557f8",
        "group": "f0dba0a8.e92a4",
        "order": 1,
        "width": "6",
        "height": "1",
        "name": "",
        "label": "Machine Name:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1130,
        "y": 340,
        "wires": []
    },
    {
        "id": "9e0f5f45.54d94",
        "type": "switch",
        "z": "eda02a4d.b557f8",
        "name": "is text empty?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 443.9999694824219,
        "y": 436.99999618530273,
        "wires": [
            [
                "1db2c48f.4610db"
            ],
            [
                "c48c576d.ae05e8"
            ]
        ]
    },
    {
        "id": "c48c576d.ae05e8",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "enabled true",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 633.9999694824219,
        "y": 436.99999618530273,
        "wires": [
            [
                "26a34bdc.d18fc4"
            ]
        ]
    },
    {
        "id": "1db2c48f.4610db",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "enabled false",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 633.9999694824219,
        "y": 396.99999618530273,
        "wires": [
            [
                "26a34bdc.d18fc4"
            ]
        ]
    },
    {
        "id": "372811dc.f6b52e",
        "type": "link out",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "da9689e0.3dfd58",
            "cfa0d0e7.cb661"
        ],
        "x": 1035,
        "y": 420,
        "wires": []
    },
    {
        "id": "da9689e0.3dfd58",
        "type": "link in",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "372811dc.f6b52e"
        ],
        "x": 515,
        "y": 260,
        "wires": [
            [
                "19f102df.2c080d"
            ]
        ]
    },
    {
        "id": "f55edc6.c6b032",
        "type": "inject",
        "z": "eda02a4d.b557f8",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 926.0000305175781,
        "y": 183.00000381469727,
        "wires": [
            [
                "ec3a7835.bdd098",
                "1e616c44.4d5454"
            ]
        ]
    },
    {
        "id": "e8a7087a.df6668",
        "type": "ui_date_picker",
        "z": "eda02a4d.b557f8",
        "name": "",
        "label": "Production Date",
        "group": "4916da5c.154dc4",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "topic": "payload",
        "topicType": "msg",
        "x": 423.9999694824219,
        "y": 496.99999618530273,
        "wires": [
            [
                "74c2dc2.762b424",
                "62362400.5e280c"
            ]
        ]
    },
    {
        "id": "74c2dc2.762b424",
        "type": "moment",
        "z": "eda02a4d.b557f8",
        "name": "tgl1",
        "topic": "",
        "input": "payload",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "tgl1_record",
        "outputType": "global",
        "outTz": "Asia/Jakarta",
        "x": 613.9999694824219,
        "y": 496.99999618530273,
        "wires": [
            [
                "26a34bdc.d18fc4"
            ]
        ]
    },
    {
        "id": "6ddb7904.f27b18",
        "type": "link out",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "f00d3b35.44a808"
        ],
        "x": 1238.9999694824219,
        "y": 556.9999961853027,
        "wires": []
    },
    {
        "id": "f00d3b35.44a808",
        "type": "link in",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "6ddb7904.f27b18"
        ],
        "x": 98.99996948242188,
        "y": 656.9999961853027,
        "wires": [
            [
                "d33d252c.8cfd68"
            ]
        ]
    },
    {
        "id": "62362400.5e280c",
        "type": "moment",
        "z": "eda02a4d.b557f8",
        "name": "tgl2",
        "topic": "",
        "input": "payload",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "tgl2_record",
        "outputType": "global",
        "outTz": "Asia/Jakarta",
        "x": 613.9999694824219,
        "y": 536.9999961853027,
        "wires": [
            [
                "26a34bdc.d18fc4"
            ]
        ]
    },
    {
        "id": "6ca013fd.c9e44c",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machine_name",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 933.9999694824219,
        "y": 496.99999618530273,
        "wires": [
            [
                "6ddb7904.f27b18"
            ]
        ]
    },
    {
        "id": "55324cb7.f3c574",
        "type": "ui_chart",
        "z": "eda02a4d.b557f8",
        "name": "",
        "group": "f0dba0a8.e92a4",
        "order": 6,
        "width": "17",
        "height": "6",
        "label": "Stop Time (Minute)",
        "chartType": "bar",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 1270,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "103f5654.49ec2a",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "tgl1",
                "pt": "msg",
                "to": "tgl1_record",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "tgl2",
                "pt": "msg",
                "to": "tgl2_record",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "jam",
                "pt": "msg",
                "to": "jam_awal_kerja",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 720,
        "wires": [
            [
                "102ee8f0.9f2aa7",
                "e189a9fd.157058"
            ]
        ]
    },
    {
        "id": "d33d252c.8cfd68",
        "type": "postgrestor",
        "z": "eda02a4d.b557f8",
        "name": "cari id_machine",
        "query": "SELECT id_machine FROM machine_master where machine_name='{{msg.machine_name}}';",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 223.99996948242188,
        "y": 656.9999961853027,
        "wires": [
            [
                "ece98c5f.ea539"
            ]
        ]
    },
    {
        "id": "ece98c5f.ea539",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "id_machine",
                "pt": "msg",
                "to": "payload.rows[0]['id_machine']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 183.99996948242188,
        "y": 716.9999961853027,
        "wires": [
            [
                "103f5654.49ec2a"
            ]
        ]
    },
    {
        "id": "1e616c44.4d5454",
        "type": "ui_text",
        "z": "eda02a4d.b557f8",
        "group": "f0dba0a8.e92a4",
        "order": 2,
        "width": "5",
        "height": "1",
        "name": "",
        "label": "Production Date: ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1350,
        "y": 280,
        "wires": []
    },
    {
        "id": "4e4ee77a.3ead58",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "tgl1_record",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1110,
        "y": 300,
        "wires": [
            [
                "1e616c44.4d5454"
            ]
        ]
    },
    {
        "id": "fe494c0.868a6b8",
        "type": "function",
        "z": "eda02a4d.b557f8",
        "name": "",
        "func": "var d = new Date();\nvar str = d.toDateString; //Wed Oct 23 2019\nmsg.payload = d;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 253.99996948242188,
        "y": 496.99999618530273,
        "wires": [
            [
                "e8a7087a.df6668"
            ]
        ]
    },
    {
        "id": "489a0c13.1823f4",
        "type": "comment",
        "z": "eda02a4d.b557f8",
        "name": "Reset Chart",
        "info": "",
        "x": 1010,
        "y": 640,
        "wires": []
    },
    {
        "id": "5668d222.d6696c",
        "type": "inject",
        "z": "eda02a4d.b557f8",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 1000,
        "y": 680,
        "wires": [
            [
                "dd1883b4.fae2c"
            ]
        ]
    },
    {
        "id": "15546a18.382226",
        "type": "postgrestor",
        "z": "eda02a4d.b557f8",
        "name": "Ambil machine_name",
        "query": "SELECT machine_name FROM machine_master order by machine_name;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 140,
        "y": 120,
        "wires": [
            [
                "ced02d1c.0a993"
            ]
        ]
    },
    {
        "id": "ced02d1c.0a993",
        "type": "function",
        "z": "eda02a4d.b557f8",
        "name": "create array",
        "func": "\nvar i;\nlist_machine = [];\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  list_machine.push({\"machine\":msg.payload.rows[i]['machine_name']});\n}\n\nmsg.payload = list_machine;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 120,
        "wires": [
            [
                "2d271fee.1943"
            ]
        ]
    },
    {
        "id": "2d271fee.1943",
        "type": "function",
        "z": "eda02a4d.b557f8",
        "name": "format array of objects for dropdown in dashboard",
        "func": "//Reformat array to work with dashboard\nvar reformattedArray = msg.payload.map(obj =>{\n    //declare the reformatted object\n    var rObj = {};\n    //format it for drop down\n    //\"label\":\"value\" is the format so lets move the value to the label and add some txt as well\n    //you can also replce the txt with a var if you want\n    rObj[obj.machine] = obj.machine;\n    return rObj;\n});\nmsg.payload =  reformattedArray;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 120,
        "wires": [
            [
                "821960c4.5a2e2"
            ]
        ]
    },
    {
        "id": "821960c4.5a2e2",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 220,
        "y": 180,
        "wires": [
            [
                "659bdd65.6be4b4"
            ]
        ]
    },
    {
        "id": "a06c761f.045098",
        "type": "ui_gauge",
        "z": "eda02a4d.b557f8",
        "name": "",
        "group": "d33668d6.236788",
        "order": 0,
        "width": 0,
        "height": 0,
        "gtype": "donut",
        "title": "Total OEE (%)",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#00b500"
        ],
        "seg1": "70",
        "seg2": "80",
        "x": 520,
        "y": 1020,
        "wires": []
    },
    {
        "id": "fd6c87be.359458",
        "type": "postgrestor",
        "z": "eda02a4d.b557f8",
        "name": "Ambil data OEE",
        "query": "\nselect round(cast(float8 (((net_operation-quality_loss)/loading) * 100) as numeric),2) as oee from \n(SELECT SUM(extract(epoch from coalesce(finish, NOW())-start)) as loading FROM trans_operation where id_machine={{msg.id_machine}}\nAND start between '{{msg.tgl1}} {{msg.jam}}' AND '{{msg.tgl2}} {{msg.jam}}') as loading,\n\n(select COALESCE(sum((ct/qty_perct)*qty),0) as net_operation\n\tfrom trans_output where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}') \n\tas net_operation,\n\n(select COALESCE(sum((ct/qty_perct)*qty),0) as quality_loss\n\tfrom trans_ng where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}') \n\tas quality",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 160,
        "y": 980,
        "wires": [
            [
                "226fd6ff.bba3ea"
            ]
        ]
    },
    {
        "id": "226fd6ff.bba3ea",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['oee']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 980,
        "wires": [
            [
                "a06c761f.045098"
            ]
        ]
    },
    {
        "id": "217d7ffd.db04e",
        "type": "inject",
        "z": "eda02a4d.b557f8",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 160,
        "y": 1080,
        "wires": [
            [
                "a06c761f.045098",
                "c524c801.b99088"
            ]
        ]
    },
    {
        "id": "b24c6f63.0b435",
        "type": "comment",
        "z": "eda02a4d.b557f8",
        "name": "Reset Chart",
        "info": "",
        "x": 150,
        "y": 1040,
        "wires": []
    },
    {
        "id": "d5b5188d.32ce28",
        "type": "link in",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "102ee8f0.9f2aa7"
        ],
        "x": 65,
        "y": 920,
        "wires": [
            [
                "fd6c87be.359458"
            ]
        ]
    },
    {
        "id": "102ee8f0.9f2aa7",
        "type": "link out",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "d5b5188d.32ce28",
            "fa49788a.030fb8",
            "9e5f6a2c.9540b8",
            "528a07e4.a63f58",
            "c1417c24.267a2",
            "b4375d3e.b9bcb",
            "a3daf2fc.9e689",
            "8f766bee.737b18",
            "37210aab.5b2b76",
            "322b21df.7d891e",
            "c1a23be.b5264c8",
            "1f9f3f84.eb0fe",
            "7db7cb30.cd0b14",
            "30aa35e0.24e42a"
        ],
        "x": 295,
        "y": 860,
        "wires": []
    },
    {
        "id": "c524c801.b99088",
        "type": "ui_gauge",
        "z": "eda02a4d.b557f8",
        "name": "",
        "group": "d33668d6.236788",
        "order": 0,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Total Availability(%)",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#00b500"
        ],
        "seg1": "70",
        "seg2": "80",
        "x": 529,
        "y": 1160.0000495910645,
        "wires": []
    },
    {
        "id": "1e1a7397.02591c",
        "type": "postgrestor",
        "z": "eda02a4d.b557f8",
        "name": "Ambil data AR",
        "query": "\nselect round(cast(float8 (((loading-stop)/loading) * 100) as numeric),2) as ar from \n(SELECT SUM(extract(epoch from coalesce(finish, NOW())-start)) as loading FROM trans_operation where id_machine={{msg.id_machine}}\nAND start between '{{msg.tgl1}} {{msg.jam}}' AND '{{msg.tgl2}} {{msg.jam}}') as loading,\n\n(SELECT SUM(extract(epoch from coalesce(finish, NOW())-start)) as stop FROM trans_stop where id_machine={{msg.id_machine}}\nAND start between '{{msg.tgl1}} {{msg.jam}}' AND '{{msg.tgl2}} {{msg.jam}}') as stop",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 159,
        "y": 1160.0000495910645,
        "wires": [
            [
                "a0adf8f7.85aff8"
            ]
        ]
    },
    {
        "id": "a0adf8f7.85aff8",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['ar']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 339,
        "y": 1160.0000495910645,
        "wires": [
            [
                "c524c801.b99088"
            ]
        ]
    },
    {
        "id": "fa49788a.030fb8",
        "type": "link in",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "102ee8f0.9f2aa7"
        ],
        "x": 55,
        "y": 1120,
        "wires": [
            [
                "1e1a7397.02591c"
            ]
        ]
    },
    {
        "id": "395b4cc8.466894",
        "type": "ui_gauge",
        "z": "eda02a4d.b557f8",
        "name": "",
        "group": "d33668d6.236788",
        "order": 0,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Total Performance (%)",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#00b500"
        ],
        "seg1": "70",
        "seg2": "80",
        "x": 538.9999847412109,
        "y": 1248.0001335144043,
        "wires": []
    },
    {
        "id": "63624341.7ccacc",
        "type": "postgrestor",
        "z": "eda02a4d.b557f8",
        "name": "Ambil data PR",
        "query": "\nselect round(cast(float8 (((net_operation)/(loading-stop)) * 100) as numeric),2) as pr from\n\n(SELECT SUM(extract(epoch from coalesce(finish, NOW())-start)) as loading FROM trans_operation where id_machine={{msg.id_machine}}\nAND start between '{{msg.tgl1}} {{msg.jam}}' AND '{{msg.tgl2}} {{msg.jam}}') as loading,\n\n(SELECT SUM(extract(epoch from coalesce(finish, NOW())-start)) as stop FROM trans_stop where id_machine={{msg.id_machine}}\nAND start between '{{msg.tgl1}} {{msg.jam}}' AND '{{msg.tgl2}} {{msg.jam}}') as stop,\n\n(select sum((ct/qty_perct)*qty) as net_operation\n\tfrom trans_output where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}') \n\tas net_operation\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 158.99998474121094,
        "y": 1248.0001335144043,
        "wires": [
            [
                "eb24bd62.501b"
            ]
        ]
    },
    {
        "id": "eb24bd62.501b",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['pr']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 338.99998474121094,
        "y": 1248.0001335144043,
        "wires": [
            [
                "395b4cc8.466894"
            ]
        ]
    },
    {
        "id": "9e5f6a2c.9540b8",
        "type": "link in",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "102ee8f0.9f2aa7"
        ],
        "x": 54.99998474121094,
        "y": 1208.0000839233398,
        "wires": [
            [
                "63624341.7ccacc"
            ]
        ]
    },
    {
        "id": "4bf13a7d.c9be14",
        "type": "ui_gauge",
        "z": "eda02a4d.b557f8",
        "name": "",
        "group": "d33668d6.236788",
        "order": 0,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Total Quality (%)",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#00b500"
        ],
        "seg1": "70",
        "seg2": "80",
        "x": 520,
        "y": 1400,
        "wires": []
    },
    {
        "id": "7ffdff55.278d8",
        "type": "postgrestor",
        "z": "eda02a4d.b557f8",
        "name": "Ambil data QR",
        "query": "select round(cast(float8 (((net_operation-quality_loss)/net_operation) * 100) as numeric),2) as qr from \n\n(select COALESCE(sum((ct/qty_perct)*qty),0) as net_operation\n\tfrom trans_output where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}') \n\tas net_operation,\n\n(select COALESCE(sum((ct/qty_perct)*qty),0) as quality_loss\n\tfrom trans_ng where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}') \n\tas quality_loss",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 160,
        "y": 1400,
        "wires": [
            [
                "b307eac7.306608"
            ]
        ]
    },
    {
        "id": "b307eac7.306608",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['qr']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 1400,
        "wires": [
            [
                "4bf13a7d.c9be14"
            ]
        ]
    },
    {
        "id": "528a07e4.a63f58",
        "type": "link in",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "102ee8f0.9f2aa7"
        ],
        "x": 56,
        "y": 1359.9999504089355,
        "wires": [
            [
                "7ffdff55.278d8"
            ]
        ]
    },
    {
        "id": "ad34f299.c5a9e",
        "type": "inject",
        "z": "eda02a4d.b557f8",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 180,
        "y": 1340,
        "wires": [
            [
                "395b4cc8.466894",
                "4bf13a7d.c9be14"
            ]
        ]
    },
    {
        "id": "aef6fca2.e1f55",
        "type": "comment",
        "z": "eda02a4d.b557f8",
        "name": "Reset Chart",
        "info": "",
        "x": 190,
        "y": 1300,
        "wires": []
    },
    {
        "id": "bb427571.45b288",
        "type": "comment",
        "z": "eda02a4d.b557f8",
        "name": "Ambil total loading time",
        "info": "",
        "x": 140,
        "y": 1480,
        "wires": []
    },
    {
        "id": "6723c8e5.c773b8",
        "type": "postgrestor",
        "z": "eda02a4d.b557f8",
        "name": "Loading Time",
        "query": "SELECT round(cast(float8 (COALESCE(SUM(extract(epoch from coalesce(finish, NOW())-start)),0)/60) as numeric),2) as menit \nFROM trans_operation \nwhere id_machine={{msg.id_machine}} and start between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n\n\n\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 200,
        "y": 1520,
        "wires": [
            [
                "8c66f4a0.81e738"
            ]
        ]
    },
    {
        "id": "8c66f4a0.81e738",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['menit']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 1520,
        "wires": [
            [
                "20d57a28.1de5c6"
            ]
        ]
    },
    {
        "id": "bf2ccaa9.13da08",
        "type": "inject",
        "z": "eda02a4d.b557f8",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 440,
        "y": 1580,
        "wires": [
            [
                "20d57a28.1de5c6",
                "8048903f.e295f"
            ]
        ]
    },
    {
        "id": "20d57a28.1de5c6",
        "type": "ui_text",
        "z": "eda02a4d.b557f8",
        "group": "f0dba0a8.e92a4",
        "order": 3,
        "width": "6",
        "height": "1",
        "name": "",
        "label": "Total Loading Time (Minute): ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 720,
        "y": 1520,
        "wires": []
    },
    {
        "id": "8048903f.e295f",
        "type": "ui_text",
        "z": "eda02a4d.b557f8",
        "group": "f0dba0a8.e92a4",
        "order": 4,
        "width": "6",
        "height": "1",
        "name": "",
        "label": "Total Stop Time (Minute): ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 710,
        "y": 1640,
        "wires": []
    },
    {
        "id": "3af20735.a48878",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['menit']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 1640,
        "wires": [
            [
                "8048903f.e295f"
            ]
        ]
    },
    {
        "id": "ea40cea2.09c92",
        "type": "postgrestor",
        "z": "eda02a4d.b557f8",
        "name": "Stop Time",
        "query": "SELECT round(cast(float8 (COALESCE(SUM(extract(epoch from coalesce(finish, NOW())-start)),0)/60) as numeric),2) as menit \nFROM trans_stop \nwhere id_machine={{msg.id_machine}} and start between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n\n\n\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 180,
        "y": 1640,
        "wires": [
            [
                "3af20735.a48878"
            ]
        ]
    },
    {
        "id": "c1417c24.267a2",
        "type": "link in",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "102ee8f0.9f2aa7"
        ],
        "x": 55,
        "y": 1520,
        "wires": [
            [
                "6723c8e5.c773b8"
            ]
        ]
    },
    {
        "id": "b4375d3e.b9bcb",
        "type": "link in",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "102ee8f0.9f2aa7"
        ],
        "x": 55,
        "y": 1640,
        "wires": [
            [
                "ea40cea2.09c92"
            ]
        ]
    },
    {
        "id": "fee6b517.227678",
        "type": "comment",
        "z": "eda02a4d.b557f8",
        "name": "Ambil total stop time",
        "info": "",
        "x": 130,
        "y": 1600,
        "wires": []
    },
    {
        "id": "2ef610c9.20c55",
        "type": "comment",
        "z": "eda02a4d.b557f8",
        "name": "Cari id_machine",
        "info": "",
        "x": 230,
        "y": 620,
        "wires": []
    },
    {
        "id": "3104cbc2.f70764",
        "type": "comment",
        "z": "eda02a4d.b557f8",
        "name": "Ambil data stop time untuk chart",
        "info": "",
        "x": 690,
        "y": 680,
        "wires": []
    },
    {
        "id": "e189a9fd.157058",
        "type": "postgrestor",
        "z": "eda02a4d.b557f8",
        "name": "Stop Time",
        "query": "SELECT case\nwhen category is null then 'Others'\nelse category\nend as category,round(cast(float8 (SUM(extract(epoch from coalesce(finish, NOW())-start))/60) as numeric),2) as menit\nFROM trans_stop where id_machine={{msg.id_machine}} and start between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\ngroup by category order by menit desc\n\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 620,
        "y": 720,
        "wires": [
            [
                "e6fad46d.08c178"
            ]
        ]
    },
    {
        "id": "e6fad46d.08c178",
        "type": "function",
        "z": "eda02a4d.b557f8",
        "name": "Format untuk chart",
        "func": "var data = [];\nvar label = [];\nvar i;\ndata.push([]);\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  data[0].push(msg.payload.rows[i]['menit']);\n}\n\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  label.push(msg.payload.rows[i]['category']);\n}\n\nvar m={\n    \"series\":[\"Minute\"],\n    \"data\":data,\n    \"labels\":label\n};\n\nreturn {payload:[m]};\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 840,
        "wires": [
            [
                "55324cb7.f3c574"
            ]
        ]
    },
    {
        "id": "dd1883b4.fae2c",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "Reset chart",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1070,
        "y": 760,
        "wires": [
            [
                "55324cb7.f3c574"
            ]
        ]
    },
    {
        "id": "e33e77.02059188",
        "type": "comment",
        "z": "eda02a4d.b557f8",
        "name": "Ambil data buat OEE vs Loss",
        "info": "",
        "x": 160,
        "y": 1740,
        "wires": []
    },
    {
        "id": "a3daf2fc.9e689",
        "type": "link in",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "102ee8f0.9f2aa7"
        ],
        "x": 55,
        "y": 1780,
        "wires": [
            [
                "95f1955.c3a9b68"
            ]
        ]
    },
    {
        "id": "95f1955.c3a9b68",
        "type": "postgrestor",
        "z": "eda02a4d.b557f8",
        "name": "OEE vs Loss",
        "query": "-- Untuk data Stop Loss\nSELECT round(cast(float8 (COALESCE(SUM(extract(epoch from coalesce(finish, NOW())-start)),0)/60) as numeric),2) as menit,\n'Stop Loss' as loss FROM trans_stop \nwhere id_machine={{msg.id_machine}} and start between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n\nunion all\n-- Untuk data Speed Loss\nSelect round(cast(float8 (loading-stop-net_operation) as numeric),2) as menit, 'Speed Loss' as loss from\n(SELECT SUM(extract(epoch from coalesce(finish, NOW())-start))/60 as loading FROM trans_operation where id_machine={{msg.id_machine}}\nAND start between '{{msg.tgl1}} {{msg.jam}}' AND '{{msg.tgl2}} {{msg.jam}}') as loading,\n\n(SELECT SUM(extract(epoch from coalesce(finish, NOW())-start))/60 as stop FROM trans_stop where id_machine={{msg.id_machine}}\nAND start between '{{msg.tgl1}} {{msg.jam}}' AND '{{msg.tgl2}} {{msg.jam}}') as stop,\n\n(select COALESCE(sum((ct/qty_perct)*qty)/60,0) as net_operation\n\tfrom trans_output where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n) as net_operation\n\nunion all\n\n-- Untuk data Quality Loss\n(select COALESCE(sum((ct/qty_perct)*qty)/60,0) as menit, 'Quality Loss' as loss\nfrom trans_ng where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}') \n\t\nunion all\n\n-- Untuk data OEE\nselect round(cast(float8 (net_operation-quality_loss) as numeric),2) as menit, 'OEE' as loss from \n\n(select COALESCE(sum((ct/qty_perct)*qty)/60,0) as net_operation\n\tfrom trans_output where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}') as net_operation,\n\n(select COALESCE(sum((ct/qty_perct)*qty)/60,0) as quality_loss\n\tfrom trans_ng where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}') as quality_loss\n\t\n\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 190,
        "y": 1780,
        "wires": [
            [
                "9fcc426a.f42cc"
            ]
        ]
    },
    {
        "id": "9fcc426a.f42cc",
        "type": "function",
        "z": "eda02a4d.b557f8",
        "name": "Format untuk chart",
        "func": "var data = [];\nvar label = [];\nvar i;\ndata.push([]);\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  data[0].push(msg.payload.rows[i]['menit']);\n}\n\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  label.push(msg.payload.rows[i]['loss']);\n}\n\nvar m={\n    \"series\":[\"Minute\"],\n    \"data\":data,\n    \"labels\":label\n};\n\nreturn {payload:[m]};\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 1780,
        "wires": [
            [
                "e88134fc.3bc818"
            ]
        ]
    },
    {
        "id": "e88134fc.3bc818",
        "type": "ui_chart",
        "z": "eda02a4d.b557f8",
        "name": "",
        "group": "f0dba0a8.e92a4",
        "order": 5,
        "width": "10",
        "height": "7",
        "label": "OEE VS Loss Time",
        "chartType": "pie",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": "30",
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 690,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "ecf27137.9186",
        "type": "inject",
        "z": "eda02a4d.b557f8",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 320,
        "y": 1880,
        "wires": [
            [
                "5cfb5468.65e88c"
            ]
        ]
    },
    {
        "id": "83e8630f.b2612",
        "type": "comment",
        "z": "eda02a4d.b557f8",
        "name": "Reset Chart",
        "info": "",
        "x": 310,
        "y": 1840,
        "wires": []
    },
    {
        "id": "5cfb5468.65e88c",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "Reset chart",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 1880,
        "wires": [
            [
                "e88134fc.3bc818",
                "4154888a.8c0ba8",
                "239ad256.0abcce"
            ]
        ]
    },
    {
        "id": "b4d45ad7.d92fe8",
        "type": "postgrestor",
        "z": "eda02a4d.b557f8",
        "name": "Output",
        "query": "SELECT sum(qty) as qty, 'Total Output' as part\nFROM trans_output where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\nunion all\nSELECT sum(qty) as qty, 'Total Defect' as part\nFROM trans_ng where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 170,
        "y": 1980,
        "wires": [
            [
                "b16660b2.e0ce1"
            ]
        ]
    },
    {
        "id": "b16660b2.e0ce1",
        "type": "function",
        "z": "eda02a4d.b557f8",
        "name": "Format untuk chart",
        "func": "var data = [];\nvar label = [];\nvar i;\ndata.push([]);\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  data[0].push(msg.payload.rows[i]['qty']);\n}\n\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  label.push(msg.payload.rows[i]['part']);\n}\n\nvar m={\n    \"series\":[\"Unit\"],\n    \"data\":data,\n    \"labels\":label\n};\n\nreturn {payload:[m]};\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 1980,
        "wires": [
            [
                "4154888a.8c0ba8"
            ]
        ]
    },
    {
        "id": "4154888a.8c0ba8",
        "type": "ui_chart",
        "z": "eda02a4d.b557f8",
        "name": "",
        "group": "f0dba0a8.e92a4",
        "order": 7,
        "width": "17",
        "height": "5",
        "label": "Output (unit)",
        "chartType": "horizontalBar",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 690,
        "y": 1980,
        "wires": [
            []
        ]
    },
    {
        "id": "3923a792.e94b98",
        "type": "comment",
        "z": "eda02a4d.b557f8",
        "name": "Ambil data output",
        "info": "",
        "x": 120,
        "y": 1940,
        "wires": []
    },
    {
        "id": "8f766bee.737b18",
        "type": "link in",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "102ee8f0.9f2aa7"
        ],
        "x": 55,
        "y": 1980,
        "wires": [
            [
                "b4d45ad7.d92fe8"
            ]
        ]
    },
    {
        "id": "a4df4825.70df58",
        "type": "postgrestor",
        "z": "eda02a4d.b557f8",
        "name": "Defect",
        "query": "SELECT case\nwhen category is null then 'Others'\nelse category\nend as category,sum(qty) as qty\nFROM trans_ng where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\ngroup by category order by qty desc",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 170,
        "y": 2100,
        "wires": [
            [
                "add2b50d.4933b8"
            ]
        ]
    },
    {
        "id": "add2b50d.4933b8",
        "type": "function",
        "z": "eda02a4d.b557f8",
        "name": "Format untuk chart",
        "func": "var data = [];\nvar label = [];\nvar i;\ndata.push([]);\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  data[0].push(msg.payload.rows[i]['qty']);\n}\n\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  label.push(msg.payload.rows[i]['category']);\n}\n\nvar m={\n    \"series\":[\"Unit\"],\n    \"data\":data,\n    \"labels\":label\n};\n\nreturn {payload:[m]};\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 2100,
        "wires": [
            [
                "239ad256.0abcce"
            ]
        ]
    },
    {
        "id": "239ad256.0abcce",
        "type": "ui_chart",
        "z": "eda02a4d.b557f8",
        "name": "",
        "group": "f0dba0a8.e92a4",
        "order": 8,
        "width": "17",
        "height": "6",
        "label": "Defect Category (Unit)",
        "chartType": "bar",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 720,
        "y": 2100,
        "wires": [
            []
        ]
    },
    {
        "id": "41f2cfa0.33ed",
        "type": "comment",
        "z": "eda02a4d.b557f8",
        "name": "Ambil defect category",
        "info": "",
        "x": 140,
        "y": 2060,
        "wires": []
    },
    {
        "id": "37210aab.5b2b76",
        "type": "link in",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "102ee8f0.9f2aa7"
        ],
        "x": 55,
        "y": 2100,
        "wires": [
            [
                "a4df4825.70df58"
            ]
        ]
    },
    {
        "id": "19f102df.2c080d",
        "type": "ui_switch",
        "z": "eda02a4d.b557f8",
        "name": "",
        "label": "Remember machine",
        "tooltip": "",
        "group": "4916da5c.154dc4",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 666.0000305175781,
        "y": 263.00000381469727,
        "wires": [
            [
                "bf726323.85861"
            ]
        ]
    },
    {
        "id": "bf726323.85861",
        "type": "switch",
        "z": "eda02a4d.b557f8",
        "name": "If off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 836.0000305175781,
        "y": 263.00000381469727,
        "wires": [
            [
                "eeb5da90.7f1a28",
                "659bdd65.6be4b4"
            ]
        ]
    },
    {
        "id": "eeb5da90.7f1a28",
        "type": "function",
        "z": "eda02a4d.b557f8",
        "name": "set False",
        "func": "msg.payload = false;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 886.0000305175781,
        "y": 303.00000381469727,
        "wires": [
            [
                "659bdd65.6be4b4",
                "9e0f5f45.54d94"
            ]
        ]
    },
    {
        "id": "399ea4d1.78cccc",
        "type": "inject",
        "z": "eda02a4d.b557f8",
        "name": "Init false",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 500,
        "y": 180,
        "wires": [
            [
                "19f102df.2c080d"
            ]
        ]
    },
    {
        "id": "cd8d6a35.7f7268",
        "type": "function",
        "z": "eda02a4d.b557f8",
        "name": "set False",
        "func": "msg.payload = false;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 2360,
        "wires": [
            [
                "24b29029.15351"
            ]
        ]
    },
    {
        "id": "fad0e41d.8bd098",
        "type": "postgrestor",
        "z": "eda02a4d.b557f8",
        "name": "Ambil data output",
        "query": "select concat('H',extract(hour from TIMESTAMP '{{msg.jam2_output}}')) as jam_output, cast(COALESCE(sum(qty),0) as integer) as qty\nfrom trans_output where id_machine={{msg.id_machine}} and time between '{{msg.jam1_output}}' and '{{msg.jam2_output}}'\n\n\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 390,
        "y": 2420,
        "wires": [
            [
                "93d63b23.4c3908"
            ]
        ]
    },
    {
        "id": "2a17483b.6ba3b8",
        "type": "ui_chart",
        "z": "eda02a4d.b557f8",
        "name": "",
        "group": "f0dba0a8.e92a4",
        "order": 9,
        "width": "17",
        "height": "6",
        "label": "Hourly Output (unit)",
        "chartType": "bar",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 950,
        "y": 2420,
        "wires": [
            [
                "64ee46b6.6705b8"
            ]
        ]
    },
    {
        "id": "1ab93395.e3367c",
        "type": "comment",
        "z": "eda02a4d.b557f8",
        "name": "Reset Chart",
        "info": "",
        "x": 713.9999694824219,
        "y": 2236.9999961853027,
        "wires": []
    },
    {
        "id": "24b29029.15351",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "Reset chart",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 773.9999694824219,
        "y": 2356.9999961853027,
        "wires": [
            [
                "2a17483b.6ba3b8"
            ]
        ]
    },
    {
        "id": "64ee46b6.6705b8",
        "type": "switch",
        "z": "eda02a4d.b557f8",
        "name": "Cek jam1 apakah < jam2",
        "property": "jam1_output",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "jam_akhir_output",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 870,
        "y": 2540,
        "wires": [
            [
                "b93ecc39.dbcbb"
            ]
        ]
    },
    {
        "id": "c11a5d02.cc3cf",
        "type": "inject",
        "z": "eda02a4d.b557f8",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 703.9999694824219,
        "y": 2276.9999961853027,
        "wires": [
            [
                "24b29029.15351"
            ]
        ]
    },
    {
        "id": "b93ecc39.dbcbb",
        "type": "moment",
        "z": "eda02a4d.b557f8",
        "name": "Set jam1 baru",
        "topic": "",
        "input": "jam1_output",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "hours",
        "adjDir": "add",
        "format": "YYYY-MM-DD HH:mm:ss",
        "locale": "id-ID",
        "output": "jam1_output",
        "outputType": "msg",
        "outTz": "Asia/Jakarta",
        "x": 360,
        "y": 2640,
        "wires": [
            [
                "ae57dbad.389578"
            ]
        ]
    },
    {
        "id": "ae57dbad.389578",
        "type": "moment",
        "z": "eda02a4d.b557f8",
        "name": "Set jam2 baru",
        "topic": "",
        "input": "jam2_output",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "hours",
        "adjDir": "add",
        "format": "YYYY-MM-DD HH:mm:ss",
        "locale": "id-ID",
        "output": "jam2_output",
        "outputType": "msg",
        "outTz": "Asia/Jakarta",
        "x": 560,
        "y": 2640,
        "wires": [
            [
                "fad0e41d.8bd098"
            ]
        ]
    },
    {
        "id": "123ad60b.95592a",
        "type": "comment",
        "z": "eda02a4d.b557f8",
        "name": "Cari output tiap jam",
        "info": "",
        "x": 390,
        "y": 2380,
        "wires": []
    },
    {
        "id": "cfa0d0e7.cb661",
        "type": "link in",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "372811dc.f6b52e"
        ],
        "x": 475,
        "y": 2320,
        "wires": [
            [
                "cd8d6a35.7f7268"
            ]
        ]
    },
    {
        "id": "1f9f3f84.eb0fe",
        "type": "link in",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "102ee8f0.9f2aa7"
        ],
        "x": 75,
        "y": 2240,
        "wires": [
            [
                "91152a82.c446c8"
            ]
        ]
    },
    {
        "id": "91152a82.c446c8",
        "type": "function",
        "z": "eda02a4d.b557f8",
        "name": "Ambil jam1 dan jam  akhir",
        "func": "\nmsg.jam1_output = msg.tgl1 + ' ' + msg.jam;\nmsg.jam_akhir_output = msg.tgl2 + ' ' + msg.jam;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 230,
        "y": 2300,
        "wires": [
            [
                "c4421495.cc4bc8",
                "74e2de43.f6b2b"
            ]
        ]
    },
    {
        "id": "c4421495.cc4bc8",
        "type": "moment",
        "z": "eda02a4d.b557f8",
        "name": "Ambil jam 2",
        "topic": "",
        "input": "jam1_output",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "hours",
        "adjDir": "add",
        "format": "YYYY-MM-DD HH:mm:ss",
        "locale": "id-ID",
        "output": "jam2_output",
        "outputType": "msg",
        "outTz": "Asia/Jakarta",
        "x": 110,
        "y": 2360,
        "wires": [
            [
                "fad0e41d.8bd098"
            ]
        ]
    },
    {
        "id": "74e2de43.f6b2b",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "jam_akhir_output",
                "pt": "global",
                "to": "jam_akhir_output",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 2220,
        "wires": [
            []
        ]
    },
    {
        "id": "7644e38e.529d3c",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['qty']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 2420,
        "wires": [
            [
                "2a17483b.6ba3b8"
            ]
        ]
    },
    {
        "id": "93d63b23.4c3908",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "payload.rows[0]['jam_output']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 2480,
        "wires": [
            [
                "7644e38e.529d3c"
            ]
        ]
    },
    {
        "id": "7db7cb30.cd0b14",
        "type": "link in",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "102ee8f0.9f2aa7"
        ],
        "x": 55,
        "y": 2760,
        "wires": [
            [
                "b7417cb.1fadc8"
            ]
        ]
    },
    {
        "id": "b7417cb.1fadc8",
        "type": "postgrestor",
        "z": "eda02a4d.b557f8",
        "name": "Output",
        "query": "SELECT a.id_type as id, b.type as type, a.ct as ct, a.qty_perct as qty_perct, sum(a.qty) as qty_out, ((sum(a.qty)*a.ct)/a.qty_perct)/60 as total_time\nFROM trans_output a inner join list_ct b on a.id_type=b.id_type where a.id_machine={{msg.id_machine}} and a.time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\ngroup by a.id_type,b.type,a.qty,a.ct,a.qty_perct",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 170,
        "y": 2760,
        "wires": [
            [
                "f0b9c54.4649438"
            ]
        ]
    },
    {
        "id": "2dd532b6.ffd51e",
        "type": "comment",
        "z": "eda02a4d.b557f8",
        "name": "Ambil tabel output",
        "info": "",
        "x": 130,
        "y": 2720,
        "wires": []
    },
    {
        "id": "f0b9c54.4649438",
        "type": "function",
        "z": "eda02a4d.b557f8",
        "name": "create array",
        "func": "\nvar i;\nlist_type = [];\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  list_type.push({\"No\":i+1,\"Type\":msg.payload.rows[i]['type'],\n  \"CT\":msg.payload.rows[i]['ct'],\"Qty/CT\":msg.payload.rows[i]['qty_perct'],\"Output\":msg.payload.rows[i]['qty_out'],\n    \"Time (min)\":msg.payload.rows[i]['total_time']});\n}\n\nmsg.payload = list_type;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 2760,
        "wires": [
            [
                "b24d1121.75104"
            ]
        ]
    },
    {
        "id": "b24d1121.75104",
        "type": "ui_table",
        "z": "eda02a4d.b557f8",
        "group": "f0dba0a8.e92a4",
        "name": "Table Output",
        "order": 11,
        "width": "17",
        "height": "6",
        "columns": [],
        "outputs": 0,
        "cts": false,
        "x": 570,
        "y": 2760,
        "wires": []
    },
    {
        "id": "30aa35e0.24e42a",
        "type": "link in",
        "z": "eda02a4d.b557f8",
        "name": "",
        "links": [
            "102ee8f0.9f2aa7"
        ],
        "x": 55,
        "y": 2980,
        "wires": [
            [
                "22417d71.9b1ec2"
            ]
        ]
    },
    {
        "id": "22417d71.9b1ec2",
        "type": "postgrestor",
        "z": "eda02a4d.b557f8",
        "name": "Defect",
        "query": "SELECT a.id_type as id, b.type as type, a.ct as ct, a.qty_perct as qty_perct, sum(a.qty) as qty_out, ((sum(a.qty)*a.ct)/a.qty_perct)/60 as total_time\nFROM trans_ng a inner join list_ct b on a.id_type=b.id_type where a.id_machine={{msg.id_machine}} and a.time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\ngroup by a.id_type,b.type,a.qty,a.ct,a.qty_perct",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 170,
        "y": 2980,
        "wires": [
            [
                "8b9dacae.4d875"
            ]
        ]
    },
    {
        "id": "ff302ddb.b7a7e",
        "type": "comment",
        "z": "eda02a4d.b557f8",
        "name": "Ambil tabel defect",
        "info": "",
        "x": 130,
        "y": 2940,
        "wires": []
    },
    {
        "id": "8b9dacae.4d875",
        "type": "function",
        "z": "eda02a4d.b557f8",
        "name": "create array",
        "func": "\nvar i;\nlist_type = [];\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  list_type.push({\"No\":i+1,\"Type\":msg.payload.rows[i]['type'],\n  \"CT\":msg.payload.rows[i]['ct'],\"Qty/CT\":msg.payload.rows[i]['qty_perct'],\"Defect\":msg.payload.rows[i]['qty_out'],\n    \"Time (min)\":msg.payload.rows[i]['total_time']});\n}\n\nmsg.payload = list_type;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 2980,
        "wires": [
            [
                "318ff08b.13072"
            ]
        ]
    },
    {
        "id": "318ff08b.13072",
        "type": "ui_table",
        "z": "eda02a4d.b557f8",
        "group": "f0dba0a8.e92a4",
        "name": "Table Defect",
        "order": 12,
        "width": "17",
        "height": "6",
        "columns": [],
        "outputs": 0,
        "cts": false,
        "x": 570,
        "y": 2980,
        "wires": []
    },
    {
        "id": "f8daee85.99045",
        "type": "inject",
        "z": "eda02a4d.b557f8",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 180,
        "y": 2860,
        "wires": [
            [
                "2986f584.060e7a"
            ]
        ]
    },
    {
        "id": "10cba5b4.2cf2aa",
        "type": "comment",
        "z": "eda02a4d.b557f8",
        "name": "Reset Chart",
        "info": "",
        "x": 190,
        "y": 2820,
        "wires": []
    },
    {
        "id": "2986f584.060e7a",
        "type": "change",
        "z": "eda02a4d.b557f8",
        "name": "Reset chart",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 370,
        "y": 2860,
        "wires": [
            [
                "b24d1121.75104",
                "318ff08b.13072"
            ]
        ]
    },
    {
        "id": "7d08a089.0ecf8",
        "type": "ui_template",
        "z": "eda02a4d.b557f8",
        "group": "f0dba0a8.e92a4",
        "name": "",
        "order": 10,
        "width": 0,
        "height": 0,
        "format": "<div><h3><b>Tables of Total Output and Defect</b></h2>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 100,
        "y": 2680,
        "wires": [
            []
        ]
    },
    {
        "id": "d86bd919.f2e0b8",
        "type": "debug",
        "z": "eda02a4d.b557f8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 2020,
        "wires": []
    },
    {
        "id": "40489c82.d5c524",
        "type": "comment",
        "z": "4d5988fc.947f48",
        "name": "Ini untuk menampilkan list machine untuk menampilkan dashboard",
        "info": "",
        "x": 280,
        "y": 40,
        "wires": []
    },
    {
        "id": "fb32d3f.e0f713",
        "type": "inject",
        "z": "4d5988fc.947f48",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 120,
        "y": 340,
        "wires": [
            [
                "68c3093.e8c16f8",
                "cb447a72.2181c8",
                "b8637fd2.a31de",
                "c1808f08.3b1d5"
            ]
        ]
    },
    {
        "id": "68c3093.e8c16f8",
        "type": "ui_dropdown",
        "z": "4d5988fc.947f48",
        "name": "",
        "label": "Machine Name",
        "tooltip": "",
        "place": "Select option",
        "group": "dbd48bda.239868",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "x": 423.9999694824219,
        "y": 336.99999618530273,
        "wires": [
            [
                "cb447a72.2181c8"
            ]
        ]
    },
    {
        "id": "5f014c44.245944",
        "type": "ui_button",
        "z": "4d5988fc.947f48",
        "name": "",
        "group": "dbd48bda.239868",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Show  Daily OEE Data",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "machine_name",
        "payloadType": "flow",
        "topic": "topic",
        "topicType": "msg",
        "x": 863.9999694824219,
        "y": 416.99999618530273,
        "wires": [
            [
                "555ab582.ea388c",
                "f92d6552.bbdd18",
                "b8a953ea.8236c",
                "5bcdab5b.005ac4",
                "95ffdf84.07f53",
                "a7e3b204.591c2"
            ]
        ]
    },
    {
        "id": "cb447a72.2181c8",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machine_name",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 213.99996948242188,
        "y": 436.99999618530273,
        "wires": [
            [
                "cacdc6a9.dbbeb8"
            ]
        ]
    },
    {
        "id": "555ab582.ea388c",
        "type": "ui_text",
        "z": "4d5988fc.947f48",
        "group": "409997ac.e92658",
        "order": 1,
        "width": "6",
        "height": "1",
        "name": "",
        "label": "Machine Name:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1260,
        "y": 340,
        "wires": []
    },
    {
        "id": "cacdc6a9.dbbeb8",
        "type": "switch",
        "z": "4d5988fc.947f48",
        "name": "is text empty?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 443.9999694824219,
        "y": 436.99999618530273,
        "wires": [
            [
                "ebdd8e37.e741f"
            ],
            [
                "3af9bf4b.a20d7"
            ]
        ]
    },
    {
        "id": "3af9bf4b.a20d7",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "enabled true",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 633.9999694824219,
        "y": 436.99999618530273,
        "wires": [
            [
                "5f014c44.245944"
            ]
        ]
    },
    {
        "id": "ebdd8e37.e741f",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "enabled false",
        "rules": [
            {
                "t": "set",
                "p": "enabled",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 633.9999694824219,
        "y": 396.99999618530273,
        "wires": [
            [
                "5f014c44.245944"
            ]
        ]
    },
    {
        "id": "4e3e113e.e653c",
        "type": "function",
        "z": "4d5988fc.947f48",
        "name": "set False",
        "func": "msg.payload = false;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 800,
        "wires": [
            [
                "710ec1cc.060db"
            ]
        ]
    },
    {
        "id": "a7e3b204.591c2",
        "type": "link out",
        "z": "4d5988fc.947f48",
        "name": "",
        "links": [
            "4d48b5c.6c0bf4c",
            "f6fa6fec.698cc",
            "ca323cfd.6d931",
            "4aa1f11f.504ea",
            "bab21794.cb9ca8"
        ],
        "x": 1095,
        "y": 420,
        "wires": []
    },
    {
        "id": "11d669f1.05a5a6",
        "type": "inject",
        "z": "4d5988fc.947f48",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 940,
        "y": 200,
        "wires": [
            [
                "555ab582.ea388c",
                "e9e7c402.c19da8",
                "ac0a600d.868cc"
            ]
        ]
    },
    {
        "id": "f977769e.8c7568",
        "type": "ui_date_picker",
        "z": "4d5988fc.947f48",
        "name": "",
        "label": "Start Date",
        "group": "dbd48bda.239868",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "topic": "payload",
        "topicType": "msg",
        "x": 400,
        "y": 540,
        "wires": [
            [
                "32a60db4.dc2752"
            ]
        ]
    },
    {
        "id": "32a60db4.dc2752",
        "type": "moment",
        "z": "4d5988fc.947f48",
        "name": "tgl_awal",
        "topic": "",
        "input": "payload",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "tgl_awal_daily",
        "outputType": "global",
        "outTz": "Asia/Jakarta",
        "x": 620,
        "y": 540,
        "wires": [
            [
                "5f014c44.245944"
            ]
        ]
    },
    {
        "id": "c2567c13.4c6f3",
        "type": "postgrestor",
        "z": "4d5988fc.947f48",
        "name": "Ambil data OEE harian",
        "query": "select round(cast(float8 (((net_operation-quality_loss)/loading) * 100) as numeric),2) as oee from \n(SELECT SUM(extract(epoch from coalesce(finish, NOW())-start)) as loading FROM trans_operation where id_machine={{msg.id_machine}}\nand start between '{{msg.tgl1}} {{msg.jam}}' AND '{{msg.tgl2}} {{msg.jam}}') as loading,\n\n(select COALESCE(sum((ct/qty_perct)*qty),0) as net_operation\nfrom trans_output where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}') \nas net_operation,\n\n(select COALESCE(sum((ct/qty_perct)*qty),0) as quality_loss\nfrom trans_ng where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}') \nas quality_loss",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 740,
        "y": 860,
        "wires": [
            [
                "a453c106.3f943"
            ]
        ]
    },
    {
        "id": "cff9e1.7f10162",
        "type": "link out",
        "z": "4d5988fc.947f48",
        "name": "",
        "links": [
            "9c7026be.3713d8"
        ],
        "x": 1238.9999694824219,
        "y": 556.9999961853027,
        "wires": []
    },
    {
        "id": "9c7026be.3713d8",
        "type": "link in",
        "z": "4d5988fc.947f48",
        "name": "",
        "links": [
            "cff9e1.7f10162",
            "6e671666.88e368"
        ],
        "x": 118.99996948242188,
        "y": 736.9999961853027,
        "wires": [
            [
                "6a439276.60752c"
            ]
        ]
    },
    {
        "id": "cc07eea1.a4f71",
        "type": "moment",
        "z": "4d5988fc.947f48",
        "name": "tgl_akhir",
        "topic": "",
        "input": "payload",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": "0",
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "tgl_akhir_daily",
        "outputType": "global",
        "outTz": "Asia/Jakarta",
        "x": 620,
        "y": 580,
        "wires": [
            [
                "5f014c44.245944"
            ]
        ]
    },
    {
        "id": "f92d6552.bbdd18",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "machine_name",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 500,
        "wires": [
            [
                "cff9e1.7f10162"
            ]
        ]
    },
    {
        "id": "b5d51102.492ba",
        "type": "ui_chart",
        "z": "4d5988fc.947f48",
        "name": "",
        "group": "409997ac.e92658",
        "order": 8,
        "width": "18",
        "height": "7",
        "label": "OEE (%)",
        "chartType": "bar",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 1260,
        "y": 860,
        "wires": [
            [
                "44eca2b0.15145c"
            ]
        ]
    },
    {
        "id": "90ca35b8.d40538",
        "type": "comment",
        "z": "4d5988fc.947f48",
        "name": "Cari id_machine",
        "info": "",
        "x": 180,
        "y": 700,
        "wires": []
    },
    {
        "id": "c06cd3cb.275ee",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "Set tgl1 = tgl awal",
        "rules": [
            {
                "t": "set",
                "p": "tgl1",
                "pt": "msg",
                "to": "tgl_awal_daily",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "jam",
                "pt": "msg",
                "to": "jam_awal_kerja",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 860,
        "wires": [
            [
                "c2567c13.4c6f3",
                "561b113e.d60cc",
                "fed5ede5.b3a23"
            ]
        ]
    },
    {
        "id": "6a439276.60752c",
        "type": "postgrestor",
        "z": "4d5988fc.947f48",
        "name": "cari id_machine",
        "query": "SELECT id_machine FROM machine_master where machine_name='{{msg.machine_name}}';",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 243.99996948242188,
        "y": 736.9999961853027,
        "wires": [
            [
                "4ce1b3ce.506d3c"
            ]
        ]
    },
    {
        "id": "4ce1b3ce.506d3c",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "id_machine",
                "pt": "msg",
                "to": "payload.rows[0]['id_machine']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 203.99996948242188,
        "y": 796.9999961853027,
        "wires": [
            [
                "9ac604da.68a278"
            ]
        ]
    },
    {
        "id": "a453c106.3f943",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "Set nilai OEE dan topic tgl1",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['oee']",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "tgl1",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 860,
        "wires": [
            [
                "b5d51102.492ba"
            ]
        ]
    },
    {
        "id": "e9e7c402.c19da8",
        "type": "ui_text",
        "z": "4d5988fc.947f48",
        "group": "409997ac.e92658",
        "order": 3,
        "width": "6",
        "height": "1",
        "name": "",
        "label": "Start Date: ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1446.0000305175781,
        "y": 223.00000381469727,
        "wires": []
    },
    {
        "id": "b8a953ea.8236c",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "Show tgl1",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "tgl_awal_daily",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1236.0000305175781,
        "y": 263.00000381469727,
        "wires": [
            [
                "e9e7c402.c19da8"
            ]
        ]
    },
    {
        "id": "b8637fd2.a31de",
        "type": "function",
        "z": "4d5988fc.947f48",
        "name": "",
        "func": "var d = new Date();\nvar str = d.toDateString; //Wed Oct 23 2019\nmsg.payload = d;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 120,
        "y": 560,
        "wires": [
            [
                "f15ed59c.1c3a38",
                "7bd11b7.cf7a8e4"
            ]
        ]
    },
    {
        "id": "f6fa6fec.698cc",
        "type": "link in",
        "z": "4d5988fc.947f48",
        "name": "",
        "links": [
            "a7e3b204.591c2"
        ],
        "x": 835,
        "y": 800,
        "wires": [
            [
                "4e3e113e.e653c"
            ]
        ]
    },
    {
        "id": "624f6a5a.4a6ab4",
        "type": "comment",
        "z": "4d5988fc.947f48",
        "name": "Reset Chart",
        "info": "",
        "x": 1053.9999694824219,
        "y": 676.9999961853027,
        "wires": []
    },
    {
        "id": "710ec1cc.060db",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "Reset chart",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1113.9999694824219,
        "y": 796.9999961853027,
        "wires": [
            [
                "b5d51102.492ba"
            ]
        ]
    },
    {
        "id": "44eca2b0.15145c",
        "type": "switch",
        "z": "4d5988fc.947f48",
        "name": "Cek tgl 1 apakah < tgl_akhir",
        "property": "tgl1",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "tgl_akhir_daily",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1020,
        "y": 960,
        "wires": [
            [
                "6e2682b7.8bcd2c"
            ]
        ]
    },
    {
        "id": "6924267.d9e57d8",
        "type": "inject",
        "z": "4d5988fc.947f48",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 1043.9999694824219,
        "y": 716.9999961853027,
        "wires": [
            [
                "710ec1cc.060db"
            ]
        ]
    },
    {
        "id": "c1808f08.3b1d5",
        "type": "postgrestor",
        "z": "4d5988fc.947f48",
        "name": "Ambil machine_name",
        "query": "SELECT machine_name FROM machine_master order by machine_name ;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 160,
        "y": 100,
        "wires": [
            [
                "d7283c20.9dfdb"
            ]
        ]
    },
    {
        "id": "d7283c20.9dfdb",
        "type": "function",
        "z": "4d5988fc.947f48",
        "name": "create array",
        "func": "\nvar i;\nlist_machine = [];\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  list_machine.push({\"machine\":msg.payload.rows[i]['machine_name']});\n}\n\nmsg.payload = list_machine;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 100,
        "wires": [
            [
                "303cb24d.f7d75e"
            ]
        ]
    },
    {
        "id": "303cb24d.f7d75e",
        "type": "function",
        "z": "4d5988fc.947f48",
        "name": "format array of objects for dropdown in dashboard",
        "func": "//Reformat array to work with dashboard\nvar reformattedArray = msg.payload.map(obj =>{\n    //declare the reformatted object\n    var rObj = {};\n    //format it for drop down\n    //\"label\":\"value\" is the format so lets move the value to the label and add some txt as well\n    //you can also replce the txt with a var if you want\n    rObj[obj.machine] = obj.machine;\n    return rObj;\n});\nmsg.payload =  reformattedArray;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 100,
        "wires": [
            [
                "2a79899b.b06f56"
            ]
        ]
    },
    {
        "id": "2a79899b.b06f56",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "options",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 220,
        "y": 180,
        "wires": [
            [
                "68c3093.e8c16f8"
            ]
        ]
    },
    {
        "id": "3f8f864c.55d1da",
        "type": "ui_gauge",
        "z": "4d5988fc.947f48",
        "name": "",
        "group": "ab753a60.c56208",
        "order": 0,
        "width": 0,
        "height": 0,
        "gtype": "donut",
        "title": "Total OEE (%)",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#00b500"
        ],
        "seg1": "70",
        "seg2": "80",
        "x": 536.0000305175781,
        "y": 1223.0000038146973,
        "wires": []
    },
    {
        "id": "348d3843.c1ed88",
        "type": "postgrestor",
        "z": "4d5988fc.947f48",
        "name": "Ambil data OEE",
        "query": "\nselect round(cast(float8 (((net_operation-quality_loss)/loading) * 100) as numeric),2) as oee from \n(SELECT SUM(extract(epoch from coalesce(finish, NOW())-start)) as loading FROM trans_operation where id_machine={{msg.id_machine}}\nAND start between '{{msg.tgl1}} {{msg.jam}}' AND '{{msg.tgl2}} {{msg.jam}}') as loading,\n\n(select COALESCE(sum((ct/qty_perct)*qty),0) as net_operation\nfrom trans_output where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}') \nas net_operation,\n\n(select COALESCE(sum((ct/qty_perct)*qty),0) as quality_loss\nfrom trans_ng where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}') \nas quality_loss",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 176.00003051757812,
        "y": 1183.0000038146973,
        "wires": [
            [
                "78cf01a.150a4"
            ]
        ]
    },
    {
        "id": "78cf01a.150a4",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['oee']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 356.0000305175781,
        "y": 1183.0000038146973,
        "wires": [
            [
                "3f8f864c.55d1da"
            ]
        ]
    },
    {
        "id": "fe6bcf9a.d5d0b",
        "type": "inject",
        "z": "4d5988fc.947f48",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 176.00003051757812,
        "y": 1283.0000038146973,
        "wires": [
            [
                "3f8f864c.55d1da",
                "6b51a980.86e8d8"
            ]
        ]
    },
    {
        "id": "b7d63c9c.ab296",
        "type": "comment",
        "z": "4d5988fc.947f48",
        "name": "Reset Chart",
        "info": "",
        "x": 166.00003051757812,
        "y": 1243.0000038146973,
        "wires": []
    },
    {
        "id": "66b4ca0.a6cb838",
        "type": "link in",
        "z": "4d5988fc.947f48",
        "name": "",
        "links": [
            "d2c392c7.2ab0a",
            "1d4cb3e5.49e71c"
        ],
        "x": 81.00003051757812,
        "y": 1123.0000038146973,
        "wires": [
            [
                "348d3843.c1ed88"
            ]
        ]
    },
    {
        "id": "d2c392c7.2ab0a",
        "type": "link out",
        "z": "4d5988fc.947f48",
        "name": "",
        "links": [
            "66b4ca0.a6cb838",
            "74a4cc84.d890c4",
            "69dd7d18.7b7d84",
            "58888bec.f4f394",
            "844e6c62.c175b",
            "64e9e17a.a9bd3",
            "be5204f.1abe7f8",
            "311443b2.e4304c"
        ],
        "x": 95,
        "y": 1060,
        "wires": []
    },
    {
        "id": "6b51a980.86e8d8",
        "type": "ui_gauge",
        "z": "4d5988fc.947f48",
        "name": "",
        "group": "ab753a60.c56208",
        "order": 0,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Total Availability(%)",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#00b500"
        ],
        "seg1": "70",
        "seg2": "80",
        "x": 545.0000305175781,
        "y": 1363.0000534057617,
        "wires": []
    },
    {
        "id": "68316fa3.dde02",
        "type": "postgrestor",
        "z": "4d5988fc.947f48",
        "name": "Ambil data AR",
        "query": "\nselect round(cast(float8 (((loading-stop)/loading) * 100) as numeric),2) as ar from \n(SELECT SUM(extract(epoch from coalesce(finish, NOW())-start)) as loading FROM trans_operation where id_machine={{msg.id_machine}}\nAND start between '{{msg.tgl1}} {{msg.jam}}' AND '{{msg.tgl2}} {{msg.jam}}') as loading,\n\n(SELECT SUM(extract(epoch from coalesce(finish, NOW())-start)) as stop FROM trans_stop where id_machine={{msg.id_machine}}\nAND start between '{{msg.tgl1}} {{msg.jam}}' AND '{{msg.tgl2}} {{msg.jam}}') as stop",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 175.00003051757812,
        "y": 1363.0000534057617,
        "wires": [
            [
                "5eb322bc.49186c"
            ]
        ]
    },
    {
        "id": "5eb322bc.49186c",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['ar']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 355.0000305175781,
        "y": 1363.0000534057617,
        "wires": [
            [
                "6b51a980.86e8d8"
            ]
        ]
    },
    {
        "id": "74a4cc84.d890c4",
        "type": "link in",
        "z": "4d5988fc.947f48",
        "name": "",
        "links": [
            "d2c392c7.2ab0a",
            "1d4cb3e5.49e71c"
        ],
        "x": 71.00003051757812,
        "y": 1323.0000038146973,
        "wires": [
            [
                "68316fa3.dde02"
            ]
        ]
    },
    {
        "id": "d2ac97f1.a42d18",
        "type": "ui_gauge",
        "z": "4d5988fc.947f48",
        "name": "",
        "group": "ab753a60.c56208",
        "order": 0,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Total Performance (%)",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#00b500"
        ],
        "seg1": "70",
        "seg2": "80",
        "x": 555.0000152587891,
        "y": 1451.0001373291016,
        "wires": []
    },
    {
        "id": "4079bdcd.a2f154",
        "type": "postgrestor",
        "z": "4d5988fc.947f48",
        "name": "Ambil data PR",
        "query": "\nselect round(cast(float8 (((net_operation)/(loading-stop)) * 100) as numeric),2) as pr from \n(SELECT SUM(extract(epoch from coalesce(finish, NOW())-start)) as loading FROM trans_operation where id_machine={{msg.id_machine}}\nAND start between '{{msg.tgl1}} {{msg.jam}}' AND '{{msg.tgl2}} {{msg.jam}}') as loading,\n\n(SELECT SUM(extract(epoch from coalesce(finish, NOW())-start)) as stop FROM trans_stop where id_machine={{msg.id_machine}}\nAND start between '{{msg.tgl1}} {{msg.jam}}' AND '{{msg.tgl2}} {{msg.jam}}') as stop,\n\n(select COALESCE(sum((ct/qty_perct)*qty),0) as net_operation\nfrom trans_output where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}') \nas net_operation\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 175.00001525878906,
        "y": 1451.0001373291016,
        "wires": [
            [
                "a2561c61.64a82"
            ]
        ]
    },
    {
        "id": "a2561c61.64a82",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['pr']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 355.00001525878906,
        "y": 1451.0001373291016,
        "wires": [
            [
                "d2ac97f1.a42d18"
            ]
        ]
    },
    {
        "id": "69dd7d18.7b7d84",
        "type": "link in",
        "z": "4d5988fc.947f48",
        "name": "",
        "links": [
            "d2c392c7.2ab0a",
            "1d4cb3e5.49e71c"
        ],
        "x": 71.00001525878906,
        "y": 1411.000087738037,
        "wires": [
            [
                "4079bdcd.a2f154"
            ]
        ]
    },
    {
        "id": "3d0b13ed.c3236c",
        "type": "ui_gauge",
        "z": "4d5988fc.947f48",
        "name": "",
        "group": "ab753a60.c56208",
        "order": 0,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Total Quality (%)",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ca3838",
            "#e6e600",
            "#00b500"
        ],
        "seg1": "70",
        "seg2": "80",
        "x": 536.0000305175781,
        "y": 1603.0000038146973,
        "wires": []
    },
    {
        "id": "954ebb83.9caf78",
        "type": "postgrestor",
        "z": "4d5988fc.947f48",
        "name": "Ambil data QR",
        "query": "\nselect round(cast(float8 (((net_operation-quality_loss)/net_operation) * 100) as numeric),2) as qr from \n\n(select COALESCE(sum((ct/qty_perct)*qty),0) as net_operation\nfrom trans_output where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}') \nas net_operation,\n\n(select COALESCE(sum((ct/qty_perct)*qty),0) as quality_loss\nfrom trans_ng where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}') \nas quality_loss",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 176.00003051757812,
        "y": 1603.0000038146973,
        "wires": [
            [
                "3be0d928.0e69b6"
            ]
        ]
    },
    {
        "id": "3be0d928.0e69b6",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['qr']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 356.0000305175781,
        "y": 1603.0000038146973,
        "wires": [
            [
                "3d0b13ed.c3236c"
            ]
        ]
    },
    {
        "id": "58888bec.f4f394",
        "type": "link in",
        "z": "4d5988fc.947f48",
        "name": "",
        "links": [
            "d2c392c7.2ab0a",
            "1d4cb3e5.49e71c"
        ],
        "x": 72.00003051757812,
        "y": 1562.9999542236328,
        "wires": [
            [
                "954ebb83.9caf78"
            ]
        ]
    },
    {
        "id": "e433f30e.d2ecd",
        "type": "inject",
        "z": "4d5988fc.947f48",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 196.00003051757812,
        "y": 1543.0000038146973,
        "wires": [
            [
                "d2ac97f1.a42d18",
                "3d0b13ed.c3236c"
            ]
        ]
    },
    {
        "id": "38e51709.837df8",
        "type": "comment",
        "z": "4d5988fc.947f48",
        "name": "Reset Chart",
        "info": "",
        "x": 206.00003051757812,
        "y": 1503.0000038146973,
        "wires": []
    },
    {
        "id": "7bd11b7.cf7a8e4",
        "type": "ui_date_picker",
        "z": "4d5988fc.947f48",
        "name": "",
        "label": "Finish Date",
        "group": "dbd48bda.239868",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "topic": "payload",
        "topicType": "msg",
        "x": 410,
        "y": 580,
        "wires": [
            [
                "cc07eea1.a4f71"
            ]
        ]
    },
    {
        "id": "f15ed59c.1c3a38",
        "type": "moment",
        "z": "4d5988fc.947f48",
        "name": "30 days before",
        "topic": "",
        "input": "payload",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": "30",
        "adjType": "days",
        "adjDir": "subtract",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "payload",
        "outputType": "msg",
        "outTz": "Asia/Jakarta",
        "x": 220,
        "y": 480,
        "wires": [
            [
                "f977769e.8c7568"
            ]
        ]
    },
    {
        "id": "5bcdab5b.005ac4",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "Show tgl2",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "tgl_akhir_daily",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1236.0000305175781,
        "y": 303.00000381469727,
        "wires": [
            [
                "ac0a600d.868cc"
            ]
        ]
    },
    {
        "id": "ac0a600d.868cc",
        "type": "ui_text",
        "z": "4d5988fc.947f48",
        "group": "409997ac.e92658",
        "order": 4,
        "width": "6",
        "height": "1",
        "name": "",
        "label": "Finish Date: ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 1446.0000305175781,
        "y": 283.00000381469727,
        "wires": []
    },
    {
        "id": "9ac604da.68a278",
        "type": "moment",
        "z": "4d5988fc.947f48",
        "name": "Set tgl2 = tgl awal + 1 days",
        "topic": "",
        "input": "tgl_awal_daily",
        "inputType": "global",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "tgl2",
        "outputType": "msg",
        "outTz": "Asia/Jakarta",
        "x": 460,
        "y": 800,
        "wires": [
            [
                "c06cd3cb.275ee"
            ]
        ]
    },
    {
        "id": "af9c6532.f098d8",
        "type": "comment",
        "z": "4d5988fc.947f48",
        "name": "Menentukan tgl_awal dan tgl_akhir",
        "info": "",
        "x": 660,
        "y": 500,
        "wires": []
    },
    {
        "id": "6e2682b7.8bcd2c",
        "type": "moment",
        "z": "4d5988fc.947f48",
        "name": "Set tgl1 baru",
        "topic": "",
        "input": "tgl1",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "tgl1",
        "outputType": "msg",
        "outTz": "Asia/Jakarta",
        "x": 690,
        "y": 1080,
        "wires": [
            [
                "a72be4cd.7b9b28"
            ]
        ]
    },
    {
        "id": "a72be4cd.7b9b28",
        "type": "moment",
        "z": "4d5988fc.947f48",
        "name": "Set tgl2 baru",
        "topic": "",
        "input": "tgl2",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "tgl2",
        "outputType": "msg",
        "outTz": "Asia/Jakarta",
        "x": 890,
        "y": 1080,
        "wires": [
            [
                "c2567c13.4c6f3"
            ]
        ]
    },
    {
        "id": "561b113e.d60cc",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "Set tgl1 dan tgl2",
        "rules": [
            {
                "t": "set",
                "p": "tgl1",
                "pt": "msg",
                "to": "tgl_awal_daily",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "tgl2",
                "pt": "msg",
                "to": "tgl_akhir_daily",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 140,
        "y": 940,
        "wires": [
            [
                "cffba8.bb185458"
            ]
        ]
    },
    {
        "id": "844e6c62.c175b",
        "type": "link in",
        "z": "4d5988fc.947f48",
        "name": "",
        "links": [
            "d2c392c7.2ab0a",
            "1d4cb3e5.49e71c"
        ],
        "x": 95,
        "y": 1840,
        "wires": [
            [
                "4a937e41.6dcbf"
            ]
        ]
    },
    {
        "id": "4a937e41.6dcbf",
        "type": "postgrestor",
        "z": "4d5988fc.947f48",
        "name": "Stop Time",
        "query": "SELECT case\nwhen category is null then 'Others'\nelse category\nend as category,round(cast(float8 (SUM(extract(epoch from coalesce(finish, NOW())-start))/60) as numeric),2) as menit\nFROM trans_stop where id_machine={{msg.id_machine}} and start between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\ngroup by category order by menit desc\n\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 220,
        "y": 1840,
        "wires": [
            [
                "8441be87.0b06"
            ]
        ]
    },
    {
        "id": "8d950087.0356b",
        "type": "ui_chart",
        "z": "4d5988fc.947f48",
        "name": "",
        "group": "763d4f3c.2cf1",
        "order": 1,
        "width": "18",
        "height": "6",
        "label": "Total Stop Time (Minute)",
        "chartType": "bar",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 770,
        "y": 1840,
        "wires": [
            []
        ]
    },
    {
        "id": "8441be87.0b06",
        "type": "function",
        "z": "4d5988fc.947f48",
        "name": "Format untuk chart",
        "func": "var data = [];\nvar label = [];\nvar i;\ndata.push([]);\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  data[0].push(msg.payload.rows[i]['menit']);\n}\n\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  label.push(msg.payload.rows[i]['category']);\n}\n\nvar m={\n    \"series\":[\"Minute\"],\n    \"data\":data,\n    \"labels\":label\n};\n\nreturn {payload:[m]};\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 1840,
        "wires": [
            [
                "8d950087.0356b"
            ]
        ]
    },
    {
        "id": "f21e69f7.a38808",
        "type": "comment",
        "z": "4d5988fc.947f48",
        "name": "Reset Chart",
        "info": "",
        "x": 350,
        "y": 1720,
        "wires": []
    },
    {
        "id": "fb7fc91a.44cb28",
        "type": "inject",
        "z": "4d5988fc.947f48",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 340,
        "y": 1760,
        "wires": [
            [
                "f05a73f2.8754b"
            ]
        ]
    },
    {
        "id": "f05a73f2.8754b",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "Reset chart",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 496.00001525878906,
        "y": 1760.0000286102295,
        "wires": [
            [
                "8d950087.0356b"
            ]
        ]
    },
    {
        "id": "3c64926f.45f5be",
        "type": "ui_text",
        "z": "4d5988fc.947f48",
        "group": "409997ac.e92658",
        "order": 6,
        "width": "6",
        "height": "1",
        "name": "",
        "label": "Total Loading Time (Minute): ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 760,
        "y": 1940,
        "wires": []
    },
    {
        "id": "e58a4c53.840d6",
        "type": "comment",
        "z": "4d5988fc.947f48",
        "name": "Ambil stop time & category",
        "info": "",
        "x": 190,
        "y": 1800,
        "wires": []
    },
    {
        "id": "64e9e17a.a9bd3",
        "type": "link in",
        "z": "4d5988fc.947f48",
        "name": "",
        "links": [
            "d2c392c7.2ab0a",
            "1d4cb3e5.49e71c"
        ],
        "x": 95,
        "y": 1940,
        "wires": [
            [
                "486be992.c79c38"
            ]
        ]
    },
    {
        "id": "486be992.c79c38",
        "type": "postgrestor",
        "z": "4d5988fc.947f48",
        "name": "Loading Time",
        "query": "SELECT round(cast(float8 (COALESCE(SUM(extract(epoch from coalesce(finish, NOW())-start)),0)/60) as numeric),2) as menit \nFROM trans_operation \nwhere id_machine={{msg.id_machine}} and start between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n\n\n\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 240,
        "y": 1940,
        "wires": [
            [
                "805e8119.008a"
            ]
        ]
    },
    {
        "id": "44751ad2.a993b4",
        "type": "comment",
        "z": "4d5988fc.947f48",
        "name": "Ambil total loading time",
        "info": "",
        "x": 180,
        "y": 1900,
        "wires": []
    },
    {
        "id": "805e8119.008a",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['menit']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 1940,
        "wires": [
            [
                "3c64926f.45f5be"
            ]
        ]
    },
    {
        "id": "aca8e6d1.599568",
        "type": "ui_text",
        "z": "4d5988fc.947f48",
        "group": "409997ac.e92658",
        "order": 7,
        "width": "6",
        "height": "1",
        "name": "",
        "label": "Total Stop Time (Minute): ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "x": 750,
        "y": 2060,
        "wires": []
    },
    {
        "id": "be5204f.1abe7f8",
        "type": "link in",
        "z": "4d5988fc.947f48",
        "name": "",
        "links": [
            "d2c392c7.2ab0a",
            "1d4cb3e5.49e71c"
        ],
        "x": 95,
        "y": 2060,
        "wires": [
            [
                "2157f10d.13706e"
            ]
        ]
    },
    {
        "id": "2157f10d.13706e",
        "type": "postgrestor",
        "z": "4d5988fc.947f48",
        "name": "Stop Time",
        "query": "SELECT round(cast(float8 (COALESCE(SUM(extract(epoch from coalesce(finish, NOW())-start)),0)/60) as numeric),2) as menit \nFROM trans_stop \nwhere id_machine={{msg.id_machine}} and start between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n\n\n\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 220,
        "y": 2060,
        "wires": [
            [
                "2b85d55c.6552aa"
            ]
        ]
    },
    {
        "id": "a71a0b1b.aa8408",
        "type": "comment",
        "z": "4d5988fc.947f48",
        "name": "Ambil total stop time",
        "info": "",
        "x": 170,
        "y": 2020,
        "wires": []
    },
    {
        "id": "2b85d55c.6552aa",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['menit']",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 2060,
        "wires": [
            [
                "aca8e6d1.599568"
            ]
        ]
    },
    {
        "id": "c39b409e.4615f",
        "type": "inject",
        "z": "4d5988fc.947f48",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "x": 480,
        "y": 2000,
        "wires": [
            [
                "3c64926f.45f5be",
                "aca8e6d1.599568"
            ]
        ]
    },
    {
        "id": "311443b2.e4304c",
        "type": "link in",
        "z": "4d5988fc.947f48",
        "name": "",
        "links": [
            "d2c392c7.2ab0a",
            "1d4cb3e5.49e71c"
        ],
        "x": 95,
        "y": 2280,
        "wires": [
            [
                "6f39513b.fd1d6"
            ]
        ]
    },
    {
        "id": "6f39513b.fd1d6",
        "type": "postgrestor",
        "z": "4d5988fc.947f48",
        "name": "Output",
        "query": "SELECT sum(qty) as qty, 'Total Output' as part\nFROM trans_output where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\nunion all\nSELECT sum(qty) as qty, 'Total Defect' as part\nFROM trans_ng where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 210,
        "y": 2280,
        "wires": [
            [
                "27433f91.f28a6"
            ]
        ]
    },
    {
        "id": "80f6ffbe.368d7",
        "type": "ui_chart",
        "z": "4d5988fc.947f48",
        "name": "",
        "group": "763d4f3c.2cf1",
        "order": 2,
        "width": "18",
        "height": "6",
        "label": "Total Output (unit)",
        "chartType": "horizontalBar",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 750,
        "y": 2280,
        "wires": [
            []
        ]
    },
    {
        "id": "27433f91.f28a6",
        "type": "function",
        "z": "4d5988fc.947f48",
        "name": "Format untuk chart",
        "func": "var data = [];\nvar label = [];\nvar i;\ndata.push([]);\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  data[0].push(msg.payload.rows[i]['qty']);\n}\n\nfor (i = 0; i < msg.payload.rows.length; i++) \n{\n  label.push(msg.payload.rows[i]['part']);\n}\n\nvar m={\n    \"series\":[\"Unit\"],\n    \"data\":data,\n    \"labels\":label\n};\n\nreturn {payload:[m]};\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 2280,
        "wires": [
            [
                "80f6ffbe.368d7"
            ]
        ]
    },
    {
        "id": "23562f0a.a423b",
        "type": "comment",
        "z": "4d5988fc.947f48",
        "name": "Reset Chart",
        "info": "",
        "x": 350,
        "y": 2160,
        "wires": []
    },
    {
        "id": "fab7abfd.4abb18",
        "type": "inject",
        "z": "4d5988fc.947f48",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 340,
        "y": 2200,
        "wires": [
            [
                "e8fc5662.528058"
            ]
        ]
    },
    {
        "id": "e8fc5662.528058",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "Reset chart",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 496.00001525878906,
        "y": 2200.0000286102295,
        "wires": [
            [
                "80f6ffbe.368d7"
            ]
        ]
    },
    {
        "id": "bccd595d.508e58",
        "type": "comment",
        "z": "4d5988fc.947f48",
        "name": "Ambil data output",
        "info": "",
        "x": 160,
        "y": 2240,
        "wires": []
    },
    {
        "id": "95ffdf84.07f53",
        "type": "ui_switch",
        "z": "4d5988fc.947f48",
        "name": "",
        "label": "Remember machine",
        "tooltip": "",
        "group": "dbd48bda.239868",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "x": 700,
        "y": 260,
        "wires": [
            [
                "1fcb666e.d41caa"
            ]
        ]
    },
    {
        "id": "1fcb666e.d41caa",
        "type": "switch",
        "z": "4d5988fc.947f48",
        "name": "If off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 870,
        "y": 260,
        "wires": [
            [
                "ab62e243.00da8",
                "68c3093.e8c16f8"
            ]
        ]
    },
    {
        "id": "ab62e243.00da8",
        "type": "function",
        "z": "4d5988fc.947f48",
        "name": "set False",
        "func": "msg.payload = false;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1000,
        "y": 300,
        "wires": [
            [
                "cacdc6a9.dbbeb8",
                "68c3093.e8c16f8"
            ]
        ]
    },
    {
        "id": "ca323cfd.6d931",
        "type": "link in",
        "z": "4d5988fc.947f48",
        "name": "",
        "links": [
            "a7e3b204.591c2"
        ],
        "x": 535,
        "y": 260,
        "wires": [
            [
                "95ffdf84.07f53"
            ]
        ]
    },
    {
        "id": "1eb79d00.b02e13",
        "type": "inject",
        "z": "4d5988fc.947f48",
        "name": "Init false",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 500,
        "y": 180,
        "wires": [
            [
                "95ffdf84.07f53"
            ]
        ]
    },
    {
        "id": "f5e5f842.ca7e08",
        "type": "function",
        "z": "4d5988fc.947f48",
        "name": "set False",
        "func": "msg.payload = false;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 2540,
        "wires": [
            [
                "aab37a08.841f48"
            ]
        ]
    },
    {
        "id": "bbc364a1.6727a8",
        "type": "postgrestor",
        "z": "4d5988fc.947f48",
        "name": "Ambil data output",
        "query": "select sum(qty) as qty\nfrom trans_output where id_machine={{msg.id_machine}} and time between '{{msg.tgl1}} {{msg.jam}}' and '{{msg.tgl2}} {{msg.jam}}'\n\n\n",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 230,
        "y": 2600,
        "wires": [
            [
                "219e8cfd.3da344"
            ]
        ]
    },
    {
        "id": "e4726754.c546a8",
        "type": "ui_chart",
        "z": "4d5988fc.947f48",
        "name": "",
        "group": "d1c03619.3e9bb8",
        "order": 6,
        "width": "24",
        "height": "7",
        "label": "Output (unit)",
        "chartType": "bar",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "x": 770,
        "y": 2600,
        "wires": [
            [
                "24b7cad4.dd8d96"
            ]
        ]
    },
    {
        "id": "219e8cfd.3da344",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "Set nilai output dan topic tgl1",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.rows[0]['qty']",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "tgl1",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 2600,
        "wires": [
            [
                "e4726754.c546a8"
            ]
        ]
    },
    {
        "id": "4aa1f11f.504ea",
        "type": "link in",
        "z": "4d5988fc.947f48",
        "name": "",
        "links": [
            "a7e3b204.591c2"
        ],
        "x": 335,
        "y": 2540,
        "wires": [
            [
                "f5e5f842.ca7e08"
            ]
        ]
    },
    {
        "id": "e405b51e.91f528",
        "type": "comment",
        "z": "4d5988fc.947f48",
        "name": "Reset Chart",
        "info": "",
        "x": 553.9999694824219,
        "y": 2416.9999961853027,
        "wires": []
    },
    {
        "id": "aab37a08.841f48",
        "type": "change",
        "z": "4d5988fc.947f48",
        "name": "Reset chart",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 613.9999694824219,
        "y": 2536.9999961853027,
        "wires": [
            [
                "e4726754.c546a8"
            ]
        ]
    },
    {
        "id": "24b7cad4.dd8d96",
        "type": "switch",
        "z": "4d5988fc.947f48",
        "name": "Cek tgl 1 apakah < tgl_akhir",
        "property": "tgl1",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lt",
                "v": "tgl_akhir_daily",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 520,
        "y": 2700,
        "wires": [
            [
                "ca831243.a6b86"
            ]
        ]
    },
    {
        "id": "cf8c3083.42027",
        "type": "inject",
        "z": "4d5988fc.947f48",
        "name": "Init empty",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 543.9999694824219,
        "y": 2456.9999961853027,
        "wires": [
            [
                "aab37a08.841f48"
            ]
        ]
    },
    {
        "id": "ca831243.a6b86",
        "type": "moment",
        "z": "4d5988fc.947f48",
        "name": "Set tgl1 baru",
        "topic": "",
        "input": "tgl1",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "tgl1",
        "outputType": "msg",
        "outTz": "Asia/Jakarta",
        "x": 190,
        "y": 2820,
        "wires": [
            [
                "c68fc587.3b3c18"
            ]
        ]
    },
    {
        "id": "c68fc587.3b3c18",
        "type": "moment",
        "z": "4d5988fc.947f48",
        "name": "Set tgl2 baru",
        "topic": "",
        "input": "tgl2",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "tgl2",
        "outputType": "msg",
        "outTz": "Asia/Jakarta",
        "x": 390,
        "y": 2820,
        "wires": [
            [
                "bbc364a1.6727a8"
            ]
        ]
    },
    {
        "id": "fed5ede5.b3a23",
        "type": "link out",
        "z": "4d5988fc.947f48",
        "name": "",
        "links": [
            "336e79c4.d9f2e6",
            "3366a638.f8546a"
        ],
        "x": 505,
        "y": 960,
        "wires": []
    },
    {
        "id": "2fbd4c30.9f3364",
        "type": "comment",
        "z": "4d5988fc.947f48",
        "name": "Cari output tiap tanggal",
        "info": "",
        "x": 620,
        "y": 960,
        "wires": []
    },
    {
        "id": "336e79c4.d9f2e6",
        "type": "link in",
        "z": "4d5988fc.947f48",
        "name": "",
        "links": [
            "fed5ede5.b3a23"
        ],
        "x": 55,
        "y": 2600,
        "wires": [
            [
                "bbc364a1.6727a8"
            ]
        ]
    },
    {
        "id": "e07c1ff9.7dccc",
        "type": "comment",
        "z": "4d5988fc.947f48",
        "name": "Cari output tiap tanggal",
        "info": "",
        "x": 140,
        "y": 2560,
        "wires": []
    },
    {
        "id": "cffba8.bb185458",
        "type": "moment",
        "z": "4d5988fc.947f48",
        "name": "Set tgl2 baru",
        "topic": "",
        "input": "tgl2",
        "inputType": "msg",
        "inTz": "Asia/Jakarta",
        "adjAmount": "1",
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "id-ID",
        "output": "tgl2",
        "outputType": "msg",
        "outTz": "Asia/Jakarta",
        "x": 150,
        "y": 1000,
        "wires": [
            [
                "d2c392c7.2ab0a"
            ]
        ]
    },
    {
        "id": "12023a34.4d3366",
        "type": "ui_template",
        "z": "2a5af2be.e3d51e",
        "group": "c79d7bd9.5faa78",
        "name": "",
        "order": 1,
        "width": "20",
        "height": "11",
        "format": "<!DOCTYPE html>\n<html>\n<head>\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n\n</head>\n\n<body>\n<div style=\"background-color: #474e5d;color:white;\">\n  <h2 style=\"text-align:center;\">About This Application</h2>\n  <p style=\"text-align:center;\"><b>This is application for monitoring OEE as real time</b></p>\n  <b>&nbsp&nbspFeatures:</b>\n  <ul>\n      <li>Real Time OEE Monitoring Dashboard</li>\n      <li>Input Type & Stop Category</li>\n      <li>Input Defect</li>\n      <li>View Stop Time Data</li>\n      <li>View OEE Recorded by date</li>\n      <li>View Daily OEE Recorded</li>\n\n\n  </ul>\n  <p style=\"text-align:center;\"><i>Created by <b>@Akbarwicaksn</i></b></p>\n</div>\n<div style=\"background-color: #474e5d;color:white;\">\n  <h2 style=\"text-align:center;\">Requirement:</h2>\n  <ul>\n      <li>Postgresql database</li>\n      <li>Raspberry Pi Compute Module 4 as IoT device</li>\n      <li>Relays in each machine for getting: loading time, stop time, Output, Defect</li>\n  </ul>\n</div>\n\n</body>\n</html>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 140,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "12772333.d98d6d",
        "type": "comment",
        "z": "2a5af2be.e3d51e",
        "name": "Tanggal dan Jam",
        "info": "",
        "x": 140,
        "y": 120,
        "wires": []
    },
    {
        "id": "d1914d8e.5ad3f",
        "type": "ui_template",
        "z": "2a5af2be.e3d51e",
        "group": "c79d7bd9.5faa78",
        "name": "Clock Toolbar",
        "order": 2,
        "width": "0",
        "height": "0",
        "format": "<script id=\"titleScript\" type=\"text/javascript\">\n\n$(function() {\n    if($('.md-toolbar-tools').length != 0){\n        loadClock();\n    }else setTimeout(loadClock, 500)\n});\n\nfunction loadClock(){\n    $('#clock').remove();\n    var toolbar = $('.md-toolbar-tools');\n    \n    var div = $('<div/>');\n    var p = $('<p/ id=\"clock\">');\n    \n    div.append(p);\n    div[0].style.margin = '5px 5px 5px auto';\n    toolbar.append(div);\n\n    function displayTitle(lh) {\n        p.text(lh); \n    }\n    \n    function upTime() {\n        var d = new Date();\n        p.text(d.toLocaleString());\n    }\n\n    if(document.clockInterval){ \n            clearInterval(document.clockInterval);\n            document.clockInterval = null;\n    }\n        \n    document.clockInterval = setInterval(upTime,1000);\n}\n\n</script>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "global",
        "x": 140,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "cd9d708c96c7c82c",
        "type": "ping",
        "z": "f5921a74d5c81ea4",
        "protocol": "Automatic",
        "mode": "timed",
        "name": "",
        "host": "192.168.7.17",
        "timer": "20",
        "inputs": 0,
        "x": 110,
        "y": 80,
        "wires": [
            [
                "73c81adedcd12a8b"
            ]
        ]
    },
    {
        "id": "3552191d615bf7f6",
        "type": "comment",
        "z": "f5921a74d5c81ea4",
        "name": "ID machine = 1",
        "info": "",
        "x": 120,
        "y": 40,
        "wires": []
    },
    {
        "id": "a791df30d47e332b",
        "type": "switch",
        "z": "f5921a74d5c81ea4",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 270,
        "y": 120,
        "wires": [
            [
                "e810c9c22d76c5af"
            ]
        ]
    },
    {
        "id": "73c81adedcd12a8b",
        "type": "change",
        "z": "f5921a74d5c81ea4",
        "name": "id_machine = 1",
        "rules": [
            {
                "t": "set",
                "p": "id_machine",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "check",
                "pt": "msg",
                "to": "check",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 80,
        "wires": [
            [
                "a791df30d47e332b"
            ]
        ]
    },
    {
        "id": "966fdc0bdbffc970",
        "type": "postgrestor",
        "z": "f5921a74d5c81ea4",
        "name": "Update machine master False",
        "query": "update machine_master set status_start='False'\nwhere id_machine={{msg.id_machine}} ;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 710,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "07fc6eb37ea2f0d3",
        "type": "postgrestor",
        "z": "f5921a74d5c81ea4",
        "name": "Update trans_operation",
        "query": "update trans_operation set finish=NOW() where id_machine={{msg.id_machine}}\nand finish is NULL;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 690,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "70de6197ff274d96",
        "type": "postgrestor",
        "z": "f5921a74d5c81ea4",
        "name": "Update machine master False",
        "query": "update machine_master set status_stop='False'\nwhere id_machine={{msg.id_machine}} ;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 710,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "ff2b87bbc1aac849",
        "type": "postgrestor",
        "z": "f5921a74d5c81ea4",
        "name": "Update trans_stop",
        "query": "update trans_stop set finish=NOW() where id_machine={{msg.id_machine}}\nand finish is NULL;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 670,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "2e622399dec8751f",
        "type": "inject",
        "z": "f5921a74d5c81ea4",
        "name": "",
        "props": [
            {
                "p": "check",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "x": 110,
        "y": 220,
        "wires": [
            [
                "15b760bb76cc5cb3"
            ]
        ]
    },
    {
        "id": "e810c9c22d76c5af",
        "type": "switch",
        "z": "f5921a74d5c81ea4",
        "name": "more than 3",
        "property": "check",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "3",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 430,
        "y": 120,
        "wires": [
            [
                "966fdc0bdbffc970",
                "07fc6eb37ea2f0d3",
                "70de6197ff274d96",
                "ff2b87bbc1aac849",
                "6d7cf788ed3b9ab8"
            ],
            [
                "880df06b68866cf7"
            ]
        ]
    },
    {
        "id": "880df06b68866cf7",
        "type": "function",
        "z": "f5921a74d5c81ea4",
        "name": "check  + 1",
        "func": "var check = msg.check;\nmsg.check =  check + 1;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 180,
        "wires": [
            [
                "15b760bb76cc5cb3"
            ]
        ]
    },
    {
        "id": "15b760bb76cc5cb3",
        "type": "change",
        "z": "f5921a74d5c81ea4",
        "name": "global check",
        "rules": [
            {
                "t": "set",
                "p": "check",
                "pt": "global",
                "to": "check",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "6d7cf788ed3b9ab8",
        "type": "change",
        "z": "f5921a74d5c81ea4",
        "name": "reset",
        "rules": [
            {
                "t": "set",
                "p": "check",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "1e9de1f372e4d3ec",
        "type": "comment",
        "z": "f5921a74d5c81ea4",
        "name": "Check 3 times, for make sure device is not connected",
        "info": "",
        "x": 420,
        "y": 40,
        "wires": []
    },
    {
        "id": "17299e3c9db382f0",
        "type": "ping",
        "z": "f5921a74d5c81ea4",
        "protocol": "Automatic",
        "mode": "timed",
        "name": "",
        "host": "192.168.7.57",
        "timer": "20",
        "inputs": 0,
        "x": 110,
        "y": 340,
        "wires": [
            [
                "836659dd897bae4d"
            ]
        ]
    },
    {
        "id": "23f2c1016ff99cb8",
        "type": "comment",
        "z": "f5921a74d5c81ea4",
        "name": "ID machine = 1",
        "info": "",
        "x": 120,
        "y": 300,
        "wires": []
    },
    {
        "id": "24d55d83cd79e119",
        "type": "switch",
        "z": "f5921a74d5c81ea4",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 270,
        "y": 380,
        "wires": [
            [
                "7a271945bf053e48"
            ]
        ]
    },
    {
        "id": "836659dd897bae4d",
        "type": "change",
        "z": "f5921a74d5c81ea4",
        "name": "id_machine = 3",
        "rules": [
            {
                "t": "set",
                "p": "id_machine",
                "pt": "msg",
                "to": "3",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "check",
                "pt": "msg",
                "to": "check",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 340,
        "wires": [
            [
                "24d55d83cd79e119"
            ]
        ]
    },
    {
        "id": "110e0de50492e375",
        "type": "postgrestor",
        "z": "f5921a74d5c81ea4",
        "name": "Update machine master False",
        "query": "update machine_master set status_start='False'\nwhere id_machine={{msg.id_machine}} ;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 710,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "78272be82ba5aa9e",
        "type": "postgrestor",
        "z": "f5921a74d5c81ea4",
        "name": "Update trans_operation",
        "query": "update trans_operation set finish=NOW() where id_machine={{msg.id_machine}}\nand finish is NULL;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 690,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "6bf7264452a4e2d3",
        "type": "postgrestor",
        "z": "f5921a74d5c81ea4",
        "name": "Update machine master False",
        "query": "update machine_master set status_stop='False'\nwhere id_machine={{msg.id_machine}} ;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 710,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "ac63b7b930e5f2e8",
        "type": "postgrestor",
        "z": "f5921a74d5c81ea4",
        "name": "Update trans_stop",
        "query": "update trans_stop set finish=NOW() where id_machine={{msg.id_machine}}\nand finish is NULL;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 670,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "cf7187e6cc7dc519",
        "type": "inject",
        "z": "f5921a74d5c81ea4",
        "name": "",
        "props": [
            {
                "p": "check",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "x": 110,
        "y": 480,
        "wires": [
            [
                "b2844e55b754500c"
            ]
        ]
    },
    {
        "id": "7a271945bf053e48",
        "type": "switch",
        "z": "f5921a74d5c81ea4",
        "name": "more than 3",
        "property": "check",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "3",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 430,
        "y": 380,
        "wires": [
            [
                "110e0de50492e375",
                "78272be82ba5aa9e",
                "6bf7264452a4e2d3",
                "ac63b7b930e5f2e8",
                "ae1e599c453fe488"
            ],
            [
                "07fc25d27e9ee1a5"
            ]
        ]
    },
    {
        "id": "07fc25d27e9ee1a5",
        "type": "function",
        "z": "f5921a74d5c81ea4",
        "name": "check  + 1",
        "func": "var check = msg.check;\nmsg.check =  check + 1;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 440,
        "wires": [
            [
                "b2844e55b754500c"
            ]
        ]
    },
    {
        "id": "b2844e55b754500c",
        "type": "change",
        "z": "f5921a74d5c81ea4",
        "name": "global check",
        "rules": [
            {
                "t": "set",
                "p": "check",
                "pt": "global",
                "to": "check",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "ae1e599c453fe488",
        "type": "change",
        "z": "f5921a74d5c81ea4",
        "name": "reset",
        "rules": [
            {
                "t": "set",
                "p": "check",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "d519cc4abec5e5e1",
        "type": "comment",
        "z": "f5921a74d5c81ea4",
        "name": "Check 3 times, for make sure device is not connected",
        "info": "",
        "x": 420,
        "y": 300,
        "wires": []
    },
    {
        "id": "f972c40ef9a523c1",
        "type": "ping",
        "z": "f5921a74d5c81ea4",
        "protocol": "Automatic",
        "mode": "timed",
        "name": "",
        "host": "192.168.7.64",
        "timer": "20",
        "inputs": 0,
        "x": 110,
        "y": 600,
        "wires": [
            [
                "5ac520b9d70d7a36"
            ]
        ]
    },
    {
        "id": "0cd81d3392bf929f",
        "type": "comment",
        "z": "f5921a74d5c81ea4",
        "name": "ID machine = 1",
        "info": "",
        "x": 120,
        "y": 560,
        "wires": []
    },
    {
        "id": "2f5b7358d030cb99",
        "type": "switch",
        "z": "f5921a74d5c81ea4",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 270,
        "y": 640,
        "wires": [
            [
                "d3fac90515bc7b82"
            ]
        ]
    },
    {
        "id": "5ac520b9d70d7a36",
        "type": "change",
        "z": "f5921a74d5c81ea4",
        "name": "id_machine = 4",
        "rules": [
            {
                "t": "set",
                "p": "id_machine",
                "pt": "msg",
                "to": "4",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "check",
                "pt": "msg",
                "to": "check",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 600,
        "wires": [
            [
                "2f5b7358d030cb99"
            ]
        ]
    },
    {
        "id": "345155b4afe8a631",
        "type": "postgrestor",
        "z": "f5921a74d5c81ea4",
        "name": "Update machine master False",
        "query": "update machine_master set status_start='False'\nwhere id_machine={{msg.id_machine}} ;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 710,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "4bc30156377a1366",
        "type": "postgrestor",
        "z": "f5921a74d5c81ea4",
        "name": "Update trans_operation",
        "query": "update trans_operation set finish=NOW() where id_machine={{msg.id_machine}}\nand finish is NULL;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 690,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "58c528335d4c8601",
        "type": "postgrestor",
        "z": "f5921a74d5c81ea4",
        "name": "Update machine master False",
        "query": "update machine_master set status_stop='False'\nwhere id_machine={{msg.id_machine}} ;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 710,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "5a81bb36778a690d",
        "type": "postgrestor",
        "z": "f5921a74d5c81ea4",
        "name": "Update trans_stop",
        "query": "update trans_stop set finish=NOW() where id_machine={{msg.id_machine}}\nand finish is NULL;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 670,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "745823fd9465f3f8",
        "type": "inject",
        "z": "f5921a74d5c81ea4",
        "name": "",
        "props": [
            {
                "p": "check",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "x": 110,
        "y": 740,
        "wires": [
            [
                "e8535e596a750bc7"
            ]
        ]
    },
    {
        "id": "d3fac90515bc7b82",
        "type": "switch",
        "z": "f5921a74d5c81ea4",
        "name": "more than 3",
        "property": "check",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "3",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 430,
        "y": 640,
        "wires": [
            [
                "345155b4afe8a631",
                "4bc30156377a1366",
                "58c528335d4c8601",
                "5a81bb36778a690d",
                "83b96671e43e8820"
            ],
            [
                "d8d6aa46a940aba6"
            ]
        ]
    },
    {
        "id": "d8d6aa46a940aba6",
        "type": "function",
        "z": "f5921a74d5c81ea4",
        "name": "check  + 1",
        "func": "var check = msg.check;\nmsg.check =  check + 1;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 700,
        "wires": [
            [
                "e8535e596a750bc7"
            ]
        ]
    },
    {
        "id": "e8535e596a750bc7",
        "type": "change",
        "z": "f5921a74d5c81ea4",
        "name": "global check",
        "rules": [
            {
                "t": "set",
                "p": "check",
                "pt": "global",
                "to": "check",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "83b96671e43e8820",
        "type": "change",
        "z": "f5921a74d5c81ea4",
        "name": "reset",
        "rules": [
            {
                "t": "set",
                "p": "check",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "52d292456df479bb",
        "type": "comment",
        "z": "f5921a74d5c81ea4",
        "name": "Check 3 times, for make sure device is not connected",
        "info": "",
        "x": 420,
        "y": 560,
        "wires": []
    },
    {
        "id": "f573e8e213a0581d",
        "type": "ping",
        "z": "f5921a74d5c81ea4",
        "protocol": "Automatic",
        "mode": "timed",
        "name": "",
        "host": "192.168.7.26",
        "timer": "20",
        "inputs": 0,
        "x": 110,
        "y": 860,
        "wires": [
            [
                "96f519c95b28033f"
            ]
        ]
    },
    {
        "id": "08210ce6e8dfe3c5",
        "type": "comment",
        "z": "f5921a74d5c81ea4",
        "name": "ID machine = 1",
        "info": "",
        "x": 120,
        "y": 820,
        "wires": []
    },
    {
        "id": "0ab9995b4fd115c9",
        "type": "switch",
        "z": "f5921a74d5c81ea4",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 270,
        "y": 900,
        "wires": [
            [
                "7f0da2f6b33e2a29"
            ]
        ]
    },
    {
        "id": "96f519c95b28033f",
        "type": "change",
        "z": "f5921a74d5c81ea4",
        "name": "id_machine = 5",
        "rules": [
            {
                "t": "set",
                "p": "id_machine",
                "pt": "msg",
                "to": "5",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "check",
                "pt": "msg",
                "to": "check",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 860,
        "wires": [
            [
                "0ab9995b4fd115c9"
            ]
        ]
    },
    {
        "id": "e4b6ff61708d9d52",
        "type": "postgrestor",
        "z": "f5921a74d5c81ea4",
        "name": "Update machine master False",
        "query": "update machine_master set status_start='False'\nwhere id_machine={{msg.id_machine}} ;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 710,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "cf47544375e22d40",
        "type": "postgrestor",
        "z": "f5921a74d5c81ea4",
        "name": "Update trans_operation",
        "query": "update trans_operation set finish=NOW() where id_machine={{msg.id_machine}}\nand finish is NULL;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 690,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "3004b4bdf8eb0a76",
        "type": "postgrestor",
        "z": "f5921a74d5c81ea4",
        "name": "Update machine master False",
        "query": "update machine_master set status_stop='False'\nwhere id_machine={{msg.id_machine}} ;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 710,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "fb3cb50fa97b9d84",
        "type": "postgrestor",
        "z": "f5921a74d5c81ea4",
        "name": "Update trans_stop",
        "query": "update trans_stop set finish=NOW() where id_machine={{msg.id_machine}}\nand finish is NULL;",
        "postgresDB": "d39353cd.91093",
        "output": true,
        "outputs": 1,
        "x": 670,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "4304aece5e96f6ee",
        "type": "inject",
        "z": "f5921a74d5c81ea4",
        "name": "",
        "props": [
            {
                "p": "check",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "x": 110,
        "y": 1000,
        "wires": [
            [
                "5582d69d27248143"
            ]
        ]
    },
    {
        "id": "7f0da2f6b33e2a29",
        "type": "switch",
        "z": "f5921a74d5c81ea4",
        "name": "more than 3",
        "property": "check",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "3",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 430,
        "y": 900,
        "wires": [
            [
                "e4b6ff61708d9d52",
                "cf47544375e22d40",
                "3004b4bdf8eb0a76",
                "fb3cb50fa97b9d84",
                "de377cbdd7fd9cf4"
            ],
            [
                "8ee22bdcbd1834fa"
            ]
        ]
    },
    {
        "id": "8ee22bdcbd1834fa",
        "type": "function",
        "z": "f5921a74d5c81ea4",
        "name": "check  + 1",
        "func": "var check = msg.check;\nmsg.check =  check + 1;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 960,
        "wires": [
            [
                "5582d69d27248143"
            ]
        ]
    },
    {
        "id": "5582d69d27248143",
        "type": "change",
        "z": "f5921a74d5c81ea4",
        "name": "global check",
        "rules": [
            {
                "t": "set",
                "p": "check",
                "pt": "global",
                "to": "check",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "de377cbdd7fd9cf4",
        "type": "change",
        "z": "f5921a74d5c81ea4",
        "name": "reset",
        "rules": [
            {
                "t": "set",
                "p": "check",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "fde6ca0c9e5c3ca3",
        "type": "comment",
        "z": "f5921a74d5c81ea4",
        "name": "Check 3 times, for make sure device is not connected",
        "info": "",
        "x": 420,
        "y": 820,
        "wires": []
    }
]